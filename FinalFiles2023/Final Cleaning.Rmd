---
title: "Final Data Cleaning"
author: "Ajay Patel"
output:
  html_document:
    df_print: paged
---

```{r}
library(plyr)
library(tidyverse)
load(url("http://www.rossmanchance.com/iscam3/ISCAM.RData"))

# Added 5/2 by Sean Leader
library(here)
```

#### Comparisons Function

```{r}
comparisons <- function(pre_q, post_q, param){
  new_vector = NULL
  count = NULL
  for(i in 1:length(pre_q)){
    if (is.na(pre_q[i]) == F && is.na(post_q[i]) == F){ 
      ##If both values are not NA
      if(abs(post_q[i] - pre_q[i]) > param) {
        #            if((post_q[i] < pre_q[i] - param) || (post_q[i] > pre_q[i] + param)){
        ##If the difference is out of range
        new_vector[i] <- NA
        count <- count + 1
      }
      else if(abs(post_q[i] - pre_q[i]) <= param){
        #!((post_q[i] < pre_q[i] - param) && (post_q[i] > pre_q[i] + param))){
        ##If the difference is in range
        new_vector[i] <- (pre_q[i]+post_q[i])/2
      }
    }else if (is.na(pre_q[i]) && is.na(post_q[i]) == F){
      ##If the pre is NA and the post is available
      new_vector[i] <- post_q[i]
    }else if (is.na(pre_q[i]) == F && is.na(post_q[i])){
      ##If the post is NA and the pre is available
      new_vector[i] <- pre_q[i]
    }else{
      new_vector[i] <- NA
    }
  }
  return(new_vector)
}
```

### READING IN DATA

```{r}

# Modified 5/2 by Sean Leader to use the here() function for reproducitibility
data1415 <- read.csv(here::here("Data", "MergedBothYear1_Ajay.csv"), stringsAsFactors = T)
data1516 <- read.csv(here::here("Data", "Final1516Jan6.csv"), stringsAsFactors = T)
data1617 <- read.csv(here::here("Data", "Final_16-17_Data_cleaningcoderun_Ajay.csv"), stringsAsFactors = T)

data1617 <- cbind(data1617, year="16-17")
data1516 <- cbind(data1516, year="15-16")
data1415 <- cbind(data1415, year="14-15")
```

### Removing Variables

```{r}
### YEAR 1 ###
data1415$checkname <- NULL
data1415$X <- NULL

### YEAR 2 ###
data1516$First.Name <- NULL
data1516$Last.Name <- NULL
data1516$X.1 <- NULL
data1516$Instructor.Section.Term <- NULL
data1516$conceptPctAnswered_pre <- NULL
data1516$conceptPctAnswered_post <- NULL

### YEAR 3 ###
data1617$checkname <- NULL
data1617$Instructor.Section.Term <- NULL
data1617$term <- NULL
data1617$conceptPctAnswered_pre <- NULL
data1617$conceptPctAnswered_post <- NULL
data1617$pre_c_rr <- NULL
```

### Renaming Variables

```{r}
### YEAR 1 ###
names(data1415)[names(data1415)=="StartDate_pre"] <- "Start.Time_pre"
names(data1415)[names(data1415)=="EndDate_pre"] <- "End.Time_pre"
names(data1415)[names(data1415)=="Q10_pre"] <- "math_grades_pre"
names(data1415)[names(data1415)=="Q11_pre"] <- "math_comp_pre"
names(data1415)[names(data1415)=="Q12_pre"] <- "stats_career_usage_pre"
names(data1415)[names(data1415)=="Q13_pre"] <- "mastering_confidence_pre"
names(data1415)[names(data1415)=="Q15_pre"] <- "choice_likelihood_pre"
names(data1415)[names(data1415)=="Q50_pre"] <- "gender_pre"
names(data1415)[names(data1415)=="Q51_pre"] <- "age_pre"
names(data1415)[names(data1415)=="Q52_pre"] <- "nonAP_HSstats"
names(data1415)[names(data1415)=="Q53_pre"] <- "APstats"
names(data1415)[names(data1415)=="Q54_pre"] <- "college_stats_pre"
names(data1415)[names(data1415)=="Q55_pre"] <- "student_status_pre"
names(data1415)[names(data1415)=="Q55_other_pre"] <- "status_other_pre"
names(data1415)[names(data1415)=="Q56_pre"] <- "field_pre"
names(data1415)[names(data1415)=="Q56_other_pre"] <- "field_other_pre"
names(data1415)[names(data1415)=="Q57_pre"] <- "gpa_pre"
names(data1415)[names(data1415)=="Q58_pre"] <- "math_actsat_pre"
names(data1415)[names(data1415)=="Q58_pre_flag"] <- "math_satact_flag_pre"
names(data1415)[names(data1415)=="Q58_pre_zscore"] <- "SATACTzscore"
names(data1415)[names(data1415)=="Q59_pre"] <- "grade_expectation_pre"
names(data1415)[names(data1415)=="StartDate_post"] <- "Start.Time_post"
names(data1415)[names(data1415)=="EndDate_post"] <- "End.Time_post"
names(data1415)[names(data1415)=="Opt_out1_post"] <- "Opt.out_post"
names(data1415)[names(data1415)=="Q10_post"] <- "math_grades_post"
names(data1415)[names(data1415)=="Q11_post"] <- "math_comp_post"
names(data1415)[names(data1415)=="Q12_post"] <- "stats_career_usage_post"
names(data1415)[names(data1415)=="Q13_post"] <- "mastering_confidence_post"
names(data1415)[names(data1415)=="Q15_post"] <- "choice_likelihood_post"
names(data1415)[names(data1415)=="Q50_post"] <- "gender_post"
names(data1415)[names(data1415)=="Q51_post"] <- "age_post"
names(data1415)[names(data1415)=="Q52_post"] <- "nonAP_HSstats_post"
names(data1415)[names(data1415)=="Q53_post"] <- "APstats_post"
names(data1415)[names(data1415)=="Q54_post"] <- "college_stats_post"
names(data1415)[names(data1415)=="Q55_post"] <- "student_status_post"
names(data1415)[names(data1415)=="Q55_other_post"] <- "status_other_post"
names(data1415)[names(data1415)=="Q56_post"] <- "field_post"
names(data1415)[names(data1415)=="Q56_other_post"] <- "field_other_post"
names(data1415)[names(data1415)=="Q57_post"] <- "gpa_post"
names(data1415)[names(data1415)=="Q58_post"] <- "math_actsat_post"
names(data1415)[names(data1415)=="Q58_post_flag"] <- "math_satact_flag_post"
names(data1415)[names(data1415)=="Q58_post_zscore"] <- "SATACTzscore_post"
names(data1415)[names(data1415)=="Q59_post"] <- "grade_expectation_post"
names(data1415)[names(data1415)=="Affect_pre_final"] <- "Affect_pre"
names(data1415)[names(data1415)=="Affect_post_final"] <- "Affect_post"
names(data1415)[names(data1415)=="Cog_Comp_pre_final"] <- "Cognitive.Competence_pre"
names(data1415)[names(data1415)=="Cog_Comp_post_final"] <- "Cognitive.Competence_post"
names(data1415)[names(data1415)=="Difficulty_pre_final"] <- "Difficulty_pre"
names(data1415)[names(data1415)=="Difficulty_post_final"] <- "Difficulty_post"
names(data1415)[names(data1415)=="Effort_pre_final"] <- "Effort_pre"
names(data1415)[names(data1415)=="Effort_post_final"] <- "Effort_post"
names(data1415)[names(data1415)=="Interest_pre_final"] <- "Interest_pre"
names(data1415)[names(data1415)=="Interest_post_final"] <- "Interest_post"
names(data1415)[names(data1415)=="Value_pre_final"] <- "Value_pre"
names(data1415)[names(data1415)=="Value_post_final"] <- "Value_post"
names(data1415)[names(data1415)=="section_code"] <- "section"
names(data1415)[names(data1415)=="Teacher_Sex"] <- "instructor.gender"
names(data1415)[names(data1415)=="Pre_RR"] <- "pre_c_rr"
names(data1415)[names(data1415)=="Post_RR"] <- "post_c_rr"
names(data1415)[names(data1415)=="Institution"] <- "institution"
names(data1415)[names(data1415)=="Carnegie_Classification"] <- "CarnegieClassification"
names(data1415)[names(data1415)=="Semester"] <- "semester"
names(data1415)[names(data1415)=="Weeks_of_Class"] <- "class.meet.weeks"
names(data1415)[names(data1415)=="Scheduling_System"] <- "semester"
names(data1415)[names(data1415)=="Class_TimeOfDay"] <- "time.meet"
names(data1415)[names(data1415)=="Statistical_Inv_Text"] <- "isi_textbook"
names(data1415)[names(data1415)=="Primary_Text"] <- "no.supplemental.textbook"
names(data1415)[names(data1415)=="PreConcept_Admin_Type"] <- "admin.pre.location"
names(data1415)[names(data1415)=="PreConcept_Admin_Time"] <- "admin.pre.time"
names(data1415)[names(data1415)=="PreConcept_Incentive"] <- "incentive.pre"
names(data1415)[names(data1415)=="PreConcept_Incentive_Explain"] <- "incentive.pre.description"
names(data1415)[names(data1415)=="PostConcept_Admin_Type"] <- "admin.post.location"
names(data1415)[names(data1415)=="PostConcept_Admin_Time"] <- "admin.post.time"
names(data1415)[names(data1415)=="PostConcept_Incentive"] <- "incentive.post"
names(data1415)[names(data1415)=="PostConcept_Incentive_Explain"] <- "incentive.post.description"
names(data1415)[names(data1415)=="End_ClassSize"] <- "class.size.end"
names(data1415)[names(data1415)=="ClassSize"] <- "class.size.start"
names(data1415)[names(data1415)=="Math_PreReq"] <- "math.prereq"
names(data1415)[names(data1415)=="ISI_Workshop"] <- "isi.workshop"
names(data1415)[names(data1415)=="Institution_Classification"] <- "institution.classification"
names(data1415)[names(data1415)=="Department_Classification"] <- "department.classification"
names(data1415)[names(data1415)=="Position_Classification"] <- "position.classification"
names(data1415)[names(data1415)=="Years_StatsTeaching"] <- "years.teaching.intro.stats"
names(data1415)[names(data1415)=="data1415_Analysis_Experience"] <- "analyzing.data1415.experience"
names(data1415)[names(data1415)=="GAISE_Familiar"] <- "gaise.familiar"
names(data1415)[names(data1415)=="Textbook"] <- "textbook.classification"
names(data1415)[names(data1415)=="Instructor_Names"] <- "instructor.last.name"
names(data1415)[names(data1415)=="Class_Meetings"] <- "class.session.length.mins"
names(data1415)[names(data1415)=="Opt_out1_pre"] <- "Opt.out_pre"
names(data1415)[names(data1415)=="Opt_out1_post"] <- "Opt.out_post"

### YEAR 2 ###
names(data1516)[names(data1516)=="term"] <- "semester"
names(data1516)[names(data1516)=="age"] <- "age_pre"
names(data1516)[names(data1516)=="Cognitive_Competence_pre"] <- "Cognitive.Competence_pre"
names(data1516)[names(data1516)=="first_generation"] <- "firstgen"
names(data1516)[names(data1516)=="Cognitive_Competence_post"] <- "Cognitive.Competence_post"
names(data1516)[names(data1516)=="gender"] <- "gender_post"
names(data1516)[names(data1516)=="gpa"] <- "gpa_post"
names(data1516)[names(data1516)=="pre_c_rr"] <- "Pre_c_RR"
names(data1516)[names(data1516)=="post_c_rr"] <- "Post_c_RR"
names(data1516)[names(data1516)=="flag_satact"] <- "math_satact_flag_post"
names(data1516)[names(data1516)=="X1st.time.isi.user"] <- "1st.time.isi.user"
names(data1516)[names(data1516)=="Cognitive_Competence_pre"] <- "Cognitive.Competence_pre"
names(data1516)[names(data1516)=="Cognitive_Competence_post"] <- "Cognitive.Competence_post"
names(data1516)[names(data1516)=="optpre"] <- "Opt.out_pre"
names(data1516)[names(data1516)=="optpost"] <- "Opt.out_post"

### YEAR 3 ###
names(data1617)[names(data1617)=="first.gen_post"] <- "first_generation"
names(data1617)[names(data1617)=="race.other_post"] <- "race_origin_other"
names(data1617)[names(data1617)=="satact_zscore"] <- "SATACTzscore"
```

### Overall Attitude Variable

```{r}
### YEAR 1 ###
data1415$overall_attitude_pre <- NA
data1415$overall_attitude_pre <- (rowSums(data1415[ , c("Q6.c_pre_a", "Q6.d_pre_a", "Q7.e_pre_a", "Q7.h_pre_a", 
                                                        "Q7.i_pre_a", "Q8.h_pre_a", "Q6.e_pre_a", "Q7.a_pre_a", 
                                                        "Q8.f_pre_a", "Q9.a_pre_a", "Q9.b_pre_a", "Q9.e_pre_a", 
                                                        "Q7.b_pre_a", "Q7.j_pre_a", "Q8.c_pre_a", "Q8.i_pre_a",
                                                        "Q6.g_pre_a", "Q6.i_pre_a", "Q6.j_pre_a", "Q7.c_pre_a",
                                                        "Q7.f_pre_a", "Q7.g_pre_a", "Q8.a_pre_a", "Q8.e_pre_a",
                                                        "Q9.c_pre_a")], na.rm = T)) / 25

data1415$overall_attitude_post <- NA
data1415$overall_attitude_post <- (rowSums(data1415[ , c("Q6.c_post_a", "Q6.d_post_a", "Q7.e_post_a", "Q7.h_post_a", 
                                                         "Q7.i_post_a", "Q8.h_post_a", "Q6.e_post_a", "Q7.a_post_a", 
                                                         "Q8.f_post_a", "Q9.a_post_a", "Q9.b_post_a", "Q9.e_post_a", 
                                                         "Q7.b_post_a", "Q7.j_post_a", "Q8.c_post_a", "Q8.i_post_a",
                                                         "Q6.g_post_a", "Q6.i_post_a", "Q6.j_post_a", "Q7.c_post_a",
                                                         "Q7.f_post_a", "Q7.g_post_a", "Q8.a_post_a", "Q8.e_post_a",
                                                         "Q9.c_post_a")], na.rm = T)) / 25

### YEAR 2 ###
data1516$overall_attitude_pre <- NA
data1516$overall_attitude_pre <- (rowSums(data1516[ , c("Q6.c_pre_a", "Q6.d_pre_a", "Q7.e_pre_a", "Q7.h_pre_a", 
                                                        "Q7.i_pre_a", "Q8.h_pre_a", "Q6.e_pre_a", "Q7.a_pre_a", 
                                                        "Q8.f_pre_a", "Q9.a_pre_a", "Q9.b_pre_a", "Q9.e_pre_a", 
                                                        "Q7.b_pre_a", "Q7.j_pre_a", "Q8.c_pre_a", "Q8.i_pre_a",
                                                        "Q6.g_pre_a", "Q6.i_pre_a", "Q6.j_pre_a", "Q7.c_pre_a",
                                                        "Q7.f_pre_a", "Q7.g_pre_a", "Q8.a_pre_a", "Q8.e_pre_a",
                                                        "Q9.c_pre_a")], na.rm = T)) / 25

data1516$overall_attitude_post <- NA
data1516$overall_attitude_post <- (rowSums(data1516[ , c("Q6.c_post_a", "Q6.d_post_a", "Q7.e_post_a", "Q7.h_post_a", 
                                                         "Q7.i_post_a", "Q8.h_post_a", "Q6.e_post_a", "Q7.a_post_a", 
                                                         "Q8.f_post_a", "Q9.a_post_a", "Q9.b_post_a", "Q9.e_post_a", 
                                                         "Q7.b_post_a", "Q7.j_post_a", "Q8.c_post_a", "Q8.i_post_a",
                                                         "Q6.g_post_a", "Q6.i_post_a", "Q6.j_post_a", "Q7.c_post_a",
                                                         "Q7.f_post_a", "Q7.g_post_a", "Q8.a_post_a", "Q8.e_post_a",
                                                         "Q9.c_post_a")], na.rm = T)) / 25


### YEAR 3 ###
data1617$overall_attitude_pre <- NA
data1617$overall_attitude_pre <- (rowSums(data1617[ , c("Q6.c_pre_a", "Q6.d_pre_a", "Q7.e_pre_a", "Q7.h_pre_a", 
                                                        "Q7.i_pre_a", "Q8.h_pre_a", "Q6.e_pre_a", "Q7.a_pre_a", 
                                                        "Q8.f_pre_a", "Q9.a_pre_a", "Q9.b_pre_a", "Q9.e_pre_a", 
                                                        "Q7.b_pre_a", "Q7.j_pre_a", "Q8.c_pre_a", "Q8.i_pre_a",
                                                        "Q6.g_pre_a", "Q6.i_pre_a", "Q6.j_pre_a", "Q7.c_pre_a",
                                                        "Q7.f_pre_a", "Q7.g_pre_a", "Q8.a_pre_a", "Q8.e_pre_a",
                                                        "Q9.c_pre_a")], na.rm = T)) / 25

data1617$overall_attitude_post <- NA
data1617$overall_attitude_post <- (rowSums(data1617[ , c("Q6.c_post_a", "Q6.d_post_a", "Q7.e_post_a", "Q7.h_post_a", 
                                                         "Q7.i_post_a", "Q8.h_post_a", "Q6.e_post_a", "Q7.a_post_a", 
                                                         "Q8.f_post_a", "Q9.a_post_a", "Q9.b_post_a", "Q9.e_post_a", 
                                                         "Q7.b_post_a", "Q7.j_post_a", "Q8.c_post_a", "Q8.i_post_a",
                                                         "Q6.g_post_a", "Q6.i_post_a", "Q6.j_post_a", "Q7.c_post_a",
                                                         "Q7.f_post_a", "Q7.g_post_a", "Q8.a_post_a", "Q8.e_post_a",
                                                         "Q9.c_post_a")], na.rm = T)) / 25
```

### Class Length Minutes

```{r}
# short <= 60
# 61 <= medium <= 90
# 90+ = long
# block
# online

### YEAR 1 ###
data1415$class.session.length <- as.character(data1415$class.session.length.mins)
for (i in 1:dim(data1415)[1]) {
  if (is.na(data1415$class.session.length.mins[i])==1) {data1415$class.session.length[i] <- NA}
  else if (data1415$class.session.length.mins[i]=="") {data1415$class.session.length[i]<-NA}
  else if (data1415$class.session.length.mins[i]=="2 days a week for 75 minutes") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days a week for 80 minutes and 1 day a week for 50 minutes.") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="2 days a week for 80 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days at 75 min, 1 day at 50") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="2 days for 75 minutes and 1 day of 50 min") {data1415$class.session.length[i]<-"block"}
  # else if (data1415$class.session.length.mins[i]=="2 days for 90 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week and 1 hr 25 minute classes") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 70 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 75 minutes") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 75 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 75 minutes per time") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 80 minutes") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 80 minutes and 1 day per week at 50 min.") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="2 days per week for 80 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days per week, 75 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 days/week for 75 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="2 times per week-1hr 15 min") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="3 day per week, 80 minutes two of the days and 50 minutes the third day.") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="3 days , 60 minutes per session") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days a week for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days a week, 50 minutes per class period") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days a week.  Two days 90 minutes; one day 50 minutes") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="3 days per week") {data1415$class.session.length[i]<-NA}
  else if (data1415$class.session.length.mins[i]=="3 days per week  each a full hour") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days per week for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days per week for 50 minutes each LOCK  2 days per week for 70 minutes each TEAL") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="3 days per week for 50 minutes each.") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days per week for 75 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="3 days per week with 2 x  50min and 1 x 110 min") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="3 days per week, 50 mins each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days per week, 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days per week, 50 minutes each.") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days, 50 minutes each class period") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days/week for 50 minutese each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days/week, 50 min each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 days/week, 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="3 lecture days + 1 lab day/week") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="3days/week for 50 minutes each class session") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="4 days a week (each 50 minutes in length - two days of lecture and two days of lab)") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="4 days a week for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="4 days a week, 50 minutes each.") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="4 days a week, for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="4 days per week for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="                                                                                                                   4 days per week for 50 minutes each.  (2 of the classes were a in computer lab; 2 were in a traditional lecture classroom.)") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="4 days, 50 minutes") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="5 days per week, 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="50 minutes for 3 days each week") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="50 minutes, three times per week") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="80 minute class, twice a week") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="                                                                                                             Class met four times/week, each class for 50 minutes.  Two classes in a lecture setting and two classes in a computer lab setting") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="Every other day (so either two or three times a week) for 80 minutes per class.  (Block Schedule)") {data1415$class.session.length[i]<-"block"}
  else if (data1415$class.session.length.mins[i]=="Five days a week for 40 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="Five days a week for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="One section met twice a week for 1-1/4 hours; the other met once a week for 2-1/2 hours") {data1415$class.session.length[i]<-"long"}
  else if (data1415$class.session.length.mins[i]=="Online course") {data1415$class.session.length[i]<-"online"}
  else if (data1415$class.session.length.mins[i]=="Regular: 3 days per week for 50 minutes each") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="TEAL: 2 days per week for 75 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="The class met twice a week, on Tuesdays and Thursdays, for 75 minutes per class .") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="twice a week for 75 min") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="                                                                                                                      Twice a week we met for 50 minutes as a large class (~85) and 1 a week (also 50 minutes) the students met in recitation.") {data1415$class.session.length[i]<-"short"}
  else if (data1415$class.session.length.mins[i]=="twice a week we met for 75 minutes, and mostly I lectured.  However, we did regular at-your-seat demos/worksheets/etc. (and clickers every day).    once a week we met for one hour for a lab where the students did the computing themselves.") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="Twice a week- 1 hr 15 min") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="Two days per week for 75 minutes each day") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="Two times a week for 75 minutes each") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="Two times per week, 1 hour and 15 minutes each time") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="We meet twice a week for 80 minutes each time") {data1415$class.session.length[i]<-"medium"}
  else if (data1415$class.session.length.mins[i]=="We met three days a week.  Two days for 80 minutes and one day for 50 minutes") {data1415$class.session.length[i]<-"block"}
  else {data1415$class.session.length[i]<-NA}
}
data1415$class.session.length <- as.factor(data1415$class.session.length)

### YEAR 2 ###
data1516$class.session.length <- as.character(data1516$class.session.length.mins)
for (i in 1:dim(data1516)[1]) {
  if (is.na(data1516$class.session.length.mins[i])==1) {data1516$class.session.length[i] <- NA}
  else if (data1516$class.session.length.mins[i]=="") {data1516$class.session.length[i]<-NA}
  else if (data1516$class.session.length.mins[i]=="1") {data1516$class.session.length[i]<-"short"}
  else if (data1516$class.session.length.mins[i]=="100") {data1516$class.session.length[i]<-"long"}
  else if (data1516$class.session.length.mins[i]=="110") {data1516$class.session.length[i]<-"long"}
  else if (data1516$class.session.length.mins[i]=="120") {data1516$class.session.length[i]<-"long"}
  else if (data1516$class.session.length.mins[i]=="150") {data1516$class.session.length[i]<-"long"}
  else if (data1516$class.session.length.mins[i]=="45") {data1516$class.session.length[i]<-"short"}
  else if (data1516$class.session.length.mins[i]=="50") {data1516$class.session.length[i]<-"short"}
  else if (data1516$class.session.length.mins[i]=="54") {data1516$class.session.length[i]<-"short"}
  else if (data1516$class.session.length.mins[i]=="60") {data1516$class.session.length[i]<-"short"}
  else if (data1516$class.session.length.mins[i]=="70") {data1516$class.session.length[i]<-"medium"}
  else if (data1516$class.session.length.mins[i]=="75") {data1516$class.session.length[i]<-"medium"}
  else if (data1516$class.session.length.mins[i]=="80") {data1516$class.session.length[i]<-"medium"}
  else if (data1516$class.session.length.mins[i]=="85") {data1516$class.session.length[i]<-"medium"}
  else if (data1516$class.session.length.mins[i]=="90") {data1516$class.session.length[i]<-"long"}
  else if (data1516$class.session.length.mins[i]=="40, 70") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="45, 85") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="50, 100") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="50, 110") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="50, 120") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="50, 150") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="60, 120") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="75, 50") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="80, 50") {data1516$class.session.length[i]<-"block"}
  else if (data1516$class.session.length.mins[i]=="Online") {data1516$class.session.length[i]<-"online"}
  else {data1516$class.session.length[i]<-NA}
}
data1516$class.session.length <- as.factor(data1516$class.session.length)


### YEAR 3 ###
data1617$class.session.length <- as.character(data1617$class.session.length.mins)
for (i in 1:dim(data1617)[1]) {
  if (is.na(data1617$class.session.length.mins[i])==1) {data1617$class.session.length[i] <- NA}
  else if (data1617$class.session.length.mins[i]=="") {data1617$class.session.length[i]<-NA}
  else if (data1617$class.session.length.mins[i]=="100") {data1617$class.session.length[i]<-"long"}
  else if (data1617$class.session.length.mins[i]=="110") {data1617$class.session.length[i]<-"long"}
  else if (data1617$class.session.length.mins[i]=="42") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="44") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="45") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="50") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="55") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="58") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="60") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="65") {data1617$class.session.length[i]<-"short"}
  else if (data1617$class.session.length.mins[i]=="74") {data1617$class.session.length[i]<-"medium"}
  else if (data1617$class.session.length.mins[i]=="75") {data1617$class.session.length[i]<-"medium"}
  else if (data1617$class.session.length.mins[i]=="80") {data1617$class.session.length[i]<-"medium"}
  else if (data1617$class.session.length.mins[i]=="82") {data1617$class.session.length[i]<-"medium"}
  else if (data1617$class.session.length.mins[i]=="85") {data1617$class.session.length[i]<-"medium"}
  else if (data1617$class.session.length.mins[i]=="90") {data1617$class.session.length[i]<-"long"}
  else if (data1617$class.session.length.mins[i]=="block") {data1617$class.session.length[i]<-"block"}
  else if (data1617$class.session.length.mins[i]=="online") {data1617$class.session.length[i]<-"online"}
  else if (data1617$class.session.length.mins[i]=="Online") {data1617$class.session.length[i]<-"online"}
  else {data1617$class.session.length[i]<-NA}
}
data1617$class.session.length <- as.factor(data1617$class.session.length)
```

### Class Size Variable

```{r}
### YEAR 1 ###
data1415$class.size.start <- as.numeric(as.character(data1415$class.size.start))
data1415$class.size.start.ind <- NA
data1415$class.size.start.ind[data1415$class.size.start <= 25] <- "Small"
data1415$class.size.start.ind[data1415$class.size.start >= 26 & data1415$class.size.start <= 50] <- "Medium"
data1415$class.size.start.ind[data1415$class.size.start >= 51 & data1415$class.size.start <= 100] <- "Large"
data1415$class.size.start.ind[data1415$class.size.start >= 101] <- "Very Large"

data1415$class.size.end <- as.numeric(as.character(data1415$class.size.end))
data1415$class.size.end.ind <- NA
data1415$class.size.end.ind[data1415$class.size.end <= 25] <- "Small"
data1415$class.size.end.ind[data1415$class.size.end >= 26 & data1415$class.size.end <= 50] <- "Medium"
data1415$class.size.end.ind[data1415$class.size.end >= 51 & data1415$class.size.end <= 100] <- "Large"
data1415$class.size.end.ind[data1415$class.size.end >= 101] <- "Very Large"

data1415$class.size.start.ind <- as.factor(data1415$class.size.start.ind)
data1415$class.size.end.ind <- as.factor(data1415$class.size.end.ind)


### YEAR 2 ###
data1516$class.size.start <- as.numeric(as.character(data1516$class.size.start))
data1516$class.size.start.ind <- NA
data1516$class.size.start.ind[data1516$class.size.start <= 25] <- "Small"
data1516$class.size.start.ind[data1516$class.size.start >= 26 & data1516$class.size.start <= 50] <- "Medium"
data1516$class.size.start.ind[data1516$class.size.start >= 51 & data1516$class.size.start <= 100] <- "Large"
data1516$class.size.start.ind[data1516$class.size.start >= 101] <- "Very Large"

data1516$class.size.end <- as.numeric(as.character(data1516$class.size.end))
data1516$class.size.end.ind <- NA
data1516$class.size.end.ind[data1516$class.size.end <= 25] <- "Small"
data1516$class.size.end.ind[data1516$class.size.end >= 26 & data1516$class.size.end <= 50] <- "Medium"
data1516$class.size.end.ind[data1516$class.size.end >= 51 & data1516$class.size.end <= 100] <- "Large"
data1516$class.size.end.ind[data1516$class.size.end >= 101] <- "Very Large"

data1516$class.size.start.ind <- as.factor(data1516$class.size.start.ind)
data1516$class.size.end.ind <- as.factor(data1516$class.size.end.ind)


### YEAR 3 ###
data1617$class.size.start[data1617$instructor.last.name== "Roelofs"] <- 30
data1617$class.size.start <- as.numeric(as.character(data1617$class.size.start))
data1617$class.size.start.ind <- NA
data1617$class.size.start.ind[data1617$class.size.start <= 25] <- "Small"
data1617$class.size.start.ind[data1617$class.size.start >= 26 & data1617$class.size.start <= 50] <- "Medium"
data1617$class.size.start.ind[data1617$class.size.start >= 51 & data1617$class.size.start <= 100] <- "Large"
data1617$class.size.start.ind[data1617$class.size.start >= 101] <- "Very Large"

data1617$class.size.end[data1617$instructor.last.name== "Roelofs"] <- 26
data1617$class.size.end <- as.numeric(as.character(data1617$class.size.end))
data1617$class.size.end.ind <- NA
data1617$class.size.end.ind[data1617$class.size.end <= 25] <- "Small"
data1617$class.size.end.ind[data1617$class.size.end >= 26 & data1617$class.size.end <= 50] <- "Medium"
data1617$class.size.end.ind[data1617$class.size.end >= 51 & data1617$class.size.end <= 100] <- "Large"
data1617$class.size.end.ind[data1617$class.size.end >= 101] <- "Very Large"

data1617$class.size.start.ind <- as.factor(data1617$class.size.start.ind)
data1617$class.size.end.ind <- as.factor(data1617$class.size.end.ind)
```

### Previous Stat Courses

```{r}
### YEAR 1 ###
# 0 = No #
data1415$has.taken.stat.course <- NA
data1415$has.taken.stat.course[data1415$APstats==0 & data1415$APstats_post==0 & data1415$college_stats_pre == 0 & 
                                 data1415$college_stats_post == 0 & data1415$nonAP_HSstats == 0 & 
                                 data1415$nonAP_HSstats_post == 0] <- "No"
data1415$has.taken.stat.course[data1415$APstats==1 | data1415$APstats_post==1] <- "Yes"
data1415$has.taken.stat.course[data1415$college_stats_pre >= 1 | data1415$college_stats_post >= 1] <- "Yes"
data1415$has.taken.stat.course[data1415$nonAP_HSstats >= 1 | data1415$nonAP_HSstats_post >= 1] <- "Yes"
data1415$has.taken.stat.course <- as.factor(data1415$has.taken.stat.course)

data1415$prev.stat.course <- NA
data1415$prev.stat.course[data1415$has.taken.stat.course=="Yes"] <- "Yes (Not AP)"
data1415$prev.stat.course[data1415$APstats==1 | data1415$nonAP_HSstats_post==1] <- "Yes (AP)"
data1415$prev.stat.course[data1415$has.taken.stat.course=="No"] <- "No"
data1415$prev.stat.course <- as.factor(data1415$prev.stat.course)

### YEAR 2 ###
data1516$has.taken.stat.course <- NA
data1516$has.taken.stat.course[data1516$APstats==2 & data1516$college_stats_pre == 1 & data1516$nonAP_HSstats == 1] <- "No"
data1516$has.taken.stat.course[data1516$APstats==1] <- "Yes"
data1516$has.taken.stat.course[data1516$college_stats_pre >= 2] <- "Yes"
data1516$has.taken.stat.course[data1516$nonAP_HSstats >= 2] <- "Yes"
data1516$has.taken.stat.course <- as.factor(data1516$has.taken.stat.course)

data1516$prev.stat.course <- NA
data1516$prev.stat.course[data1516$has.taken.stat.course=="Yes"] <- "Yes (Not AP)"
data1516$prev.stat.course[data1516$APstats==1] <- "Yes (AP)"
data1516$prev.stat.course[data1516$has.taken.stat.course=="No"] <- "No"
data1516$prev.stat.course <- as.factor(data1516$prev.stat.course)

### YEAR 3 ###
data1617$has.taken.stat.course <- NA
data1617$has.taken.stat.course[data1617$recent.stat_pre==5 | data1617$recent.stat_post == 5] <- "No"
data1617$has.taken.stat.course[data1617$recent.stat_pre <= 4 | data1617$recent.stat_post <= 4] <- "Yes"
data1617$has.taken.stat.course <- as.factor(data1617$has.taken.stat.course)

data1617$prev.stat.course <- NA
data1617$prev.stat.course[data1617$recent.stat_pre == 2 | data1617$recent.stat_post == 2] <- "Yes (AP)"
data1617$prev.stat.course[data1617$recent.stat_pre != 2 | data1617$recent.stat_post != 2] <- "Yes (Not AP)"
data1617$prev.stat.course[data1617$recent.stat_pre == 5 | data1617$recent.stat_post == 5] <- "No"
data1617$prev.stat.course <- as.factor(data1617$prev.stat.course)
```

### Class Meet Weeks

```{r}
### YEAR 1 ###
data1415$class.meet.weeks.ind <- NA
for (i in 1:dim(data1415)[1]) {
  if (is.na(data1415$class.meet.weeks[i])==1) {data1415$class.meet.weeks.ind[i] <- NA}
  else if (data1415$class.meet.weeks[i]<=12) {data1415$class.meet.weeks.ind[i]<-"quarter"}
  else if (data1415$class.meet.weeks[i]>=13 & data1415$class.meet.weeks[i]<=19) {data1415$class.meet.weeks.ind[i]<-"semester"}
  else {data1415$class.meet.weeks.ind[i]<-"full year"}
}
data1415$class.meet.weeks.ind <- as.factor(data1415$class.meet.weeks.ind)


### YEAR 2 ###
data1516$class.meet.weeks.ind <- NA
for (i in 1:dim(data1516)[1]) {
  if (is.na(data1516$class.meet.weeks[i])==1) {data1516$class.meet.weeks.ind[i] <- NA}
  else if (data1516$class.meet.weeks[i]<=12) {data1516$class.meet.weeks.ind[i]<-"quarter"}
  else if (data1516$class.meet.weeks[i]>=13 & data1516$class.meet.weeks[i]<=19) {data1516$class.meet.weeks.ind[i]<-"semester"}
  else {data1516$class.meet.weeks.ind[i]<-"full year"}
}
data1516$class.meet.weeks.ind <- as.factor(data1516$class.meet.weeks.ind)


### YEAR 3 ###
data1617$class.meet.weeks.ind <- NA
for (i in 1:dim(data1617)[1]) {
  if (is.na(data1617$class.meet.weeks[i])==1) {data1617$class.meet.weeks.ind[i] <- NA}
  else if (data1617$class.meet.weeks[i]<=12) {data1617$class.meet.weeks.ind[i]<-"quarter"}
  else if (data1617$class.meet.weeks[i]>=13 & data1617$class.meet.weeks[i]<=19) {data1617$class.meet.weeks.ind[i]<-"semester"}
  else {data1617$class.meet.weeks.ind[i]<-"full year"}
}
data1617$class.meet.weeks.ind <- as.factor(data1617$class.meet.weeks.ind)
```

### Time of Day Variable

```{r}
### YEAR 1 ###

data1415$time.meet.original <- data1415$time.meet
data1415$time.meet <- NA
for (i in 1:dim(data1415)[1]) {
  if (is.na(data1415$time.meet.original[i])==1) {data1415$time.meet[i] <- NA}
  else if (data1415$time.meet.original[i]=="") {data1415$time.meet[i]<-NA}
  
  else if (data1415$time.meet.original[i]=="8:10am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="8:30am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="8am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9:05am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9:20am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9:25am  ") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9:30") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9:30am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9:35am") {data1415$time.meet[i]<-"8 am to 10 am"}
  else if (data1415$time.meet.original[i]=="9am") {data1415$time.meet[i]<-"8 am to 10 am"}
  
  else if (data1415$time.meet.original[i]=="10:30am") {data1415$time.meet[i]<-"10 am to 12 pm"}
  else if (data1415$time.meet.original[i]=="10:50 AM OR 12:15 PM TEAL") {data1415$time.meet[i]<-"10 am to 12 pm"}
  else if (data1415$time.meet.original[i]=="10:50am") {data1415$time.meet[i]<-"10 am to 12 pm"}
  else if (data1415$time.meet.original[i]=="10am") {data1415$time.meet[i]<-"10 am to 12 pm"}
  else if (data1415$time.meet.original[i]=="11:10") {data1415$time.meet[i]<-"10 am to 12 pm"}
  else if (data1415$time.meet.original[i]=="11am") {data1415$time.meet[i]<-"10 am to 12 pm"}
  
  else if (data1415$time.meet.original[i]=="1:15pm") {data1415$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1415$time.meet.original[i]=="1:30pm") {data1415$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1415$time.meet.original[i]=="12:15pm") {data1415$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1415$time.meet.original[i]=="12:30pm") {data1415$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1415$time.meet.original[i]=="12pm") {data1415$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1415$time.meet.original[i]=="1pm") {data1415$time.meet[i]<-"12 pm to 2 pm"}
  
  else if (data1415$time.meet.original[i]=="2:30pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="2pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="3:30pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="3pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="4pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="5:30pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="5pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1415$time.meet.original[i]=="6pm") {data1415$time.meet[i]<-"2 pm to 6 pm"}
  
  else if (data1415$time.meet.original[i]=="2 sections ") {data1415$time.meet[i]<-NA}
  else if (data1415$time.meet.original[i]=="online") {data1415$time.meet[i]<-NA}
  else if (data1415$time.meet.original[i]=="pm") {data1415$time.meet[i]<-NA}
  else if (data1415$time.meet.original[i]=="Rotated") {data1415$time.meet[i]<-NA}
  
  else {data1415$time.meet[i]<-NA}
}

data1415$time.meet <- as.factor(data1415$time.meet)


### YEAR 2 ###
data1516$time.meet.original <- data1516$time.meet
data1516$time.meet <- NA
for (i in 1:nrow(data1516)) {
  if (data1516$time.meet.original[i]=="") {data1516$time.meet[i] <- NA}
  
  else if (data1516$time.meet.original[i]=="7:10 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="7:20 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="7:50 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8-9:20 a.m.") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8:00 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8:00am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8:05 am - 9:50 am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8:10 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8:30 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="8am-9:20am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:00") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:00 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:00 am - 10:20 am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:05 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:10 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:15 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:20 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:25 - 10:40 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:25 am - 10:40 am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:25-10:40") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:30 - 10:50 am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:30 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9:30am-10:50am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="09:00 AM for M,W 10:00 AM for Th") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="9am Tuesdays and Thursdays, 10am Fridays") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="Lecture 8am, lab 10am") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="Sections 1-4   9:05 AM") {data1516$time.meet[i]<-"8 am to 10 am"}
  else if (data1516$time.meet.original[i]=="Lecture and lab 8am") {data1516$time.meet[i]<-"8 am to 10 am"}
  
  else if (data1516$time.meet.original[i]=="10:00 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10:05 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10:10") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10:10 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10:30 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10:50 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10:55 am - 12:15 pm") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="10am") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:00") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:00 - 12:15 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:00 a.m - 11:50 a.m") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:00 a.m.") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:00 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:00 am - 12 :20 pm") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:10 - 12:25") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:10am - 12:20 am") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:30 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:30 PM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:30-12:30") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="11:50 AM") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="from 11:00 am - 12:20 pm") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="Lecture 11am, lab 12:10pm") {data1516$time.meet[i]<-"10 am to 12 pm"}
  else if (data1516$time.meet.original[i]=="Mon and Wed 11:00-12:20, Fri 11:00-11:50") {data1516$time.meet[i]<-"10 am to 12 pm"}
  
  else if (data1516$time.meet.original[i]=="01:10PM - 03:35PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:00") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:00 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:00pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:10 - 2:30 pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:10 AM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:10 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:10 PM Tuesday and Thursday, 12:10 Friday") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:15 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:25pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:30 AM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="1:40 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:00") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:00 AM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:00 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:00 pm - 1:20 pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:00pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:10 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:15") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:15 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:15 pm - 1:45 pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:20 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:30 PM") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:30pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:45 - 2:00") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="12:45 pm - 2:00 pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="from 12:30 pm - 1:50 pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1516$time.meet.original[i]=="M, 12:10 pm; W, 10:50 am, Th, 12:10 pm, Fri, 12:55 pm") {data1516$time.meet[i]<-"12 pm to 2 pm"}
  
  else if (data1516$time.meet.original[i]=="2:00 - 3:20 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="2:00 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="2:00-3:15") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="2:10 - 2:00 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="2:10 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="2:10PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="2:40 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="Lecture 2:10pm, lab 12:10pm") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="Lecture and lab 2:10pm") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="Lecture: 2:10PM-3:00PM; Lab: 2:10PM-4:00PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="Mon and Wed 2:00-3:20, Thur 3:00-3:50") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="Mon and Wed 2:30pm; Thu 1pm") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:00") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:00 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:05 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:05 to 4:20") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:10 - 4:00pm") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:10 - 5:00 pm") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:10 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="03:45PM - 06:10PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="3:55 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="4:00 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="4:10 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="Mon and Wed 3:30-4:50, Thur 4:00-4:50") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="6:10 PM") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1516$time.meet.original[i]=="6:10pm") {data1516$time.meet[i]<-"2 pm to 6 pm"}
  
  else if (data1516$time.meet.original[i]=="M, 8:30 am; W, 9:40am; Th, 1:45 pm; Fri, 10:40 am") {data1516$time.meet[i]<-NA}
  else if (data1516$time.meet.original[i]=="Online") {data1516$time.meet[i]<-NA}
  else if (data1516$time.meet.original[i]=="times are not the same through the week") {data1516$time.meet[i]<-NA}
  else if (data1516$time.meet.original[i]=="Times varied from 8:15-3:10 on a rotation") {data1516$time.meet[i]<-NA}
  else if (data1516$time.meet.original[i]=="varied depending on day, some days 11 AM other days 2 PM") {data1516$time.meet[i]<-NA}
  
  else {data1516$time.meet[i]<-NA}
}

data1516$time.meet <- as.factor(data1516$time.meet)

### YEAR 3 ###
data1617$time.meet.original <- data1617$time.meet
data1617$time.meet <- NA
for (i in 1:nrow(data1617)) {
  if (is.na(data1617$time.meet.original[i])==1) {data1617$time.meet[i] <- NA}
  else if (data1617$time.meet.original[i]=="") {data1617$time.meet[i]<-NA}
  
  else if (data1617$time.meet.original[i]=="8:00") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="8:00 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="8:00am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="8:10-9:10am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="8:35") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:00 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:00am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:15-10:20 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:25") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:25 - 10:40") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:25 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:30 - 10:50") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:30 - 10:50 am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:30 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:30-11 a.m.") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:40 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:40am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9:45 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="9am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="Lecture 9am; Lab 10am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="MW 8 - 9.20am, F 8.30-9.20am") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="section 8 met at 8:00 AM") {data1617$time.meet[i]<-"8 am to 10 am"}
  else if (data1617$time.meet.original[i]=="Lecture 9:05 AM Mon and Wed/Hourly Lab 8:00 AM - noon by section)") {data1617$time.meet[i]<-"8 am to 10 am"}
  
  else if (data1617$time.meet.original[i]=="10:50AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:00 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:05 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:20 - 11:10 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:20-11:20") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:30 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:50 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10:50am") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="10AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="11:00") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="11:00 a.m") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="11:00 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="11:30 AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="11:40am") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="11AM") {data1617$time.meet[i]<-"10 am to 12 pm"}
  else if (data1617$time.meet.original[i]=="Lecture 11am; Lab 12:10pm") {data1617$time.meet[i]<-"10 am to 12 pm"}
  
  else if (data1617$time.meet.original[i]=="1-2:30pm") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:00 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:10") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:10 - 2:30 pm") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:10 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:15 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:25 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="1:50") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12 noon") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12:00 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12:00pm") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12:15 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12:30 PM") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12:30pm") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="12:50") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  else if (data1617$time.meet.original[i]=="Noon-1:20") {data1617$time.meet[i]<-"12 pm to 2 pm"}
  
  else if (data1617$time.meet.original[i]=="2:00 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="2:10") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="2:10 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="2:30") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="2:30 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="2PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="3:05 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="3:10pm") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="3:30 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="3:45 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="My class met M (2-2:50), W (2-2:50), F(2-3:15). ") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="4:00 PM") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="5:00 p.m.") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  else if (data1617$time.meet.original[i]=="Section 21 - 6:10") {data1617$time.meet[i]<-"2 pm to 6 pm"}
  
  else if (data1617$time.meet.original[i]=="MWF") {data1617$time.meet[i]<-NA}
  else if (data1617$time.meet.original[i]=="online") {data1617$time.meet[i]<-NA}
  
  else {data1617$time.meet[i]<-NA}
}
data1617$time.meet <- as.factor(data1617$time.meet)
```

### Incentive Classification Pre

```{r}
### YEAR 1 ###
data1415$incentive.pre <- NA
data1415$incentive.pre.description <- as.character(data1415$incentive.pre.description)
for (i in 1:dim(data1415)[1]) {
  if (data1415$incentive.pre.description[i]=="No") {data1415$incentive.pre[i]<-"Required"}
  else if (is.na(data1415$incentive.pre.description[i])==1) {data1415$incentive.pre[i] <- NA}
  else if (data1415$incentive.pre.description[i]=="10 points for completing") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="10 points for completing assessment") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="10 points for completing assignment") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="First homework") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="As a homework") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Credit (in their homework grade)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Graded Assignment.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Homework credit") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="homework credit for participating") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Homework grade") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Homework points were given for completing the survey.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="homework score") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="HW grade") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="10 points for participation") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="10 points for taking it") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Counted the pre test as a homework assignment.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Each student earned 10 points for completing the pre-course surveys.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Counted towards participation") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was a 10 point homework assignment.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was a homework score that was graded based on completion.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was a graded for completion.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was assigned as homework and treated as a completion grade.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was counted as one of their homework assignments") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was treated as a graded assignment.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Participation credit") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Participation was required for a small amount of course credit (marks).  (Allowing research use of their responses was completely optional.)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="points for completion (not performance)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="points toward homework grade - worked") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Received participation points for completing the concepts pre-test.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Students received 25 points for completing the concepts pre-test and attitudes pre-test combined (they were together in one survey). I counted this in the Projects/Assignments/Homework category of their grades. We had a total of 406 points in this categ") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="The pretest was required as HW") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="The students were informed that it would be part of their homework grade. The homework was worth 10% of the final grade.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Told students that not completing the pre-test would impact their grade.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Was a homework grade") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It counted towards their participation grade.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It counted as a homework grade -- 1 out of 13 which counted as  15% of their grade") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="1/2 percentage point") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="                                                          10 points for completion.    As to Question 17, I sent a welcome letter asking students to complete the test before class; however i'd say 1/4 of them completed it during the first week of classes.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="3 homework credits (can miss 3 exercises) if complete pre- and post-tests on-line.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="5 points towards homework grade") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Full credit on an assignment for completion of the concepts and attitudes pre-test") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="I gave them credit for taking the pre-test as in-class points, which contribute to 15% of their overall grade.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="1 pt quiz credit") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Counted as one in-class quiz grade (all-or-nothing)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It was a Quiz grade and I told them they had to do it.  They did:)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="Students received credit for one quiz by atincentive.postting the concepts pre-quiz.") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It counted as a quiz, where they were given full credit if atincentive.postted (assuming they also completed the attitudes pre-test)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="a few quiz points") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="It counted as a quiz, where they were given full credit if atincentive.postted (assuming they also completed the attitudes pre-test)") {data1415$incentive.pre[i]<-"Low stakes"}
  else if (data1415$incentive.pre.description[i]=="3 points extra credit") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="5 extra credit point for at least 85% participation") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="5 extra credit points") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="5 extra credit points (out of 650 total possible)") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="extra credit points for each student who participated - as long as at least 85% of the students participated and gave a sincere effort") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="5 extra points") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="extra credit") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="Extra credit") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="Extra credit equal to one homework") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="10 points of extra credit (out of a total 1000 points for the semester)") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="extra points toward online homework and quizzes") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="I offered extra credit for those you completed the pre test.") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="bonus points") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="Bonus/extra credit added to their course points") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="                                                                                                 5 points extra credit (700 point scale) -- note that I plan to reduce this to 5 points for both the concepts and attitudes tests combined in future semesters.") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="Extra 5 points on 1st test") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="Extra credit for first exam") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="extra credit on exam 1") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="                                                                                             Extra points added to final exam grade for completing both the pre- and post-tests. Additional extra credit on a sliding scale depending on extent of improvement.") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="I told them we could use the $100 award to buy something for everyone in the class (ice cream, etc.)") {data1415$incentive.pre[i]<-"High stakes"}
  else if (data1415$incentive.pre.description[i]=="Cash.") {data1415$incentive.pre[i]<-"High stakes"}
  else {data1415$incentive.pre[i]<-NA}
}

data1415$incentive.pre <- as.factor(data1415$incentive.pre)


### YEAR 2 ###
data1516$incentive.pre.description <- as.character(data1516$incentive.pre)
data1516$incentive.pre <- NA
for (i in 1:dim(data1516)[1]) {
  if (is.na(data1516$incentive.pre.description[i])==T) {data1516$incentive.pre[i] <- NA}
  else if (data1516$incentive.pre.description[i]=="") {data1516$incentive.pre[i]<-NA}
  else if (data1516$incentive.pre.description[i]=="1% of course grade for completing it.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="1% of their final grade was awarded for completing the test") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="1% of total grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="10 bonus points") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="10 points for taking") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="10 points for taking the test") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="10/10 for taking") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="5 points") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="                                                                           5% credit (reduction in weight given to exam scores) for students who completed both the pre- and post-test.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="A few points added to overall HW grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="A graded HW assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="a homework assignment (we call it a Box)") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Classwork credit") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Classwork credit for participating") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Completing the test was worth 1% of their final grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="completion was recorded as a homework assignment grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Counted as a homework grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Counted as a regular homework assignment, but graded on participation only") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Counted as an assignment.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Counted as first assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Counted as one assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Credit given as homework") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Credit was received for a homework assignment.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Grade toward homework score") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Graded as completion") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Graded as participation") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="homework assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Homework credit") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Homework grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Homework grade- all or nothing.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Homework grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Gave them some additional homework points for simply taking the pre-course test.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Gave them some additional homework score credit") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="HW grade,  100% for completion") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="hw points") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="I could not attend the first Friday of the semester, so I had the students take the pre-course test on this day.    Additionally, students were given points for completing the survey.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="I made it a simple 15 point HW assignment, very little overall.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It counted as a homework grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It replaced a HW grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="it was a 10 pt homework assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It was a homework assignment.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It was a part of Homework 0 graded based on completion.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It was a regular 10 point homework assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It was assigned as homework and graded as a completion grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It was worth hw points") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Replaced 1 homework grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="required assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="required assignment worth 10 points (equal to a homework assignment)") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="served as one homework grade- all or nothing") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="box 0 grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="                                                                                           It was part of a graded problem set - this and an initial problem set using the online tool.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Participation counted as 100% on a HW assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Participation grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Pass/Fail grade for 1 assignment") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="They got 10 points of credit (equal to one homework assignment)") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="The received 10 points (out of 800 course points).") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Would consider if student was borderline at semester's end") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="points towards homework grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="        Students received 25 points in the Projects/Assignments category of their grades for completion. (If you want more details about how that counts in their grades, let me know.)") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Students were awarded 10 points that counted toward their homework grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="This was part of their participation grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="1 quiz grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="One quiz grade.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="They get credit for a quiz test.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="They were offered points for a quiz upon completion (all or nothing).") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Quiz credit") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Quiz grade") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="Quiz score") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="count as a quiz") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="It counted as a 'quiz' score.") {data1516$incentive.pre[i]<-"Low stakes"}
  else if (data1516$incentive.pre.description[i]=="5 bonus points") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="5 extra credit points") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="                                                                                 5 extra credit points for a good faith effort when having 85% participation  (took in first lab class)") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="5 points extra credit (out of a semester total of 650 points)") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="5 points extra credit for 85% compliance by students in the class") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Bonus points on first 2 exams") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Counted as an extra assignment.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="extra credit") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra credit") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra Credit") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra credit ") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra credit for completion of both the pre-course and post-course tests") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra credit on homework portion of class") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra credit points for participation.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="extra credit points on an assignment") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Extra credit towards their homework grades. Credit was based on completion.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="                                                                     If they participated, I gave them 'extra credit' in the form of a few extra points in their graded homework grade.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="small bonus points") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="They received a few extra credit points toward their homework grade") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Told extra credit, but one point was placed on the exam average.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="                                                                                      Taking both the pre and post-courses tests meant I would drop the two lowest homework/quiz scores") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="The lowest homework score was replaced with a perfect score.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="The pre-test was the first homework assignment worth points.") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="                    Three points of extra credit added to their first homework assignment score, and their first exam score (so six points total, split-up over these two assessments).") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="5 extra points for final exam") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="extra credit on first midterm") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="                                                                                          I told them that if enough students completed it then we would get $100 to spend on ice cream") {data1516$incentive.pre[i]<-"High stakes"}
  else if (data1516$incentive.pre.description[i]=="Participation required for passing grade in the course") {data1516$incentive.pre[i]<-"Required"}
  else if (data1516$incentive.pre.description[i]=="                                                                                          Student could not pass the class without completing both the pre-course and post-course test.") {data1516$incentive.pre[i]<-"Required"}
  else if (data1516$incentive.pre.description[i]=="No") {data1516$incentive.pre[i]<-"Required"}
  else {data1516$incentive.pre[i]<-NA}
}

data1516$incentive.pre <- as.factor(data1516$incentive.pre)

### YEAR 3 ###
data1617$incentive.pre <- NA
data1617$incentive.pre.description <- as.character(data1617$incentive.pre.description)
for (i in 1:dim(data1617)[1]) {
  if (data1617$incentive.pre.description[i]=="No") {data1617$incentive.pre[i]<-"Required"}
  else if (is.na(data1617$incentive.pre.description[i])==1) {data1617$incentive.pre[i] <- NA}
  else if (data1617$incentive.pre.description[i]=="") {data1617$incentive.pre[i]<-NA}
  else if (data1617$incentive.pre.description[i]=="'required' homework score for completing") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="1.5% of course grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="1% of grade for taking it") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="10 points (out of 1000 total for the class)") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="10 points for completing") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="15 point homework assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="2.5% of final grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="2% of course grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="20% of a homework assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="5 points for homework grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="5 points on the homework grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="A (small) classroom grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="A few participation points.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="An assignment grade for participation") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Assignment grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Class credit") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Classwork grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Classwork Grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Completion credit") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Completion credit for in-class activity") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Completion grade for a homework assignment.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Counted as a homework grade.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Counted as one of 12 homework grades (lowest homework is dropped and homeworks account for 15% of the final grade)") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Counted as one of about 25 homework assignments (but only as a yes/no completion credit, not credit based on correctness)") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Credit for completion (homework category)") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Credit given as homework") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Earned credit for one worksheet.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="graded hw assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework assignment 'all or nothing' grade based on completion") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework assignment points") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework grade ") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework grade - Completion") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="HW grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="I just told them there were a few points based on 'sincere completion'") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It counted for a homework assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was a graded homework problem.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was a regular 10 point homework assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was counted as a completion assignemnt") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="it was graded as a completion score, i.e. 100% for completion, 0% for non-completion") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was part of an assignment.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was worth hw points") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Lab/Activity points (not extra credit) for students who completed pre-course test.  Lab/Activity points count for 20% of final course grade.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="part of an introductory homework assignment grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Partial HW credit.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Participation grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Participation points") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Participation points equal to participating in the practice problems during one regular class period") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="participation points were given.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="participation/homework grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="point") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Required, given same weight as participation in 1 in-class activity.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Students received 25 points in the Projects/Assignments category of their grades for completion of the pre-course test.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="The pre-test counted as a homework assignment. Students received credit for completion.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="The pre-test is worth 2.5% of their grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="They received a hw grade for completion") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="tied to a grade item") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Upon completion, they would get credit for 2.5% of their final grade.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="very small homework grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Worth 10 homework points") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Worth a daily assignment") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="10 point quiz- 10 for taking it; 0 if they did not take it") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="10 required points of their final grade (equal to a quiz grade)") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Quiz / Assignment Grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Quiz grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was part of a quiz") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was part of a quiz grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="one quiz grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="One quiz grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="5 points in a quiz grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="a full quiz grade") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="A participation point was given on an out-of-class quiz.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Points on a quiz") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="as a quiz") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Completion Grade as Quiz") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Completion Points on Quiz") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="counted as one of 12 course quizzes") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Counted as part of the first quiz grade.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="   Counted for a quiz grade for section 1. Counted as part of an 'introductory' assignment for online section. For both sections, the pretest was worth 5 points out of 300 total course points, with all 5 points given for an attempt.") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="It was their first quiz grade (complete or not complete, not for number of right/wrong).") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="Worth one 100% grade in the 'Concept Checks and Quizzes' category (for completion)") {data1617$incentive.pre[i]<-"Low stakes"}
  else if (data1617$incentive.pre.description[i]=="\x8a\x97\xa2\tif at least 85% of the class completes, with a good faith effort, everyone who takes it will receive 5 extra credit points - grade won\x8a\x97\xc8t immediately appear in Angel Gradebook \x8a\x97\x96 part of a NSF Study") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="1% extra credit for the course if they completed both assessments (Pre & Post)") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="10 bonus points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="                                                                               10 bonus points in the Written Assignments category of their grade (245 points total, Written Assignments category had a weight of 10% in overall grade).") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="2 extra credit points to be put towards homework grade.") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="25 extra credit points (added to 400 possible points earned on hw and exams.") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="3 points extra credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="5 extra credit points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="5 extra credit points (out of a semester total of 650)") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="5 points (out of 1000 for the whole course)") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="a few points extra credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Additional points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Bonus points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="bonus score of 4% points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Both sections 10 bonus points added to homework score") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Drop the lowest quiz grade if they completed both pre- and post-tests") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Dropped lowest HW grade") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="extra credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Extra credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Extra Credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Extra credit for course (5 points).  Total points for class was roughly 650.") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Extra Credit on the Homework") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="extra credit points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Extra credit: one general homework score") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Extra creidt") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Free 10 points on HW") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework Extra Credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Homework grade (perfect score for one assignment) for participation") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="I gave the students some 'extra credit'' points which were optional") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="I gave them a few points toward their total class points.") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Nominal Extra Credit") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Students could receive extra credit points") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="2 points on Exam 1") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="2.5 bonus points on the first and second exams.") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Bonus Points on first exam") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="I'm raffling 2 $50 Amazon gift cards to any students who completed both pre- and post-test.") {data1617$incentive.pre[i]<-"High stakes"}
  else if (data1617$incentive.pre.description[i]=="Pre-test was required for a passing grade in the course.") {data1617$incentive.pre[i]<-"Required"}
  else if (data1617$incentive.pre.description[i]=="Do it and no exceptions!!") {data1617$incentive.pre[i]<-"Required"}
  else {data1617$incentive.pre[i]<-NA}
}
data1617$incentive.pre <- as.factor(data1617$incentive.pre)
```

### Incentive Classification Post

```{r}
### YEAR 1 ###
data1415$incentive.post <- NA
data1415$incentive.post.description <- as.character(data1415$incentive.post.description)
for (i in 1:dim(data1415)[1]) {
  if (data1415$incentive.post.description[i]=="No") {data1415$incentive.post[i]<-"Required"}
  else if (is.na(data1415$incentive.post.description[i])==1) {data1415$incentive.post[i] <- NA}
  else if (data1415$incentive.post.description[i]=="10 points for completing assessment") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="10 points for completing assignment") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="10 points for participation") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="10 points for taking") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="1/2 percentage point") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="5 points") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="5 points towards homework grade") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Assigned as homework and graded as a completion grade.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="homework points") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Homework points were given for completing the survey.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="homework score") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="HW grade") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="HW Grade") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="HW grade based on accuracy") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Participation credit") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Participation points") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Participation was required for a small amount of course credit (marks).  (Allowing research use of their responses was completely optional.)") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Received participation points for completing the concepts post-test.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="It went into their homework grade.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Last homework") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Counted the post test as a homework assignment.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Full credit on an assignment for completion of the concepts and attitudes post-test") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Homework grade") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="I gave them credit for taking the pre-test as in-class points, which contribute to 15% of their overall grade.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="It counted as a homework grade -- 1 out of 13 which counted as  15% of their grade") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="It counted toward their participation-based homework grade.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="It was a graded for completion.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="It was assigned as homework and treated as a completion grade.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Same as above (part of homework grade).") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Students received 25 points for completing the concepts post-test and attitudes post-test combined (they were together in one survey). I counted this in the 'Projects/Assignments/Homework' category of their grades. We had a total of 406 points in this cat") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="The concepts and the attitude test were combined this semester as one test.  10 points for the combined test.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Told students that not completing the pre-test would impact their grade.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="same") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Same as above.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="see above.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="1 point quiz credit") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="a few quiz points") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="It counted as a quiz") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Credit for last quiz") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Participation counted as a quiz grade") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Counted as one in-class quiz grade (all-or-nothing)") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="Same as above: I gave them quiz points for completing the pre-test.") {data1415$incentive.post[i]<-"Low stakes"}
  else if (data1415$incentive.post.description[i]=="15 points of extra credit (out of a total 1000 points for the semester)") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="3 points extra credit") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="5 extra credit point for at least 85% participation where a genuine effort was made") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="5 extra credit points") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="5 extra credit points (out of 650 possible).") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="5 extra credit points for each student who participated - as long as at least 85% of the students participated and gave a sincere effort") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="5 points extra credit (see earlier response for details)") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Bonus/extra credit added to their course points") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="extra credit") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Extra credit") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Extra Credit") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Extra credit equal to one HW") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="I gave extra credit") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="extra points toward online homework and quizzes") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="                                                        I told students they could get extra credit and also reminded them that by responding, they'd be helping out Stat Ed colleagues with their research to better understand how students learn statistics.") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="It is given together with the concepts pre-test. Students can get 1% bonus points.") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="It was counted as extra-credit.") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Extra credit on final exam") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="extra credit on finals") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Extra points on final exam") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="                                                                                             Extra points added to final exam grade for completing both the pre- and post-tests. Additional extra credit on a sliding scale depending on extent of improvement.") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="The test was the final for the class.") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="cash") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="I told them we could use the $100 award to buy something for everyone in the class (ice cream, etc.)") {data1415$incentive.post[i]<-"High stakes"}
  else if (data1415$incentive.post.description[i]=="Out of class") {data1415$incentive.post[i]<-NA}
  else {data1415$incentive.post[i]<-NA}
}

data1415$incentive.post <- as.factor(data1415$incentive.post)


### YEAR 2 ###
data1516$incentive.post.description <- as.character(data1516$incentive.post)
data1516$incentive.post <- NA
for (i in 1:dim(data1516)[1]) {
  if (is.na(data1516$incentive.post.description[i])==1) {data1516$incentive.post[i] <- NA}
  else if (data1516$incentive.post.description[i]=="") {data1516$incentive.post[i]<-NA}
  else if (data1516$incentive.post.description[i]=="1% of course grade for completing it.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="1% of total grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="10 point homework assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="10 points for taking") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="10 points for taking the test") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="10/10 for taking") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="5 points") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="5% credit (reduction in weight given to exam scores) for students who completed both the pre- and post-test.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="a homework assignment (we call it a Quiz)") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Again, a homework assignment graded based on completion.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Again, gave them additional homework score credit") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Again, gave them some additional homework points for simply taking the test, but also allowed that even a few more points could be had for higher scores (provided I received them back in time, which I did thanks to Ms. Nederhoff).") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="An additional 10 points (equal to one homework assignment)") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Another 15 point homework assignment.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Completing the test was worth 1% of their final grade.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="completion was recorded as a homework assignment grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Counted as a regular homework assignment, but graded on participation only") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Counted as an assignment.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Counted as an extra assignment.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Counted as one assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Credit as homework") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Homework Credit") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Homework grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Homework grade- all or nothing.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Homework grade.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="HW grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="HW Grade, 100% for completion") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Participation counted as 100% on a HW assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Participation grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Participation required for passing grade in the course") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="pass/fail grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Pass/Fail grade for 1 assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="points towards homework grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Graded as completion") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Graded for participation") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Graded HW assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="homework assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="I said that it would be a good review for the final exam.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="It  was assigned as an 'exercise'") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="It was worth hw points") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="same as pre-test") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="required assignment") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Required homework grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Same as with the pre-test, it was counted as a homework assignment.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="served as one homework grade as well-- all or nothing") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Similar to the pre-test, but a homework grade was offered, rather than a quiz grade.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="                                                       Students received 25 points in the Projects/Assignments category of their grades for completion. (If you want more details about how that counts in their grades, let me know.)") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="The received 10 points (out of 800 course points).") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="This was part of their participation grade.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="                                    Unfortunately, I planned poorly and could not give the post-course test in class.  I did offer a large incentive for doing the post-course test -- Participation percentage for a worksheet grade.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="1 quiz grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="counted as 'quiz' score") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="quiz") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Quiz 0 grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Quiz credit") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="quiz grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Quiz Grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Grade toward homework score") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="One quiz grade") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="It counted as a quiz grade.") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="Credit for last quiz") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="count as a quiz") {data1516$incentive.post[i]<-"Low stakes"}
  else if (data1516$incentive.post.description[i]=="10 bonus points") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="10 extra credit points for a good faith effort when having 85% participation  (took in first lab class)") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="5 extra credit points") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="5 extra credit points  PLUS grading curve adjustment if 75% or more did both surveys") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="5 points extra credit for 85% compliance by students in the class") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="5 points of extra credit (out of a total of 650 points)") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Dropped lowest HW/Quiz grade") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="extra credit") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra credit") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra Credit") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra credit for participating") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra credit on homework portion of class") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra credit points for participation.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra credit quiz point") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Extra credit towards their homework grades. Credit was based on completion.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="I dropped the two lowest homework/quiz grades if a student completed both the pre- and post-course tests") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="If they participated, I gave them 'extra credit' in the form of a few extra points in their graded homework grade.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="They received a few extra credit points toward their homework grade") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Same as for the pre-course test") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="replaced 1 homework grade") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="small bonus points") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="                                                   Students could have taken test during last week of classes as well..... Students were told that if they took the post-test that they would receive one point on the Other category.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Students were awarded 20 points that counted toward their homework grade.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="The lowest quiz score was replaced with a perfect score.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="The post-test was the last homework assignment worth points, and I also offered extra credit for completing it.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="1% of their final grade was awarded for completing the test") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="3 points extra credit on the final exam") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="5 extra points for final exam") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Bonus points on final exam.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="extra credit on final exam") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Five bonus points added to their final exam (5% bonus on an exam worth 25% of their final grade)") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="I added 5 points to their score on my 150 point cumulative final exam") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="                                                                There was a voluntary extra credit problem set given during the last week of lecture.  Students who took the problem set earned extra credit towards their final exam.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Three points added to their final exam score.") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="final exam") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="I told them that if enough students completed it then we would get $100 to spend on ice cream") {data1516$incentive.post[i]<-"High stakes"}
  else if (data1516$incentive.post.description[i]=="Student could not pass the class without completing both the pre-course and post-course test.") {data1516$incentive.post[i]<-"Required"}
  else if (data1516$incentive.post.description[i]=="No") {data1516$incentive.post[i]<-"Required"}
  else {data1516$incentive.post[i]<-NA}
}

data1516$incentive.post <- as.factor(data1516$incentive.post)


### YEAR 3 ###
### Incentive Classification Post ###
data1617$incentive.post <- NA
data1617$incentive.post.description <- as.character(data1617$incentive.post.description)
for (i in 1:dim(data1617)[1]) {
  if (data1617$incentive.post.description[i]=="No") {data1617$incentive.post[i]<-"Required"}
  else if (is.na(data1617$incentive.post.description[i])==1) {data1617$incentive.post[i] <- NA}
  else if (data1617$incentive.post.description[i]=="") {data1617$incentive.post[i]<-NA}
  else if (data1617$incentive.post.description[i]=="1.5% of course grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="1% of grade for taking it") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="10 points (out of 1000 total for the class)") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="10 points for completing") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="10 points for taking attitude portion.  The concept questions were part of the final, so they were graded. (they made up 20% of the final)") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="10 points of homework") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="2.5% of final grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="2.5% of their grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="2% of course grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="20% of a homework assignment") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="5 points for homework grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="5 points on the homework grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="A few participation points.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Additional points") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Class credit") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Classwork grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Classwork Grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Completion credit for in-class activity  Suggested review for the Final Exam") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Counted as one of about 25 homework assignments (but only as a yes/no completion credit, not credit based on correctness).  Also, Question 26 is a bit inflexible. I emailed out the assignment on April 6th, with the last class day on April 18, and the final exam on April 20th. The due date for the post-course test was the final exam day, April 20th. Feel free to recategorize my answer on Question 26 above if needed.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Credit for completion (homework category)") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Credit given as homework") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Gave points for 'sincere completion'") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="graded as a test grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Homework assignment 'all or nothing' grade based on completion") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="homework assignment grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Homework grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Homework grade for participation") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="hw grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="HW grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="                                                                                                                                    HW grade. I didn't know that I could have given the post test in two parts. I don't see my class often after the AP exam for various reasons like state testing, senior meetings, etc. I would have liked to give it for the final but we have senior privilege so some students were exempt.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It counted as a lab assignment. Students received full credit for completion.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It counted for a daily assignment") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It was a graded homework problem.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It was also counted as a completion assignment") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="it was graded as a completion score, i.e. 100% for completion, 0% for non-completion") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It was part of an assignment.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It was worth hw points") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Needed to complete both pre and post test to earn the 25 points.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Partial HW credit") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Participation grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Participation points equal to participating in the practice problems during one regular class period") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="participation points were given for completion and additional participation points were given based on performance.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="participation/homework grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="point") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="very small homework grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Worth a daily assignment") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Required, given same weight as participation in 1 in-class activity.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Students earned the same number of points as  for the pre-course test.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Students received 25 points in the Projects/Assignments category of their grades for completion of the post-course test.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="The post-test counted as a homework assignment. Students received credit for completion.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="They received 2.5% credit for completing it of their final grade.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="tied to a grade item and worth significant points") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="As above") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="15 points 'test' grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="5 points in a quiz grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="as a quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Assigned Quizz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Completion Grade as Quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Completion grade on a quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Completion Points on Quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Concept scores counted as a quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Counted as one of 13 quiz grades (lowest quiz is dropped and quizzes account for 10% of the final grade)") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Counted as one quiz grade.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Counted as part of the last quiz grade.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="full quiz grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="I counted this as a quiz grade for completion") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It was a 20 point quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="It was part of a quiz grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Quiz / Assignment Grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Quiz drop") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Quiz grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Quiz Grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Quiz grade - completion") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Worth one 100% quiz grade (for completion)") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="part of a quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Grade on post-course test counts as quiz grade.  (Quizzes worth 20% of final course grade.)") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="One quiz grade") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Participation point on out-of-class quiz.") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="Points on a quiz") {data1617$incentive.post[i]<-"Low stakes"}
  else if (data1617$incentive.post.description[i]=="'extra credit' points which were optional") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="\x8a\x97\xa2\tif at least 85% of the class completes, with a good faith effort, everyone who takes it will receive 5 extra credit points - grade won\x8a\x97\xc8t immediately appear in Angel Gradebook \x8a\x97\x96 part of a NSF Study") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="10 bonus points") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="10 more bonus points in the Written Assignments category of their grade (245 points total, Written Assignments category had a weight of 10% in overall grade).") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="2 extra credit points to be put towards homework grade.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 extra credit points") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 extra credit points (out of a semester total of 650 points)") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 points (out of 1000 for the whole course)") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 points extra credit") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Bonus Points") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Bonus Points on Exam") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Both sections 10 additonal bonus points added to homework score") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Drop lowest hw grade") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Drop the lowest quiz grade if they completed both pre- and post-tests") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Dropped lowest HW/Quiz grade") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Dropped lowest quiz score  - one grade out of 14.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Dropped quiz grade") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="extra credit") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Extra credit") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Extra Credit") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Extra credit for course (5 points).  Total points for class was roughly 650.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Extra Credit on the Homework") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Few points extra credit and two cookies.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Homework Extra Credit") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Nominal Extra Credit") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="They could earn extra credit points comparable to a homework assignment.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="As the pre-test") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 additional points on the final exam") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 points on final exam for participation") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="a few points extra credit for attitudes post-test, concepts post-test was given with the final exam") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Extra credit for final exam") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Extra Test Grade") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Small amount of extra credit on the final exam (approx 3%).") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Yes, the score on the post-course test would be used to assign extra credit points to their final exam score.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="2 points final exam") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="40% of final exam score") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="5 pts on final") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Assessment questions on final exam, attitudes portion 5 bonus points on final exam.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Concepts part was included as part of the final exam.  Attitudes part with bonus credit: 1% point") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Concepts were part of final exam.  Attitudes were worksheet credit.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="counted as half of their final exam") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="In class Full Concepts a subset of questions will be graded and used in the final exam grade. Students do not know which questions will be graded.   The out of class attitudes portion counted as a completion quiz grade.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="It counts for 20 points of their final exam grade. This time, they get points for correctness, on a sliding scale/curve where 75% correct corresponds to 100% of the points.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="It was a large portion of the final grade (number of right/wrong mattered).") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="My students have already taken the AP test. I wasn't going to give them an end of the course exam.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="I'm raffling 2 $50 Amazon gift cards to any students who completed both pre- and post-test.") {data1617$incentive.post[i]<-"High stakes"}
  else if (data1617$incentive.post.description[i]=="Post-test was required for a passing grade in the course.") {data1617$incentive.post[i]<-"Required"}
  else {data1617$incentive.post[i]<-NA}
}
data1617$incentive.post <- as.factor(data1617$incentive.post)
```

### Math Prereq

```{r}
### YEAR 1 ###
data1415$math.prereq.original <- as.character(data1415$math.prereq)
data1415$math.prereq <- NA
data1415$math.prereq[data1415$math.prereq.original=="College Algebra"] <- "College Algebra"
data1415$math.prereq[data1415$math.prereq.original=="High School Algebra"] <- "High School Algebra"
data1415$math.prereq[data1415$math.prereq.original=="Calculus"] <- "Calculus"
data1415$math.prereq[data1415$math.prereq.original==""] <- NA
data1415$math.prereq[data1415$math.prereq.original=="either calculus or some prior stat experience"] <- "Calculus"
data1415$math.prereq[data1415$math.prereq.original=="Finite math"] <- "Other"
data1415$math.prereq[data1415$math.prereq.original=="None"] <- "None"
data1415$math.prereq[data1415$math.prereq.original=="placement test"] <- "Other"

## Manual changes to certain instructors ##
data1415$math.prereq <- as.character(data1415$math.prereq)
data1415$math.prereq[data1415$InstructorName_Section_Semester=="MackSection1_spring"] <- "Other"
data1415$math.prereq <- as.factor(data1415$math.prereq)


### YEAR 2 ###
### Creating Math Prereq Coded Variable ###
data1516$math.prereq.original <- as.character(data1516$math.prereq)
data1516$math.prereq <- NA
data1516$math.prereq[data1516$math.prereq.original==""] <- NA
data1516$math.prereq[data1516$math.prereq.original=="College Algebra"] <- "College Algebra"
data1516$math.prereq[data1516$math.prereq.original=="High School Algebra"] <- "High School Algebra"
data1516$math.prereq[data1516$math.prereq.original=="None"] <- "None"
data1516$math.prereq[data1516$math.prereq.original=="Calculus"] <- "Calculus"
data1516$math.prereq[data1516$math.prereq.original=="100 level math course"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="45 or higher on Compass pre-algebra test or 16 or higher on Compass algebra test (I think these are correct)"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="Algebra II"] <- "High School Algebra"
data1516$math.prereq[data1516$math.prereq.original=="An ACT mathematics score of 22 or higher or satisfactory completion of a pre-quantitative college-level mathematics course"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="an ACT mathematics score of 22 or higher or satisfactory completion of Mathematics 100 or 118, self- discipline, and a serious work ethic"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="any 100-level math course or good score on Math portion of SAT or ACT, or a 3.5 on the MPLEX exam"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="Any College Level Math Course"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="Appropriate placement score according to the department"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="College algebra"] <- "College Algebra"
data1516$math.prereq[data1516$math.prereq.original=="Complete pre-calculus or place into calculus 1"] <- "Precalculus"
data1516$math.prereq[data1516$math.prereq.original=="Completion of developmental requirements (essentially equivalent to high school algebra, but students must also have completed developmental English & Reading)"] <- "High School Algebra"
data1516$math.prereq[data1516$math.prereq.original=="Finite Mathematics"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="Foundations of Math (jr. high, prealgebra material)"] <- "None"
data1516$math.prereq[data1516$math.prereq.original=="high school Algebra II"] <- "High School Algebra"
data1516$math.prereq[data1516$math.prereq.original=="Intermediate Algebra (or by placement test)"] <- "High School Algebra"
data1516$math.prereq[data1516$math.prereq.original=="Intermediate Algebra for Statistics "] <- "High School Algebra"
data1516$math.prereq[data1516$math.prereq.original=="One of the following: college finite or college calculus"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="PreCalculus"] <- "Precalculus"
data1516$math.prereq[data1516$math.prereq.original=="q proficient (which means passed our quantitative reasoning assessment or took a 100 level QR course)"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="Quantitative Reasoning course"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="section 1 none, section 2 pre-calculus"] <- "Other"
data1516$math.prereq[data1516$math.prereq.original=="Sufficient standardized test scores"] <- "Other"

## Manual changes to certain instructors ##
data1516$math.prereq[data1415$InstructorName_Section_Semester=="LintonSection1_fall"] <- "Precalculus"
data1516$math.prereq[data1415$InstructorName_Section_Semester=="LintonSection2_fall"] <- "Precalculus"
data1516$math.prereq[data1516$InstructorName_Section_Semester=="LintonSection1_spring"] <- "None"
data1516$math.prereq[data1516$InstructorName_Section_Semester=="LintonSection2_spring"] <- "Precalculus"
data1516$math.prereq <- as.factor(data1516$math.prereq)


### YEAR 3 ###
## We are going to handle differently because of math.prereq.other --> going to coalesce ##
data1617$math.prereq.original <- data1617$math.prereq
data1617$math.prereq.original[data1617$math.prereq.original == "" | data1617$math.prereq.original == "Other"] <- NA

data1617$math.prereq <- as.character(data1617$math.prereq)
data1617$math.prereq[data1617$math.prereq.other==""] <- NA
data1617$math.prereq[data1617$math.prereq.other=="100 Level Math or Math Placement Test"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="ACT Math score of 19 or higher"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="Algebra 2"] <- "High School Algebra"
data1617$math.prereq[data1617$math.prereq.other=="Algebra 2 (high school)"] <- "High School Algebra"
data1617$math.prereq[data1617$math.prereq.other=="C or better in 100 level college math course, 540 Math SAT, 23 ACT, or 3.5 on our math placement exam"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="Calculus"] <- "Calculus"
data1617$math.prereq[data1617$math.prereq.other=="College Algebra"] <- "College Algebra"
data1617$math.prereq[data1617$math.prereq.other=="College Algebra and Trig"] <- "College Algebra"
data1617$math.prereq[data1617$math.prereq.other=="College algebra for sections 2&3. Algebra I for section1."] <- "College Algebra"
data1617$math.prereq[data1617$math.prereq.other=="Completed a 100 level math course"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="Core 3"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="Foundations of Quantitative Reasoning or Beginning Algebra"] <- "High School Algebra"
data1617$math.prereq[data1617$math.prereq.other=="h.s. algebra OR Intermediate Algebra OR placement"] <- "High School Algebra"
data1617$math.prereq[data1617$math.prereq.other=="If they don't have an ACT score of at least 22, they are required to take a remedial mathematics course first"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="Intermediate Algebra Math-1010"] <- "High School Algebra"
data1617$math.prereq[data1617$math.prereq.other=="MATH ACT above 22 or College Algebra"] <- "College Algebra"
data1617$math.prereq[data1617$math.prereq.other=="Math ACT of 22"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="non-algebra developmental math"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="passing a M 100 level class or scoring high enough on the ACT/SAT"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="Placement at the calc 1 level (precalculus knowledge assumed)"] <- "Precalculus"
data1617$math.prereq[data1617$math.prereq.other=="Precalculus"] <- "Precalculus"
data1617$math.prereq[data1617$math.prereq.other=="qualifying ACT score (18 or higher) or STAT 100"] <- "Other"
data1617$math.prereq[data1617$math.prereq.other=="three years of HS math, including two years of algebra"] <- "High School Algebra"
data1617$math.prereq[data1617$math.prereq.other=="Students who scored less than a certain amount on ACT had to take remedial math courses"] <- "Other"

## Now we can coalesce math.prereq and math.prereq.original ##
data1617$math.prereq <- coalesce(data1617$math.prereq.original, data1617$math.prereq)
data1617$math.prereq[is.na(data1617$math.prereq) == T] <- NA

## Manual changes to certain instructors ##
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Pierce_Section1_Condensed"] <- "Calculus"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Pierce_Section2_Condensed"] <- "College Algebra"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Timchenko_Section1_Fall"] <- "High School Algebra"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Timchenko_Section2_Fall"] <- "College Algebra"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Timchenko_Section3_Fall"] <- "College Algebra"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Robbert_Section1_Spring"] <- "High School Algebra"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Robbert_Section2_Spring"] <- "High School Algebra"
data1617$math.prereq[data1617$InstructorName_Section_Semester=="Alberts_Section1_Fall"] <- "Precalculus"

data1617$math.prereq <- as.factor(data1617$math.prereq)
```

### More Courses

```{r}
### YEAR 1 ###
data1415$morecourses = (data1415$Graduate_Applied_Stats !="0" & data1415$Graduate_Applied_Stats !="" & data1415$Graduate_Applied_Stats != "None" & data1415$Graduate_Theoretical_Stats !="None" & data1415$Graduate_Applied_Stats !=0 & data1415$Graduate_Applied_Stats != "") 
data1415$morecourses <- as.factor(data1415$morecourses)

### YEAR 2 ###
data1516$morecourses = (data1516$advanced.stats.degree != "No" & data1516$advanced.stats.degree != "")
data1516$morecourses <- as.factor(data1516$morecourses)

### YEAR 3 ###
data1617$morecourses = (data1617$advanced.stats.degree != "No" & data1617$advanced.stats.degree != "")
data1617$morecourses <- as.factor(data1617$morecourses)
```

### Special Cases Of Textbook Classification (DO NOT MOVE)

```{r}
### YEAR 1 - NONE ###
### YEAR 2 ###
data1516$textbook.classification[data1516$InstructorName_Section_Semester=="LintonSection2_spring"] <- "ISCAM"

### YEAR 3 ###
data1617$textbook.classification <- as.character(data1617$textbook.classification)
data1617$textbook.classification[data1617$textbook.classification=="own" & data1617$institution=="Montana State University"] <- "otherSBI"
data1617$textbook.classification <- factor(data1617$textbook.classification, levels = c("ISCAM","ISI", "ISIfirst", "otherSBI","notSBI","notSBI2","own"))
data1617$textbook.classification[data1617$InstructorName_Section_Semester=="Henle_Section1_Fall"] <- "ISI"
data1617$textbook.classification[data1617$InstructorName_Section_Semester=="Henle_Section2_Fall"] <- "ISI"
```

### Student Type

```{r}
### YEAR 1 - NO DATA ###
data1415$student.type <- NA

### YEAR 2 ###
data1516$student.type.original <- as.character(data1516$student.type)
data1516$student.type <- as.character(data1516$student.type)
data1516$student.type[data1516$student.type.original=="                      First-year students/sophomores wanting to\xcadevelop background necessary for their intended specialization"] <- "First-year students/sophomores wanting to develop background necessary for their intended specialization"
data1516$student.type[data1516$student.type.original=="                         First-year students/sophomores wanting to develop background necessary for their intended specialization"] <- "First-year students/sophomores wanting to develop background necessary for their intended specialization"
data1516$student.type[data1516$student.type.original=="                                                 First-year students/sophomores wanting to meet a 'general education' requirement"] <- "First-year students/sophomores wanting to meet a 'general education' requirement"
data1516$student.type[data1516$student.type.original=="                                                    Upper-level non-majors taking the course as a 'general education' requirement"] <- "Upper-level non-majors taking the course as a 'general education' requirement"
data1516$student.type <- as.factor(data1516$student.type)

levels(data1516$student.type) <-c(NA, "LowerReq", "LowerGE", "LowerReq", "UpperReq", "UpperGE")

### YEAR 3 ###
data1617$student.type <- as.character(data1617$student.type)
data1617$student.type[data1617$student.type=="High school"] <- "High School"
data1617$student.type <- as.factor(data1617$student.type)
levels(data1617$student.type) <-c(NA, "LowerGE", "LowerReq", "HS", "UpperReq", "UpperGE")
```

### First Generation

```{r}
### YEAR 1 - NO DATA ###
data1415$firstgen <- NA

### YEAR 2 - NO DATA ###
data1516$firstgen[is.na(data1516$firstgen) == T] <- NA
data1516$firstgen[data1516$firstgen == 1] <- "Yes"
data1516$firstgen[data1516$firstgen == 2] <- "No"
data1516$firstgen[data1516$firstgen == 3] <- NA
data1516$firstgen <- as.factor(data1516$firstgen)

### YEAR 3 ###
data1617$firstgen = comparisons(data1617$first_generation, data1617$first.gen_pre, .1)
data1617$firstgen[is.na(data1617$firstgen) == T] <- NA
data1617$firstgen[data1617$firstgen == 1] <- "Yes"
data1617$firstgen[data1617$firstgen == 2] <- "No"
data1617$firstgen[data1617$firstgen == 3] <- NA
data1617$firstgen <- as.factor(data1617$firstgen)
```

### Instructor Name

```{r}
### YEAR 1 - NO DATA ###
data1415$instructor.name <- NA

### YEAR 2 ###
data1516$instructor.name <- paste(data1516$instructor.first.name,data1516$instructor.last.name)

### YEAR 3 ###
data1617$instructor.name <- paste(data1617$instructor.first.name,data1617$instructor.last.name)
```

### Fixing section variable for later

```{r}
### YEAR 1 ###
# Can't combine lastname with section and semester because the variable section has the wrong section numbers #
# for each instructor. Will have to extract the correct section numbers from InstructorName_Section_Semester #

data1415$InstructorName_Section_Semester <- as.character(data1415$InstructorName_Section_Semester)

# Have to split InstructorName_Section_Semester on '_' and then extract the left element #
# Then extract the section number from the left element - section number is the last element #
data1415$section <- str_sub(sapply(str_split(data1415$InstructorName_Section_Semester, "_"), `[`, 1),
                            nchar(sapply(str_split(data1415$InstructorName_Section_Semester, "_"), `[`, 1)), 
                            nchar(sapply(str_split(data1415$InstructorName_Section_Semester, "_"), `[`, 1)))

### YEAR 2 - correct format ###
### YEAR 3 - correct format ###
```

### Gender

```{r}
### YEAR 1 ###
data1415$gender <- comparisons(data1415$gender_pre, data1415$gender_post, .1)
data1415$gender <- as.character(data1415$gender)
data1415$gender[data1415$gender == "1"] <- "Female"
data1415$gender[data1415$gender == "2"] <- "Male"
data1415$gender <- as.factor(data1415$gender)

### YEAR 2 ###
data1516$gender <- comparisons(data1516$gender_pre, data1516$gender_post, .1)
data1516$gender <- as.character(data1516$gender)
data1516$gender[data1516$gender == "1"] <- "Female"
data1516$gender[data1516$gender == "2"] <- "Male"
data1516$gender <- as.factor(data1516$gender)

### YEAR 3 ###
data1617$gender <- comparisons(data1617$gender_pre, data1617$gender_post, .1)
data1617$gender <- as.character(data1617$gender)
data1617$gender[data1617$gender == "1"] <- "Female"
data1617$gender[data1617$gender == "2"] <- "Male"
data1617$gender <- as.factor(data1617$gender)
```

### Age

```{r}
### YEAR 1 ###
data1415$age <- comparisons(data1415$age_pre, data1415$age_post, 1)

### YEAR 2 - note theres is no age_post so using pre ###
data1516$age <- data1516$age_pre

### YEAR 3 ###
data1617$age <- comparisons(data1617$age_pre, data1617$age_post, 1)
```

### Why Take / Is Major Course

```{r}
### YEAR 1 ###
### Makes why_take_pre for 14-15 ###
data1415$why_take_pre <- NA
data1415$why_take_pre[data1415$Q14_pre_interesting == 1] <- 1
data1415$why_take_pre[data1415$Q14_pre_general_required == 2] <- 2
data1415$why_take_pre[data1415$Q14_pre_major == 3] <- 3
data1415$why_take_pre[(data1415$Q14_pre_interesting == 1) & (data1415$Q14_pre_general_required == 2)] <- 12
data1415$why_take_pre[(data1415$Q14_pre_interesting == 1) & (data1415$Q14_pre_major == 3)] <- 13
data1415$why_take_pre[(data1415$Q14_pre_general_required == 2) & (data1415$Q14_pre_major == 3)] <- 23
data1415$why_take_pre[(data1415$Q14_pre_interesting == 1) & (data1415$Q14_pre_general_required == 2) & (data1415$Q14_pre_major == 3)] <- 123
data1415$why_take_pre <- as.factor(data1415$why_take_pre)

### Makes why_take_post for 14-15 ###
data1415$why_take_post <- NA
data1415$why_take_post[data1415$Q14_post_interest == 1] <- 1
data1415$why_take_post[data1415$Q14_post_general_require == 2] <- 2
data1415$why_take_post[data1415$Q14_post_major == 3] <- 3
data1415$why_take_post[(data1415$Q14_post_interest == 1) & (data1415$Q14_post_general_require == 2)] <- 12
data1415$why_take_post[(data1415$Q14_post_interest == 1) & (data1415$Q14_post_major == 3)] <- 13
data1415$why_take_post[(data1415$Q14_post_general_required == 2) & (data1415$Q14_post_major == 3)] <- 23
data1415$why_take_post[(data1415$Q14_post_interest == 1) & (data1415$Q14_post_general_require == 2) & (data1415$Q14_post_major == 3)] <- 123
data1415$why_take_post <- as.factor(data1415$why_take_post)

### is.major.course ###
data1415$is.major.course <- NA
data1415$is.major.course[data1415$why_take_pre != 3 & data1415$why_take_pre != 13 & data1415$why_take_pre != 23 & data1415$why_take_pre != 123] <- "not major course"
data1415$is.major.course[data1415$why_take_pre == 3] <- "major course"
data1415$is.major.course[data1415$why_take_pre == 13] <- "major course"
data1415$is.major.course[data1415$why_take_pre == 23] <- "major course"
data1415$is.major.course[data1415$why_take_pre == 123] <- "major course"
data1415$is.major.course <- as.factor(data1415$is.major.course)

### YEAR 2 ###
### why_take_pre/post cleaning ###
data1516$why_take_pre[data1516$why_take_pre == "" | data1516$why_take_pre == "   "] <- NA
data1516$why_take_pre[data1516$why_take_pre == "1 3"] <- 13
data1516$why_take_post[data1516$why_take_post == "" | data1516$why_take_post == "   "] <- NA
data1516$why_take_post[data1516$why_take_post == "1 3"] <- 13

data1516$why_take_pre <- as.factor(data1516$why_take_pre)
data1516$why_take_post <- as.factor(data1516$why_take_post)

### is.major.course ###
data1516$is.major.course = NA
data1516$is.major.course[data1516$why_take_pre != 3 & data1516$why_take_pre != 13 & data1516$why_take_pre != 23 & data1516$why_take_pre != 123] <- "not major course"
data1516$is.major.course[data1516$why_take_pre == 3] <- "major course"
data1516$is.major.course[data1516$why_take_pre == 13] <- "major course"
data1516$is.major.course[data1516$why_take_pre == 23] <- "major course"
data1516$is.major.course[data1516$why_take_pre == 123] <- "major course"
data1516$is.major.course <- as.factor(data1516$is.major.course)

### YEAR 3 ###
### why_take_pre/post cleaning ###
data1617$why_take_pre[data1617$why_take_pre == 10 | data1617$why_take_pre == 11 | data1617$why_take_pre == 101] <- NA
data1617$why_take_pre <- as.factor(data1617$why_take_pre)
data1617$why_take_post[data1617$why_take_post == 10 | data1617$why_take_post == 101 | data1617$why_take_post == 111] <- NA
data1617$why_take_post <- as.factor(data1617$why_take_post)

### is.major.course ###
data1617$is.major.course <- NA
data1617$is.major.course[data1617$why_take_pre != 3 & data1617$why_take_pre != 13 & data1617$why_take_pre != 23 & data1617$why_take_pre != 123] <- "not major course"
data1617$is.major.course[data1617$why_take_pre == 3] <- "major course"
data1617$is.major.course[data1617$why_take_pre == 13] <- "major course"
data1617$is.major.course[data1617$why_take_pre == 23] <- "major course"
data1617$is.major.course[data1617$why_take_pre == 123] <- "major course"
data1617$is.major.course <- as.factor(data1617$is.major.course)
```

### Race

```{r}
### YEAR 1 - NO DATA ###
data1415$race_origin <- NA
data1415$is.white <- NA

### YEAR 2 ###
data1516$race_origin <- as.character(data1516$race_origin)
data1516$race_origin[is.na(data1516$race_origin) == T] <- NA
data1516$race_origin <- as.factor(data1516$race_origin)

data1516$is.white <- F
data1516$is.white[is.na(data1516$race_origin) == T] <- NA
data1516$is.white[data1516$race_origin == 1] <- T # = white (only) vs rest
data1516$is.white <- as.factor(data1516$is.white)

### YEAR 3 ###
data1617$race_origin <- as.character(data1617$race_origin)
data1617$race_origin[is.na(data1617$race_origin) == T] <- NA
data1617$race_origin <- as.factor(data1617$race_origin)

data1617$is.white <- F
data1617$is.white[is.na(data1617$race_origin) == T] <- NA
data1617$is.white[data1617$race_origin == 1] <- T # = white (only) vs rest
data1617$is.white <- as.factor(data1617$is.white)
```

### GPA & SATACTzscore

```{r}
### YEAR 1 ###
data1415$gpa <- comparisons(data1415$gpa_pre, data1415$gpa_post, .25)
data1415$SATACTzscore = data1415$ACTSAT

### YEAR 2 ###
data1516$gpa <- comparisons(data1516$gpa_pre, data1516$gpa_post, .25)

### YEAR 3 ###
data1617$gpa <- comparisons(data1617$gpa_pre, data1617$gpa_post, .25)
data1617$gpa[data1617$gpa > 4.0] <- 4.0
```

### Instructor Gender

```{r}
### YEAR 1 ###
data1415$instructor.gender <- as.character(data1415$instructor.gender)
data1415$instructor.gender[data1415$instructor.gender=="female"] <- "Female"
data1415$instructor.gender[data1415$instructor.gender=="male"] <- "Male"
data1415$instructor.gender <- as.factor(data1415$instructor.gender)

### YEAR 2 - already clean ###

### YEAR 3 - already clean ###
```

### Instructor Knowledge of GAISE

```{r}
### YEAR 1 ###
data1415$gaise.familiar <- as.character(data1415$gaise.familiar)
data1415$gaise.familiar[data1415$gaise.familiar == ""] <- NA
data1415$gaise.familiar <- as.factor(data1415$gaise.familiar)

### YEAR 2 ###
data1516$gaise.familiar <- as.character(data1516$gaise.familiar)
data1516$gaise.familiar[data1516$gaise.familiar == ""] <- NA
data1516$gaise.familiar <- as.factor(data1516$gaise.familiar)

### YEAR 3 ###
data1617$gaise.familiar <- as.character(data1617$gaise.familiar)
data1617$gaise.familiar[data1617$gaise.familiar == ""] <- NA
data1617$gaise.familiar <- as.factor(data1617$gaise.familiar)
```

### Instructor Department Classification

```{r}
### YEAR 1 ###
data1415$department.type <- NA
data1415$department.type[data1415$department.classification == "Statistics"] <- "Stats"
data1415$department.type[data1415$department.classification == "Mathematics"] <- "Math"
data1415$department.type[data1415$department.classification == "Mathematics and Statistics"] <- "Stats"
data1415$department.type[data1415$department.classification == "Psychology"] <- "Other"
data1415$department.type[data1415$department.classification == "Combo"] <- "Other"
data1415$department.type[data1415$department.classification == "Math&Stat"] <- "Stats"
data1415$department.type[data1415$department.classification == "Math, CS & Stat"] <- "Stats"
data1415$department.type[data1415$department.classification == "Math, CS and Stat"] <- "Stats"
data1415$department.type[data1415$department.classification == "Natural Sciences"] <- "Other"
data1415$department.type[data1415$department.classification == "Biological sciences"] <- "Other"
data1415$department.type[data1415$department.classification == "Business"] <- "Other"

data1415$department.type <- as.factor(data1415$department.type)

data1415$is.stats.department <- NA
data1415$is.stats.department[data1415$department.type=="Stats"] <- "Stats"
data1415$is.stats.department[data1415$department.type=="Math"] <- "Not Stats"
data1415$is.stats.department[data1415$department.type=="Other"] <- "Not Stats"
data1415$is.stats.department <- as.factor(data1415$is.stats.department)

### YEAR 2 ###
data1516$department.type <- NA
data1516$department.type[data1516$department.classification=="Biology"] <- "Other"
data1516$department.type[data1516$department.classification=="Both Mathematics and Statistics"] <-  "Stats"
data1516$department.type[data1516$department.classification=="Combined Math/Comp Sci/Stats"] <- "Stats"
data1516$department.type[data1516$department.classification=="Department of Mathematical Sciences"] <- "Stats"
data1516$department.type[data1516$department.classification=="Department of Mathematics & Statistics"] <- "Stats"
data1516$department.type[data1516$department.classification=="Math & Stat"] <- "Stats"
data1516$department.type[data1516$department.classification=="Math & Stats"] <- "Stats"
data1516$department.type[data1516$department.classification=="math, cs, stat"] <- "Stats"
data1516$department.type[data1516$department.classification=="Math, CS, Stat"] <- "Stats"
data1516$department.type[data1516$department.classification=="Mathematical Sciences which include Math, Math Ed, and Stats"] <- "Stats"
data1516$department.type[data1516$department.classification=="Mathematics"] <- "Math"
data1516$department.type[data1516$department.classification=="Mathematics & Statistics"] <- "Stats"
data1516$department.type[data1516$department.classification=="Mathematics and Actuarial Science"] <- "Math"
data1516$department.type[data1516$department.classification=="Mathematics and Statistics"] <- "Stats"
data1516$department.type[data1516$department.classification=="Mathematics, Physical, and Computer Sciences"] <- "Math"
data1516$department.type[data1516$department.classification=="Physical Science Chemistry and Math Department."] <- "Math"
data1516$department.type[data1516$department.classification=="Psychology"] <- "Other"
data1516$department.type[data1516$department.classification=="Statistics"] <- "Stats"
data1516$department.type[data1516$department.classification=="We do not have formal discipline departments at NCC"] <- "Other"

data1516$department.type <- as.factor(data1516$department.type)

data1516$is.stats.department <- NA
data1516$is.stats.department[data1516$department.type=="Stats"] <- "Stats"
data1516$is.stats.department[data1516$department.type=="Other"] <- "Not Stats"
data1516$is.stats.department[data1516$department.type=="Math"] <- "Not Stats"
data1516$is.stats.department <- as.factor(data1516$is.stats.department)

### YEAR 3 ###
data1617$department.type <- NA
data1617$department.type[data1617$department.classification=="Educational Psychology/Educational Statistics"] <- "Other"
data1617$department.type[data1617$department.classification=="High School Math Department"] <- "Math"
data1617$department.type[data1617$department.classification=="Mathematics"] <- "Math"
data1617$department.type[data1617$department.classification=="Mathematics and Statistics"] <- "Stats"
data1617$department.type[data1617$department.classification=="Other - Example: ξCombined Departments (please specify)"] <- "Other"
data1617$department.type[data1617$department.classification=="Psychology"] <- "Other"
data1617$department.type[data1617$department.classification=="Statistics"] <- "Stats"
data1617$department.type[data1617$department.classification.other=="Biology"] <- "Other"
data1617$department.type[data1617$department.classification.other=="Ecology, Behavior, Evolution department"] <- "Other"
data1617$department.type[data1617$department.classification.other=="Liberal Arts"] <- "Other"
data1617$department.type[data1617$department.classification.other=="Mathematical Sciences"] <- "Math"
data1617$department.type[data1617$department.classification.other=="Mathematical Sciences "] <- "Math"
data1617$department.type[data1617$department.classification.other=="Mathematical Sciences - mathematics, math teaching, actuarial science, & statistics"] <- "Stats"
data1617$department.type[data1617$department.classification.other=="Mathematics and Computer Science"] <- "Math"
data1617$department.type[data1617$department.classification.other=="Mathematics, Statistics, and Computer Science"] <- "Stats"
data1617$department.type[data1617$department.classification.other=="physical science and math"] <- "Math"
data1617$department.type[data1617$department.classification.other=="Physical Science and Math Department"] <- "Math"
data1617$department.type <- as.factor(data1617$department.type)

data1617$is.stats.department <- NA
data1617$is.stats.department[data1617$department.type=="Stats"] <- "Stats"
data1617$is.stats.department[data1617$department.type=="Other"] <- "Not Stats"
data1617$is.stats.department[data1617$department.type=="Math"] <- "Not Stats"
data1617$is.stats.department <- as.factor(data1617$is.stats.department)
```

### Analyzing data experience

```{r}
### YEAR 1 ###
names(data1415)[names(data1415)=="Data_Analysis_Experience"] <- "analyzing.data.experience"

data1415$analyzing.data.experience <- as.character(data1415$analyzing.data.experience)
data1415$analyzing.data.experience[data1415$analyzing.data.experience=="" | is.na(data1415$analyzing.data.experience) == T] <- NA
data1415$analyzing.data.experience <- as.factor(data1415$analyzing.data.experience)
data1415$analyzing.data.experience <- droplevels(data1415$analyzing.data.experience)

### YEAR 2 ###
data1516$analyzing.data.experience <- as.character(data1516$analyzing.data.experience)
data1516$analyzing.data.experience[data1516$analyzing.data.experience=="" | is.na(data1516$analyzing.data.experience) == T] <- NA
data1516$analyzing.data.experience <- as.factor(data1516$analyzing.data.experience)
data1516$analyzing.data.experience <- droplevels(data1516$analyzing.data.experience)

### YEAR 3 ###
data1617$analyzing.data.experience <- as.character(data1617$analyzing.data.experience)
data1617$analyzing.data.experience[data1617$analyzing.data.experience=="" | is.na(data1617$analyzing.data.experience) == T] <- NA
data1617$analyzing.data.experience <- as.factor(data1617$analyzing.data.experience)
data1617$analyzing.data.experience <- droplevels(data1617$analyzing.data.experience)
```

### Major / Field

```{r}
### YEAR 1 ###
### if field_pre is missing, then recode field_pre as field_post (if available) ###
### if field_pre is missing/4(other)/5(not in college) and field_post is not, set pre to post ###
data1415$field_major_final <- NA
for (i in 1:dim(data1415)[1]) {
  if (is.na(data1415$field_pre[i])) {data1415$field_major_final[i] <- data1415$field_post[i]}
  else if (data1415$field_pre[i] == 4) {data1415$field_major_final[i] <- data1415$field_post[i]}
  else if (data1415$field_pre[i] == 5) {data1415$field_major_final[i] <- data1415$field_post[i]}
  else {data1415$field_major_final[i] <- data1415$field_pre[i]}
}

### if field_major_final still equals 4(other), set to NA ###
data1415$field_major_final[data1415$field_major_final == 3] <- NA
data1415$field_major_final <- mapvalues(data1415$field_major_final, from = c(0,1,2,4), 
                                    to = c("Social sciences", "Natural and applied sciences",
                                           "Arts and humanities", "Other"))

data1415$field_major_final <- as.factor(data1415$field_major_final)


### YEAR 2 ###
### if field_pre is missing, then recode field_pre as field_post (if available) ###
### if field_pre is 3(undeclared)/4(not in college)/5(other) and field_post is not, set pre to post ###
data1516$field_major_final <- NA
for (i in 1:nrow(data1516)) {
  if (is.na(data1516$field_pre[i])) {data1516$field_major_final[i] <- data1516$field_post[i]}
  else if (data1516$field_pre[i] == 3) {data1516$field_major_final[i] <- data1516$field_post[i]}
  else if (data1516$field_pre[i] == 4) {data1516$field_major_final[i] <- data1516$field_post[i]}
  else if (data1516$field_pre[i] == 5) {data1516$field_major_final[i] <- data1516$field_post[i]}
  else {data1516$field_major_final[i] <- data1516$field_pre[i]}
}

### if field_major_final still equals 3(undeclared), 4(not in college), then set to NA ###
data1516$field_major_final[data1516$field_major_final == 3] <- NA
data1516$field_major_final[data1516$field_major_final == 4] <- NA
data1516$field_major_final <- mapvalues(data1516$field_major_final, from = c(0,1,2,5), 
                                        to = c("Social sciences", "Natural and applied sciences",
                                               "Arts and humanities", "Other"))

data1516$field_major_final <- as.factor(data1516$field_major_final)



### YEAR 3 ###
### if field_pre is missing, then recode field_pre as pre_post (if available) ###
### if field_pre is 3(undeclared)/4(not in college)/5(other)/6(??) and field_post is not, set pre to post ###
data1617$field_major_final <- NA
for (i in 1:nrow(data1617)) {
  if (is.na(data1617$field_pre[i])) {data1617$field_major_final[i] <- data1617$field_post[i]}
  else if (data1617$field_pre[i] == 3) {data1617$field_major_final[i] <- data1617$field_post[i]}
  else if (data1617$field_pre[i] == 4) {data1617$field_major_final[i] <- data1617$field_post[i]}
  else if (data1617$field_pre[i] == 5) {data1617$field_major_final[i] <- data1617$field_post[i]}
  else if (data1617$field_pre[i] == 6) {data1617$field_major_final[i] <- data1617$field_post[i]}
  else {data1617$field_major_final[i] <- data1617$field_pre[i]}
}

### if field_major_final still equals 3/4/5/6, set to NA ###
data1617$field_major_final[data1617$field_major_final == 3 | data1617$field_major_final == 4 | data1617$field_major_final == 6] <- NA

data1617$field_major_final <- mapvalues(data1617$field_major_final, from = c(0,1,2,5), 
                                        to = c("Social sciences", "Natural and applied sciences",
                                               "Arts and humanities", "Other"))

data1617$field_major_final <- as.factor(data1617$field_major_final)
```

### Percent Lecture

```{r}
### YEAR 1 ###
data1415$percent.lecture <- as.numeric(data1415$X.Traditional_Learning)

### YEAR 2 ###
levels(data1516$percent.lecture)[levels(data1516$percent.lecture) == "In lecture, it was around 90%. In lab, it was 0% except section 6 did maybe 15% lecture in lab"] <- 0.50
data1516$percent.lecture <- as.numeric(as.character(data1516$percent.lecture))
data1516$percent.lecture <- 100 * data1516$percent.lecture

### YEAR 3 - already clean ###
```

### Special Cases / Explanations for certain Instructors

```{r}
### YEAR 1 ###
## "HollingsworthSection1_fall" gave pre and post, admin.post.location needs to be changed to NA
# "SimpsonSection1_fall" does not exist - gave pre test, but not post test so was already removed before this dataset
# "WillSection1_fall" does not exist - didn't give concepts so was removed before this dataset (just attitudes pre & post)
# data1415[data1415$admin.post.location=="Did not give","InstructorName_Section_Semester"]

data1415$admin.pre.location[data1415$InstructorName_Section_Semester == "HollingsworthSection1_fall"] <- NA
data1415$admin.pre.location[data1415$InstructorName_Section_Semester == "HollingsworthSection2_fall"] <- NA
data1415$admin.post.location[data1415$InstructorName_Section_Semester == "HollingsworthSection1_fall"] <- NA
data1415$admin.post.location[data1415$InstructorName_Section_Semester == "HollingsworthSection2_fall"] <- NA
# Simpson admin pre is good
data1415$admin.post.location[data1415$InstructorName_Section_Semester == "SimpsonSection1_fall"] <- NA
# Will admin pre is good
data1415$admin.post.location[data1415$InstructorName_Section_Semester == "WillSection1_fall"] <- NA

### YEAR 2 ###
## "BurowSection1_spring" gave pre & post, but admin.post.location says did not give which is incorrect need to change to NA
data1516$admin.post.location[data1516$InstructorName_Section_Semester == "BurowSection1_spring"] <- NA
data1516$admin.post.location[data1516$InstructorName_Section_Semester == "BurowSection1_spring"] <- NA

### YEAR 3 ###
data1617$semester[data1617$InstructorName_Section_Semester == "O'Brien_Section1_Fall"] <- "Condensed"
data1617$semester[data1617$InstructorName_Section_Semester == "O'Brien_Section2_Fall"] <- "Condensed"

# "Quartey_Section1_Fall" gave pre & post,but admim.locations say did not give - need to change to NA
# "Gorguis_Section1_Fall" did not give
data1617$admin.pre.location[data1617$InstructorName_Section_Semester == "Quartey_Section1_Fall"] <- NA
data1617$admin.post.location[data1617$InstructorName_Section_Semester == "Quartey_Section1_Fall"] <- NA
data1617$admin.pre.location[data1617$InstructorName_Section_Semester == "Gorguis_Section1_Fall"] <- NA
data1617$admin.post.location[data1617$InstructorName_Section_Semester == "Gorguis_Section1_Fall"] <- NA

```

### Renaming Q16, 17, 18 on 14-15 data

```{r}
### PRE ###
# Q16_1415_a / b/ c; same for RW; newQ16_pre --> Q16_pre_RW
data1415$Q16_a_pre_c_1415 <- data1415$Q16_pre_c
data1415$Q16_b_pre_c_1415 <- data1415$Q17_pre_c
data1415$Q16_c_pre_c_1415 <- data1415$Q18_pre_c
# data1415$Q16_pre_c_RW <- data1415$new_Q16_pre
data1415 <- subset(data1415, select = -c(Q16_pre_c))

### Note Q16_not_answered is for pre; will rename later ###
data1415$Q16_not_answered <- F
data1415$Q16_not_answered[is.na(data1415$Q16_a_pre_c_1415)==T & is.na(data1415$Q16_b_pre_c_1415) == T & is.na(data1415$Q16_c_pre_c_1415)==T] <- T

data1415$Q16_a_pre_c_1415_RW <- 0 
data1415$Q16_b_pre_c_1415_RW <- 0 
data1415$Q16_c_pre_c_1415_RW <- 0 
data1415$Q16_a_pre_c_1415_RW[data1415$Q16_a_pre_c_1415 == 2] <- 1
data1415$Q16_b_pre_c_1415_RW[data1415$Q16_b_pre_c_1415 == 1] <- 1
data1415$Q16_c_pre_c_1415_RW[data1415$Q16_c_pre_c_1415 == 2] <- 1

data1415$Q16_pre_c_RW <- (data1415$Q16_a_pre_c_1415_RW + data1415$Q16_b_pre_c_1415_RW + 
                            data1415$Q16_c_pre_c_1415_RW)/3

data1415$Q16_pre_c_RW[data1415$Q16_not_answered == T] <- NA

### POST ###
data1415$Q16_a_post_c_1415 <- data1415$Q16_post_c
data1415$Q16_b_post_c_1415 <- data1415$Q17_post_c
data1415$Q16_c_post_c_1415 <- data1415$Q18_post_c
# data1415$Q16_post_c_RW <- data1415$new_Q16_post
data1415 <- subset(data1415, select = -c(Q16_post_c))

data1415$Q16_not_answered_post <- F
data1415$Q16_not_answered_post[is.na(data1415$Q16_a_post_c_1415)==T & is.na(data1415$Q16_b_post_c_1415) == T & is.na(data1415$Q16_c_post_c_1415)==T] <- T

data1415$Q16_a_post_c_1415_RW <- 0 
data1415$Q16_b_post_c_1415_RW <- 0 
data1415$Q16_c_post_c_1415_RW <- 0 
data1415$Q16_a_post_c_1415_RW[data1415$Q16_a_post_c_1415 == 2] <- 1
data1415$Q16_b_post_c_1415_RW[data1415$Q16_b_post_c_1415 == 1] <- 1
data1415$Q16_c_post_c_1415_RW[data1415$Q16_c_post_c_1415 == 2] <- 1

data1415$Q16_post_c_RW <- (data1415$Q16_a_post_c_1415_RW + data1415$Q16_b_post_c_1415_RW + 
                            data1415$Q16_c_post_c_1415_RW)/3

data1415$Q16_post_c_RW[data1415$Q16_not_answered_post == T] <- NA
```

### Shifting columns; 48ab --\> 46ab and 49 --\> 47

```{r}
# Turns Q19_pre_c to Q47_pre_c --> Q17_pre_c to Q45_pre_c
for (i in c(17:45))
{
  # print(i)
  data1415[ , paste0("Q", i, "_pre_c")] <- data1415[ , paste0("Q", i+2, "_pre_c")]
  data1415[ , paste0("Q", i, "_post_c")] <- data1415[ , paste0("Q", i+2, "_post_c")]
  data1415[ , paste0("Q", i, "_pre_c_RW")] <- data1415[ , paste0("Q", i+2, "_pre_c_RW")]
  data1415[ , paste0("Q", i, "_post_c_RW")] <- data1415[ , paste0("Q", i+2, "_post_c_RW")]
}

# 48ab --> 46ab and 49 --> 47
data1415$Q46.a_pre_c <- data1415$Q48.a_pre_c
data1415$Q46.b_pre_c <- data1415$Q48.b_pre_c
data1415$Q47_pre_c <- data1415$Q49_pre_c
data1415$Q46.a_pre_c_RW <- data1415$Q48a_pre_c_RW
data1415$Q46.b_pre_c_RW <- data1415$Q48b_pre_c_RW
data1415$Q47_pre_c_RW <- data1415$Q49_pre_c_RW

data1415$Q46.a_post_c <- data1415$Q48.a_post_c
data1415$Q46.b_post_c <- data1415$Q48.b_post_c
data1415$Q47_post_c <- data1415$Q49_post_c
data1415$Q46.a_post_c_RW <- data1415$Q48a_post_c_RW
data1415$Q46.b_post_c_RW <- data1415$Q48b_post_c_RW
data1415$Q47_post_c_RW <- data1415$Q49_post_c_RW

### Drops Q48.a_pre/post_c, Q48.b_pre/post_c, Q49_pre/post_c ###
data1415 <- subset(data1415, select = -c(Q48.a_pre_c, Q48.b_pre_c, Q49_pre_c))
data1415 <- subset(data1415, select = -c(Q48.a_post_c, Q48.b_post_c, Q49_post_c))
data1415 <- subset(data1415, select = -c(Q48a_pre_c_RW, Q48b_pre_c_RW, Q49_pre_c_RW))
data1415 <- subset(data1415, select = -c(Q48a_post_c_RW, Q48b_post_c_RW, Q49_post_c_RW))

data1415 <- subset(data1415, select = -c(Q46_pre_c, Q46_post_c, Q46_pre_c_RW, Q46_post_c_RW))

### Now there are only '47' questions ###
### Q17_pre_c refers to Q19 on the instrument ###

### List of Concept Questions ###
### Responses: Q16_a_pre/post_c_1415 through Q16_d_pre_c_1415, Q17_pre/post_c through Q47_pre/post_c ###
### RWs: Q16_pre/post_c_RW through Q47_pre/post_c_RW ###
```

### Fixing Q16 on 15-16 data

```{r}
### Fixing data1516 Q16a - Q16d & RWs PRE ###
### NA's are being treated as correct in Q16b and Q16c, otherwise NA's are incorrect ###
### IF all 4 parts are NA's, this means 0 points ###
data1516$Q16_not_answered <- F
data1516$Q16_not_answered[is.na(data1516$Q16.a_pre_c)==T & is.na(data1516$Q16.b_pre_c) == T & is.na(data1516$Q16.c_pre_c)==T & is.na(data1516$Q16.d_pre_c)==T & is.na(data1516$Q17_pre_c)==T] <- T

data1516$Q16_not_answered_post <- F
data1516$Q16_not_answered_post[is.na(data1516$Q16.a_post_c)==T & is.na(data1516$Q16.b_post_c) == T & is.na(data1516$Q16.c_post_c)==T & is.na(data1516$Q16.d_post_c)==T & is.na(data1516$Q17_post_c)==T] <- T

data1516$Q16.a_pre_c_RW <- 0 
data1516$Q16.b_pre_c_RW <- 0 
data1516$Q16.c_pre_c_RW <- 0 
data1516$Q16.d_pre_c_RW <- 0 
data1516$Q16.a_pre_c_RW[(data1516$Q16.a_pre_c == "checked**") | (data1516$Q16.a_pre_c == 1)] <- 1
data1516$Q16.b_pre_c_RW[((data1516$Q16.b_pre_c == "blank**") | (is.na(data1516$Q16.b_pre_c) == T)) & (data1516$Q16_not_answered == F)] <- 1
data1516$Q16.c_pre_c_RW[((data1516$Q16.c_pre_c == "blank**") | (is.na(data1516$Q16.c_pre_c) == T)) & (data1516$Q16_not_answered == F)] <- 1
data1516$Q16.d_pre_c_RW[(data1516$Q16.d_pre_c == "checked**") | (data1516$Q16.d_pre_c == 4)] <- 1

data1516$Q16_pre_c_RW <- (data1516$Q16.a_pre_c_RW + data1516$Q16.b_pre_c_RW + data1516$Q16.c_pre_c_RW + 
                            data1516$Q16.d_pre_c_RW)/4

data1516$Q16_pre_c_RW[data1516$Q16_not_answered == T] <- NA

### Fixing data1516 Q16a - Q16d & RWs POST ###
### NA's are being treated as correct ###
data1516$Q16.a_post_c_RW <- 0 
data1516$Q16.b_post_c_RW <- 0 
data1516$Q16.c_post_c_RW <- 0 
data1516$Q16.d_post_c_RW <- 0 
data1516$Q16.a_post_c_RW[(data1516$Q16.a_post_c == "checked**") | (data1516$Q16.a_post_c == 1)] <- 1
data1516$Q16.b_post_c_RW[((data1516$Q16.b_post_c == "blank**") | (is.na(data1516$Q16.b_post_c) == T)) & (data1516$Q16_not_answered == F)] <- 1
data1516$Q16.c_post_c_RW[((data1516$Q16.c_post_c == "blank**") | (is.na(data1516$Q16.c_post_c) == T)) & (data1516$Q16_not_answered == F)] <- 1
data1516$Q16.d_post_c_RW[(data1516$Q16.d_post_c == "checked**") | (data1516$Q16.d_post_c == 4)] <- 1

data1516$Q16_post_c_RW <- (data1516$Q16.a_post_c_RW + data1516$Q16.b_post_c_RW + data1516$Q16.c_post_c_RW + 
                             data1516$Q16.d_post_c_RW)/4

data1516$Q16_post_c_RW[data1516$Q16_not_answered_post == T] <- NA

### List of Concept Questions ###
### Responses: Q16.a_pre/post_c through Q47_pre/post_c ###
### RWs: Q16_pre/post_c_RW through Q47_pre/post_c_RW ###
```

### Fixing Q16 on 16-17 data

```{r}
### Fixing data1617 Q16a - Q16d & RWs PRE ###
### NA's are being treated as correct in Q16b and Q16c, otherwise NA's are incorrect ###
### IF all 4 parts are NA's, this means 0 points ###

data1617$Q16_not_answered <- F
data1617$Q16_not_answered[is.na(data1617$Q16.a_pre_c)==T & is.na(data1617$Q16.b_pre_c) == T & is.na(data1617$Q16.c_pre_c)==T & is.na(data1617$Q16.d_pre_c)==T & is.na(data1617$Q17_pre_c)==T] <- T

data1617$Q16_not_answered_post <- F
data1617$Q16_not_answered_post[is.na(data1617$Q16.a_post_c)==T & is.na(data1617$Q16.b_post_c) == T & is.na(data1617$Q16.c_post_c)==T & is.na(data1617$Q16.d_post_c)==T & is.na(data1617$Q17_post_c)==T] <- T

data1617$Q16.a_pre_c_RW <- 0 
data1617$Q16.b_pre_c_RW <- 0 
data1617$Q16.c_pre_c_RW <- 0 
data1617$Q16.d_pre_c_RW <- 0 
data1617$Q16.a_pre_c_RW[(data1617$Q16.a_pre_c == "checked**") | (data1617$Q16.a_pre_c == 1)] <- 1
data1617$Q16.b_pre_c_RW[((data1617$Q16.b_pre_c == "blank**") | (is.na(data1617$Q16.b_pre_c) == T)) & (data1617$Q16_not_answered == F)] <- 1
data1617$Q16.c_pre_c_RW[((data1617$Q16.c_pre_c == "blank**") | (is.na(data1617$Q16.c_pre_c) == T)) & (data1617$Q16_not_answered == F)] <- 1
data1617$Q16.d_pre_c_RW[(data1617$Q16.d_pre_c == "checked**") | (data1617$Q16.d_pre_c == 4)] <- 1

data1617$Q16_pre_c_RW <- (data1617$Q16.a_pre_c_RW + data1617$Q16.b_pre_c_RW + data1617$Q16.c_pre_c_RW + 
                            data1617$Q16.d_pre_c_RW)/4

data1617$Q16_pre_c_RW[data1617$Q16_not_answered == T] <- NA

### Fixing data1617 Q16a - Q16d & RWs POST ###
### NA's are being treated as correct ###
data1617$Q16.a_post_c_RW <- 0 
data1617$Q16.b_post_c_RW <- 0 
data1617$Q16.c_post_c_RW <- 0 
data1617$Q16.d_post_c_RW <- 0 
data1617$Q16.a_post_c_RW[(data1617$Q16.a_post_c == "checked**") | (data1617$Q16.a_post_c == 1)] <- 1
data1617$Q16.b_post_c_RW[((data1617$Q16.b_post_c == "blank**") | (is.na(data1617$Q16.b_post_c) == T)) & (data1617$Q16_not_answered == F)] <- 1
data1617$Q16.c_post_c_RW[((data1617$Q16.c_post_c == "blank**") | (is.na(data1617$Q16.c_post_c) == T)) & (data1617$Q16_not_answered == F)] <- 1
data1617$Q16.d_post_c_RW[(data1617$Q16.d_post_c == "checked**") | (data1617$Q16.d_post_c == 4)] <- 1

data1617$Q16_post_c_RW <- (data1617$Q16.a_post_c_RW + data1617$Q16.b_post_c_RW + data1617$Q16.c_post_c_RW + 
                             data1617$Q16.d_post_c_RW)/4

data1617$Q16_post_c_RW[data1617$Q16_not_answered_post == T] <- NA

### List of Concept Questions ###
### Responses: Q16.a_pre/post_c through Q47_pre/post_c ###
### RWs: Q16_pre/post_c_RW through Q47_pre/post_c_RW ###
```

### Writing out before combining

```{r}
# Changed 5/2 by Sean Leader to output to a "Data" folder
write.csv(data1415, "Data/test1.csv")
write.csv(data1516, "Data/test2.csv")
write.csv(data1617, "Data/test3.csv")
```

### COMBINING DATA

```{r}
library(plyr)

# Changed 5/2 by Sean Leader to use the here() function
data1415_post <- read.csv(here::here("Data", "test1.csv"), stringsAsFactors = T)
data1516_post <- read.csv(here::here("Data", "test2.csv"), stringsAsFactors = T)
data1617_post <- read.csv(here::here("Data", "test3.csv"), stringsAsFactors = T)

allyears <- rbind.fill(data1617_post, data1516_post, data1415_post)
data = allyears
```

### Fixing the RWs

```{r}
### PRE ###
#Q17#
data$Q17_pre_c_RW <- 0
data$Q17_pre_c_RW[data$Q17_pre_c == 3 | data$Q17_pre_c == "c**"] <- 1
data$Q17_pre_c_RW[is.na(data$Q17_pre_c) == T] <- NA

#Q18#
data$Q18_pre_c_RW <- 0
data$Q18_pre_c_RW[data$Q18_pre_c == 2 | data$Q18_pre_c == "b**"] <- 1
data$Q18_pre_c_RW[is.na(data$Q18_pre_c)] <- NA

#Q19#
data$Q19_pre_c_RW <- 0
data$Q19_pre_c_RW[data$Q19_pre_c == 1 | data$Q19_pre_c == "a**"] <- 1
data$Q19_pre_c_RW[is.na(data$Q19_pre_c) == T] <- NA

#Q20#
data$Q20_pre_c_RW <- 0
data$Q20_pre_c_RW[data$Q20_pre_c == 2 | data$Q20_pre_c == "b**"] <- 1
data$Q20_pre_c_RW[is.na(data$Q20_pre_c) == T] <- NA

#Q21#
data$Q21_pre_c_RW <- 0
data$Q21_pre_c_RW[data$Q21_pre_c == 1 | data$Q21_pre_c == "a**"] <- 1
data$Q21_pre_c_RW[is.na(data$Q21_pre_c) == T] <- NA

#Q22#
data$Q22_pre_c_RW <- 0
data$Q22_pre_c_RW[data$Q22_pre_c == 1 | data$Q22_pre_c == "a**"] <- 1
data$Q22_pre_c_RW[is.na(data$Q22_pre_c) == T] <- NA

#Q23#
data$Q23_pre_c_RW <- 0
data$Q23_pre_c_RW[data$Q23_pre_c == 1 | data$Q23_pre_c == "a**"] <- 1
data$Q23_pre_c_RW[is.na(data$Q23_pre_c) == T] <- NA

#Q24#
data$Q24_pre_c_RW <- 0
data$Q24_pre_c_RW[data$Q24_pre_c == 2 | data$Q24_pre_c == "b**"] <- 1
data$Q24_pre_c_RW[is.na(data$Q24_pre_c) == T] <- NA

#Q25#
data$Q25_pre_c_RW <- 0
data$Q25_pre_c_RW[data$Q25_pre_c == 2 | data$Q25_pre_c == "b**"] <- 1
data$Q25_pre_c_RW[is.na(data$Q25_pre_c) == T] <- NA

#Q26#
data$Q26_pre_c_RW <- 0
data$Q26_pre_c_RW[data$Q26_pre_c == 2 | data$Q26_pre_c == "b**"] <- 1
data$Q26_pre_c_RW[is.na(data$Q26_pre_c) == T] <- NA

#Q27#
data$Q27_pre_c_RW <- 0
data$Q27_pre_c_RW[data$Q27_pre_c == 3 | data$Q27_pre_c == "c**"] <- 1
data$Q27_pre_c_RW[is.na(data$Q27_pre_c) == T] <- NA

#Q28#
data$Q28_pre_c_RW <- 0
data$Q28_pre_c_RW[data$Q28_pre_c == 2 | data$Q28_pre_c == "b**"] <- 1
data$Q28_pre_c_RW[is.na(data$Q28_pre_c) == T] <- NA

#Q29#
data$Q29_pre_c_RW <- 0
data$Q29_pre_c_RW[data$Q29_pre_c == 1 | data$Q29_pre_c == "a**"] <- 1
data$Q29_pre_c_RW[is.na(data$Q29_pre_c) == T] <- NA

#Q30#
data$Q30_pre_c_RW <- 0
data$Q30_pre_c_RW[data$Q30_pre_c == 2 | data$Q30_pre_c == "b**"] <- 1
data$Q30_pre_c_RW[is.na(data$Q30_pre_c) == T] <- NA

#Q31#
data$Q31_pre_c_RW <- 0
data$Q31_pre_c_RW[data$Q31_pre_c == 2 | data$Q31_pre_c == "b**"] <- 1
data$Q31_pre_c_RW[is.na(data$Q31_pre_c) == T] <- NA

#Q32#
data$Q32_pre_c_RW <- 0
data$Q32_pre_c_RW[data$Q32_pre_c == 4 | data$Q32_pre_c == "d**"] <- 1
data$Q32_pre_c_RW[is.na(data$Q32_pre_c) == T] <- NA

#Q33#
data$Q33_pre_c_RW <- 0
data$Q33_pre_c_RW[data$Q33_pre_c == 3 | data$Q33_pre_c == "c**"] <- 1
data$Q33_pre_c_RW[is.na(data$Q33_pre_c) == T] <- NA

#Q34#
data$Q34_pre_c_RW <- 0
data$Q34_pre_c_RW[data$Q34_pre_c == 3 | data$Q34_pre_c == "c**"] <- 1
data$Q34_pre_c_RW[is.na(data$Q34_pre_c) == T] <- NA

#Q35#
data$Q35_pre_c_RW <- 0
data$Q35_pre_c_RW[data$Q35_pre_c == 5 | data$Q35_pre_c == "e**"] <- 1
#On Q35, if student repsonds 3, they get half credit #
data$Q35_pre_c_RW[data$Q35_pre_c == "c" | data$Q35_pre_c == "3"] <- 0.5
data$Q35_pre_c_RW[is.na(data$Q35_pre_c) == T] <- NA

#Q36#
data$Q36_pre_c_RW <- 0
data$Q36_pre_c_RW[data$Q36_pre_c == 1 | data$Q36_pre_c == "a**"] <- 1
data$Q36_pre_c_RW[is.na(data$Q36_pre_c) == T] <- NA

#Q37#
data$Q37_pre_c_RW <- 0
data$Q37_pre_c_RW[data$Q37_pre_c == 2 | data$Q37_pre_c == "b**"] <- 1
data$Q37_pre_c_RW[is.na(data$Q37_pre_c) == T] <- NA

#Q38#
data$Q38_pre_c_RW <- 0
data$Q38_pre_c_RW[data$Q38_pre_c == 1 | data$Q38_pre_c == "a**"] <- 1
data$Q38_pre_c_RW[is.na(data$Q38_pre_c) == T] <- NA

#Q39#
data$Q39_pre_c_RW <- 0
data$Q39_pre_c_RW[data$Q39_pre_c == 2 | data$Q39_pre_c == "b**"] <- 1
data$Q39_pre_c_RW[is.na(data$Q39_pre_c) == T] <- NA

#Q40#
data$Q40_pre_c_RW <- 0
data$Q40_pre_c_RW[data$Q40_pre_c == 1 | data$Q40_pre_c == "a**"] <- 1
data$Q40_pre_c_RW[is.na(data$Q40_pre_c) == T] <- NA

#Q41#
data$Q41_pre_c_RW <- 0
data$Q41_pre_c_RW[data$Q41_pre_c == 2 | data$Q41_pre_c == "b**"] <- 1
data$Q41_pre_c_RW[is.na(data$Q41_pre_c) == T] <- NA

#Q42#
data$Q42_pre_c_RW <- 0
data$Q42_pre_c_RW[data$Q42_pre_c == 2 | data$Q42_pre_c == "b**"] <- 1
data$Q42_pre_c_RW[is.na(data$Q42_pre_c) == T] <- NA

#Q43#
data$Q43_pre_c_RW <- 0
data$Q43_pre_c_RW[data$Q43_pre_c == 2 | data$Q43_pre_c == "b**"] <- 1
data$Q43_pre_c_RW[is.na(data$Q43_pre_c) == T] <- NA

#Q44#
data$Q44_pre_c_RW <- 0
data$Q44_pre_c_RW[data$Q44_pre_c == 2 | data$Q44_pre_c == "b**"] <- 1
data$Q44_pre_c_RW[is.na(data$Q44_pre_c) == T] <- NA

#Q45#
data$Q45_pre_c_RW <- 0
data$Q45_pre_c_RW[data$Q45_pre_c == 2 | data$Q45_pre_c == "b**"] <- 1
data$Q45_pre_c_RW[is.na(data$Q45_pre_c) == T] <- NA

#Q46a#
data$Q46.a_pre_c_RW <- 0
data$Q46.a_pre_c_RW[data$Q46.a_pre_c == 1 | data$Q46.a_pre_c == "a**"] <- 1
data$Q46.a_pre_c_RW[is.na(data$Q46.a_pre_c) == T] <- NA

#Q46b#
data$Q46.b_pre_c_RW <- 0
data$Q46.b_pre_c_RW[data$Q46.b_pre_c == 2 | data$Q46.b_pre_c == "b**"] <- 1
data$Q46.b_pre_c_RW[is.na(data$Q46.b_pre_c) == T] <- NA

#Q47#
data$Q47_pre_c_RW <- 0
data$Q47_pre_c_RW[data$Q47_pre_c == 4 | data$Q47_pre_c == "d**"] <- 1
data$Q47_pre_c_RW[is.na(data$Q47_pre_c) == T] <- NA


### POST ###
#Q17#
data$Q17_post_c_RW <- 0
data$Q17_post_c_RW[data$Q17_post_c == 3 | data$Q17_post_c == "c**"] <- 1
data$Q17_post_c_RW[is.na(data$Q17_post_c) == T] <- NA

#Q18#
data$Q18_post_c_RW <- 0
data$Q18_post_c_RW[data$Q18_post_c == 2 | data$Q18_post_c == "b**"] <- 1
data$Q18_post_c_RW[is.na(data$Q18_post_c)] <- NA

#Q19#
data$Q19_post_c_RW <- 0
data$Q19_post_c_RW[data$Q19_post_c == 1 | data$Q19_post_c == "a**"] <- 1
data$Q19_post_c_RW[is.na(data$Q19_post_c) == T] <- NA

#Q20#
data$Q20_post_c_RW <- 0
data$Q20_post_c_RW[data$Q20_post_c == 2 | data$Q20_post_c == "b**"] <- 1
data$Q20_post_c_RW[is.na(data$Q20_post_c) == T] <- NA

#Q21#
data$Q21_post_c_RW <- 0
data$Q21_post_c_RW[data$Q21_post_c == 1 | data$Q21_post_c == "a**"] <- 1
data$Q21_post_c_RW[is.na(data$Q21_post_c) == T] <- NA

#Q22#
data$Q22_post_c_RW <- 0
data$Q22_post_c_RW[data$Q22_post_c == 1 | data$Q22_post_c == "a**"] <- 1
data$Q22_post_c_RW[is.na(data$Q22_post_c) == T] <- NA

#Q23#
data$Q23_post_c_RW <- 0
data$Q23_post_c_RW[data$Q23_post_c == 1 | data$Q23_post_c == "a**"] <- 1
data$Q23_post_c_RW[is.na(data$Q23_post_c) == T] <- NA

#Q24#
data$Q24_post_c_RW <- 0
data$Q24_post_c_RW[data$Q24_post_c == 2 | data$Q24_post_c == "b**"] <- 1
data$Q24_post_c_RW[is.na(data$Q24_post_c) == T] <- NA

#Q25#
data$Q25_post_c_RW <- 0
data$Q25_post_c_RW[data$Q25_post_c == 2 | data$Q25_post_c == "b**"] <- 1
data$Q25_post_c_RW[is.na(data$Q25_post_c) == T] <- NA

#Q26#
data$Q26_post_c_RW <- 0
data$Q26_post_c_RW[data$Q26_post_c == 2 | data$Q26_post_c == "b**"] <- 1
data$Q26_post_c_RW[is.na(data$Q26_post_c) == T] <- NA

#Q27#
data$Q27_post_c_RW <- 0
data$Q27_post_c_RW[data$Q27_post_c == 3 | data$Q27_post_c == "c**"] <- 1
data$Q27_post_c_RW[is.na(data$Q27_post_c) == T] <- NA

#Q28#
data$Q28_post_c_RW <- 0
data$Q28_post_c_RW[data$Q28_post_c == 2 | data$Q28_post_c == "b**"] <- 1
data$Q28_post_c_RW[is.na(data$Q28_post_c) == T] <- NA

#Q29#
data$Q29_post_c_RW <- 0
data$Q29_post_c_RW[data$Q29_post_c == 1 | data$Q29_post_c == "a**"] <- 1
data$Q29_post_c_RW[is.na(data$Q29_post_c) == T] <- NA

#Q30#
data$Q30_post_c_RW <- 0
data$Q30_post_c_RW[data$Q30_post_c == 2 | data$Q30_post_c == "b**"] <- 1
data$Q30_post_c_RW[is.na(data$Q30_post_c) == T] <- NA

#Q31#
data$Q31_post_c_RW <- 0
data$Q31_post_c_RW[data$Q31_post_c == 2 | data$Q31_post_c == "b**"] <- 1
data$Q31_post_c_RW[is.na(data$Q31_post_c) == T] <- NA

#Q32#
data$Q32_post_c_RW <- 0
data$Q32_post_c_RW[data$Q32_post_c == 4 | data$Q32_post_c == "d**"] <- 1
data$Q32_post_c_RW[is.na(data$Q32_post_c) == T] <- NA

#Q33#
data$Q33_post_c_RW <- 0
data$Q33_post_c_RW[data$Q33_post_c == 3 | data$Q33_post_c == "c**"] <- 1
data$Q33_post_c_RW[is.na(data$Q33_post_c) == T] <- NA

#Q34#
data$Q34_post_c_RW <- 0
data$Q34_post_c_RW[data$Q34_post_c == 3 | data$Q34_post_c == "c**"] <- 1
data$Q34_post_c_RW[is.na(data$Q34_post_c) == T] <- NA

#Q35#
data$Q35_post_c_RW <- 0
data$Q35_post_c_RW[data$Q35_post_c == 5 | data$Q35_post_c == "e**"] <- 1
#On Q35, if student repsonds 3, they get half credit #
data$Q35_post_c_RW[data$Q35_post_c == "c" | data$Q35_post_c == "3"] <- 0.5
data$Q35_post_c_RW[is.na(data$Q35_post_c) == T] <- NA

#Q36#
data$Q36_post_c_RW <- 0
data$Q36_post_c_RW[data$Q36_post_c == 1 | data$Q36_post_c == "a**"] <- 1
data$Q36_post_c_RW[is.na(data$Q36_post_c) == T] <- NA

#Q37#
data$Q37_post_c_RW <- 0
data$Q37_post_c_RW[data$Q37_post_c == 2 | data$Q37_post_c == "b**"] <- 1
data$Q37_post_c_RW[is.na(data$Q37_post_c) == T] <- NA

#Q38#
data$Q38_post_c_RW <- 0
data$Q38_post_c_RW[data$Q38_post_c == 1 | data$Q38_post_c == "a**"] <- 1
data$Q38_post_c_RW[is.na(data$Q38_post_c) == T] <- NA

#Q39#
data$Q39_post_c_RW <- 0
data$Q39_post_c_RW[data$Q39_post_c == 2 | data$Q39_post_c == "b**"] <- 1
data$Q39_post_c_RW[is.na(data$Q39_post_c) == T] <- NA

#Q40#
data$Q40_post_c_RW <- 0
data$Q40_post_c_RW[data$Q40_post_c == 1 | data$Q40_post_c == "a**"] <- 1
data$Q40_post_c_RW[is.na(data$Q40_post_c) == T] <- NA

#Q41#
data$Q41_post_c_RW <- 0
data$Q41_post_c_RW[data$Q41_post_c == 2 | data$Q41_post_c == "b**"] <- 1
data$Q41_post_c_RW[is.na(data$Q41_post_c) == T] <- NA

#Q42#
data$Q42_post_c_RW <- 0
data$Q42_post_c_RW[data$Q42_post_c == 2 | data$Q42_post_c == "b**"] <- 1
data$Q42_post_c_RW[is.na(data$Q42_post_c) == T] <- NA

#Q43#
data$Q43_post_c_RW <- 0
data$Q43_post_c_RW[data$Q43_post_c == 2 | data$Q43_post_c == "b**"] <- 1
data$Q43_post_c_RW[is.na(data$Q43_post_c) == T] <- NA

#Q44#
data$Q44_post_c_RW <- 0
data$Q44_post_c_RW[data$Q44_post_c == 2 | data$Q44_post_c == "b**"] <- 1
data$Q44_post_c_RW[is.na(data$Q44_post_c) == T] <- NA

#Q45#
data$Q45_post_c_RW <- 0
data$Q45_post_c_RW[data$Q45_post_c == 2 | data$Q45_post_c == "b**"] <- 1
data$Q45_post_c_RW[is.na(data$Q45_post_c) == T] <- NA

#Q46a#
data$Q46.a_post_c_RW <- 0
data$Q46.a_post_c_RW[data$Q46.a_post_c == 1 | data$Q46.a_post_c == "a**"] <- 1
data$Q46.a_post_c_RW[is.na(data$Q46.a_post_c) == T] <- NA

#Q46b#
data$Q46.b_post_c_RW <- 0
data$Q46.b_post_c_RW[data$Q46.b_post_c == 2 | data$Q46.b_post_c == "b**"] <- 1
data$Q46.b_post_c_RW[is.na(data$Q46.b_post_c) == T] <- NA

#Q47#
data$Q47_post_c_RW <- 0
data$Q47_post_c_RW[data$Q47_post_c == 4 | data$Q47_post_c == "d**"] <- 1
data$Q47_post_c_RW[is.na(data$Q47_post_c) == T] <- NA
```

### Creating new data set with condensed for new notebook

```{r}
## Condensed has 587 obs ###
condensed <- data %>%
  filter(semester=="Condensed")

# Modified 5/2 by Sean Leader to output to a "Data" folder
write.csv(condensed, "Data/Condensed Final v3.csv")
```

### Removing Condensed

```{r}
### Will go from 15973 to 15386 ###
data <- data %>%
  filter(semester != "Condensed")
```

### REMOVE PEOPLE WHO STRICTLY OPTED OUT

```{r}
### Go from 15386 to 14792 ###
data <- data[data$Opt.out_pre==1 | is.na(data$Opt.out_pre) == T,]
data <- data[data$Opt.out_post==1 | is.na(data$Opt.out_post) == T,]
```

### Creating a Q16_not_answered Check for RR later

```{r}
### Creates not answered for 14-15 and sets everyone to NA to coalesce later ###
### Note this is for PRE ###
data$Q16_not_answered_pre_1415 <- NA

### Sets everyone to False meaning that initially say everyone answered all parts ###
data$Q16_not_answered_pre_1415[((is.na(data$Q16_a_pre_c_1415) == F) | (is.na(data$Q16_b_pre_c_1415) == F) | (is.na(data$Q16_c_pre_c_1415) == F)) & (data$year == "14-15")] <- F

### If ob did not answer all parts in 14-15, then 'not_answered' == T; Note that 15-16 and 16-17 stay NA's ###
data$Q16_not_answered_pre_1415[(is.na(data$Q16_a_pre_c_1415) == T) & (is.na(data$Q16_b_pre_c_1415) == T) & (is.na(data$Q16_c_pre_c_1415) == T) & (is.na(data$Q17_pre_c) == T) & (data$year == "14-15")] <- T

### Because Q16_not_answered has data for 15-16 & 16-17, we can coalesce with not_answered above ###
data$Q16_not_answered <- coalesce(data$Q16_not_answered_pre_1415, data$Q16_not_answered)

#### Creates the ultimate answered/did not answered check with an NA for rowSums later ####
data$Q16_check_pre <- 1
data$Q16_check_pre[data$Q16_not_answered == T] <- NA

### Creates not answered for 14-15 and sets everyone to NA to coalesce later ###
### Note this is for POST ###
data$Q16_not_answered_post_1415 <- NA

### Sets everyone to False meaning that initially say everyone answered all parts ###
data$Q16_not_answered_post_1415[((is.na(data$Q16_a_post_c_1415) == F) | (is.na(data$Q16_b_post_c_1415) == F) | (is.na(data$Q16_c_post_c_1415) == F)) & (data$year == "14-15")] <- F

### If ob did not answer all parts in 14-15, then 'not_answered' == T; Note that 15-16 and 16-17 stay NA's ###
data$Q16_not_answered_post_1415[(is.na(data$Q16_a_post_c_1415) == T) & (is.na(data$Q16_b_post_c_1415) == T) & (is.na(data$Q16_c_post_c_1415) == T) & (is.na(data$Q17_post_c) == T) & (data$year == "14-15")] <- T

### Because Q16_not_answered has data for 15-16 & 16-17, we can coalesce with not_answered above ###
data$Q16_not_answered_post <- coalesce(data$Q16_not_answered_post_1415, data$Q16_not_answered_post)

#### Creates the ultimate answered/did not answered check with an NA for rowSums later ####
data$Q16_check_post <- 1
data$Q16_check_post[data$Q16_not_answered_post == T] <- NA
```

### Semester fixing/renaming

```{r}
data$semester <- coalesce(data$semester, data$semester.1)
data$semester <- as.character(data$semester)

data$semester[data$semester == "spring"] <- "Spring"
data$semester[data$semester == "fall"] <- "Fall"
data$semester[data$semester == "fullyear" | data$semester == "full year"] <- "Full Year"

data$semester <- as.factor(data$semester)
data$semester <- droplevels(data$semester)
```

### Remaking Concept Scales

```{r}
### DC ###
data$Pre_DC_final <-(rowSums(data[ , c("Q16_pre_c_RW", "Q24_pre_c_RW", "Q27_pre_c_RW", "Q44_pre_c_RW")], 
                             na.rm = T))/4

data$Post_DC_final <- (rowSums(data[ , c("Q16_post_c_RW", "Q24_post_c_RW", "Q27_post_c_RW", "Q44_post_c_RW")], 
                               na.rm = T))/4

data$DC_gains_final <- data$Post_DC_final - data$Pre_DC_final

### DS ###
data$Pre_DS_final <-(rowSums(data[ , c("Q17_pre_c_RW", "Q21_pre_c_RW", "Q32_pre_c_RW", "Q33_pre_c_RW",
                                       "Q36_pre_c_RW", "Q40_pre_c_RW", "Q41_pre_c_RW")], na.rm = T))/7

data$Post_DS_final <- (rowSums(data[ , c("Q17_post_c_RW", "Q21_post_c_RW", "Q32_post_c_RW", "Q33_post_c_RW", 
                                         "Q36_post_c_RW", "Q40_post_c_RW", "Q41_post_c_RW")], na.rm = T))/7 

data$DS_gains_final <- data$Post_DS_final - data$Pre_DS_final

### CI ###
data$Pre_CI_final <-(rowSums(data[ , c("Q18_pre_c_RW", "Q19_pre_c_RW", "Q20_pre_c_RW", "Q26_pre_c_RW",
                                       "Q45_pre_c_RW", "Q46.a_pre_c_RW", "Q46.b_pre_c_RW")], na.rm = T))/7

data$Post_CI_final <- (rowSums(data[ , c("Q18_post_c_RW", "Q19_post_c_RW", "Q20_post_c_RW", "Q26_post_c_RW", 
                                         "Q45_post_c_RW", "Q46.a_post_c_RW", "Q46.b_post_c_RW")], na.rm = T))/7 

data$CI_gains_final <- data$Post_CI_final - data$Pre_CI_final

### ST ###
data$Pre_ST_final <-(rowSums(data[ , c("Q23_pre_c_RW", "Q24_pre_c_RW", "Q27_pre_c_RW", "Q28_pre_c_RW", 
                                       "Q29_pre_c_RW", "Q30_pre_c_RW", "Q31_pre_c_RW", "Q43_pre_c_RW", 
                                       "Q44_pre_c_RW", "Q47_pre_c_RW")], na.rm = T))/10

data$Post_ST_final <- (rowSums(data[ , c("Q23_post_c_RW", "Q24_post_c_RW", "Q27_post_c_RW", "Q28_post_c_RW",
                                         "Q29_post_c_RW", "Q30_post_c_RW", "Q31_post_c_RW", "Q43_post_c_RW", 
                                         "Q44_post_c_RW", "Q47_post_c_RW")], na.rm = T))/10

data$ST_gains_final <- data$Post_ST_final - data$Pre_ST_final

### Sim ###
data$Pre_Sim_final <-(rowSums(data[ , c("Q34_pre_c_RW", "Q35_pre_c_RW", "Q37_pre_c_RW", "Q38_pre_c_RW", "Q39_pre_c_RW")],
                              na.rm = T))/5

data$Post_Sim_final <- (rowSums(data[ , c("Q34_post_c_RW", "Q35_post_c_RW", "Q37_post_c_RW", "Q38_post_c_RW", 
                                          "Q39_post_c_RW")], na.rm = T))/5

data$Sim_gains_final <- data$Post_Sim_final - data$Pre_Sim_final
```

### Remaking Attitude Scales

```{r}
data$Affect_pre <- (rowSums(data[ , c("Q6.c_pre_a", "Q6.d_pre_a", "Q7.e_pre_a", "Q7.h_pre_a", "Q7.i_pre_a", 
                                      "Q8.h_pre_a")], na.rm = T)) / 6

data$Affect_post <- (rowSums(data[ , c("Q6.c_post_a", "Q6.d_post_a", "Q7.e_post_a", "Q7.h_post_a", "Q7.i_post_a",
                                       "Q8.h_post_a")], na.rm = T)) / 6

data$Affect_pre[data$Affect_pre == 0] <- NA
data$Affect_post[data$Affect_post == 0] <- NA
data$Affect_change <- data$Affect_post - data$Affect_pre


data$Cognitive.Competence_pre <- (rowSums(data[ , c("Q6.e_pre_a", "Q7.a_pre_a", "Q8.f_pre_a", "Q9.a_pre_a", "Q9.b_pre_a", 
                                                    "Q9.e_pre_a")], na.rm = T)) / 6

data$Cognitive.Competence_post <- (rowSums(data[ , c("Q6.e_post_a", "Q7.a_post_a", "Q8.f_post_a", "Q9.a_post_a", 
                                                     "Q9.b_post_a", "Q9.e_post_a")], na.rm = T)) / 6

data$Cognitive.Competence_pre[data$Cognitive.Competence_pre == 0] <- NA
data$Cognitive.Competence_post[data$Cognitive.Competence_post == 0] <- NA
data$Cog_change <- data$Cognitive.Competence_post - data$Cognitive.Competence_pre


data$Difficulty_pre <- (rowSums(data[ , c("Q6.f_pre_a", "Q6.h_pre_a", "Q8.b_pre_a", "Q8.d_pre_a", "Q8.j_pre_a", 
                                         "Q9.d_pre_a", "Q9.f_pre_a")], na.rm = T)) / 7

data$Difficulty_post <- (rowSums(data[ , c("Q6.f_post_a", "Q6.h_post_a", "Q8.b_post_a", "Q8.d_post_a", "Q8.j_post_a",
                                            "Q9.d_post_a", "Q9.f_post_a")], na.rm = T)) / 7

data$Difficulty_pre[data$Difficulty_pre == 0] <- NA
data$Difficulty_post[data$Difficulty_post == 0] <- NA
data$Difficulty_change <- data$Difficulty_post - data$Difficulty_pre


data$Effort_pre <- (rowSums(data[ , c("Q6.a_pre_a", "Q6.b_pre_a", "Q7.d_pre_a", "Q8.g_pre_a")], na.rm = T)) / 4

data$Effort_post <- (rowSums(data[ , c("Q6.a_post_a", "Q6.b_post_a", "Q7.d_post_a", "Q8.g_post_a")], na.rm = T)) / 4

data$Effort_pre[data$Effort_pre == 0] <- NA
data$Effort_post[data$Effort_post == 0] <- NA
data$Effort_change <- data$Effort_post - data$Effort_pre


data$Interest_pre <- (rowSums(data[ , c("Q7.b_pre_a", "Q7.j_pre_a", "Q8.c_pre_a", "Q8.i_pre_a")], na.rm = T)) / 4

data$Interest_post <- (rowSums(data[ , c("Q7.b_post_a", "Q7.j_post_a", "Q8.c_post_a", "Q8.i_post_a")], na.rm = T)) / 4

data$Interest_pre[data$Interest_pre == 0] <- NA
data$Interest_post[data$Interest_post == 0] <- NA
data$Interest_change <- data$Interest_post - data$Interest_pre


data$Value_pre <- (rowSums(data[ , c("Q6.g_pre_a", "Q6.i_pre_a", "Q6.j_pre_a", "Q7.c_pre_a", "Q7.f_pre_a", "Q7.g_pre_a",
                                     "Q8.a_pre_a", "Q8.e_pre_a", "Q9.c_pre_a")], na.rm = T)) / 9

data$Value_post <- (rowSums(data[ , c("Q6.g_post_a", "Q6.i_post_a", "Q6.j_post_a", "Q7.c_post_a", "Q7.f_post_a",
                                       "Q7.g_post_a", "Q8.a_post_a", "Q8.e_post_a", "Q9.c_post_a")], na.rm = T)) / 9

data$Value_pre[data$Value_pre == 0] <- NA
data$Value_post[data$Value_post == 0] <- NA
data$Value_change <- data$Value_post - data$Value_pre
```

### Creating Question Sets Variables; Go from 33 Q's to 24 Q's

```{r}
### Creating Sets for data pre ###
# data$Q16_pre_c_RW
data$Q181920_pre_c <- (rowSums(data[ , c("Q18_pre_c_RW", "Q19_pre_c_RW", "Q20_pre_c_RW")], na.rm = T)) / 3
data$Q28293031_pre_c <- (rowSums(data[ , c("Q28_pre_c_RW", "Q29_pre_c_RW", "Q30_pre_c_RW", 
                                           "Q31_pre_c_RW")], na.rm = T)) / 4
data$Q3233_pre_c <- (rowSums(data[, c("Q32_pre_c_RW", "Q33_pre_c_RW")], na.rm = T)) / 2
data$Q373839_pre_c <- (rowSums(data[, c("Q37_pre_c_RW", "Q38_pre_c_RW", "Q39_pre_c_RW")], na.rm = T)) / 3
data$Q4041_pre_c <- (rowSums(data[c("Q40_pre_c_RW", "Q41_pre_c_RW")], na.rm = T)) / 2

### Creating Sets for data post ###
# data$Q16_post_c_RW
data$Q181920_post_c <- (rowSums(data[ , c("Q18_post_c_RW", "Q19_post_c_RW", "Q20_post_c_RW")], na.rm = T)) / 3
data$Q28293031_post_c <- (rowSums(data[ , c("Q28_post_c_RW", "Q29_post_c_RW", "Q30_post_c_RW", 
                                            "Q31_post_c_RW")], na.rm = T)) / 4
data$Q3233_post_c <- (rowSums(data[, c("Q32_post_c_RW", "Q33_post_c_RW")], na.rm = T)) / 2
data$Q373839_post_c <- (rowSums(data[, c("Q37_post_c_RW", "Q38_post_c_RW", "Q39_post_c_RW")], na.rm = T)) / 3
data$Q4041_post_c <- (rowSums(data[c("Q40_post_c_RW", "Q41_post_c_RW")], na.rm = T)) / 2
```

### Remaking Percent Correct's

```{r}
### data pre/post.perc.33 ###
RWsPre_33 <- c(which(colnames(data) == "Q16_pre_c_RW"), which(colnames(data) == "Q17_pre_c_RW"), 
               which(colnames(data) == "Q18_pre_c_RW"),
               which(colnames(data) == "Q19_pre_c_RW") : which(colnames(data) == "Q47_pre_c_RW"))

RWsPost_33 <- c(which(colnames(data) == "Q16_post_c_RW"), which(colnames(data) == "Q17_post_c_RW"), 
                which(colnames(data) == "Q18_post_c_RW"),
                which(colnames(data) == "Q19_post_c_RW") : which(colnames(data) == "Q47_post_c_RW"))

RWsPre_24 <- c(which(colnames(data) == "Q16_pre_c_RW"), which(colnames(data) == "Q17_pre_c_RW"),
               which(colnames(data) == "Q21_pre_c_RW") : which(colnames(data) == "Q27_pre_c_RW"),
               which(colnames(data) == "Q34_pre_c_RW") : which(colnames(data) == "Q36_pre_c_RW"),
               which(colnames(data) == "Q42_pre_c_RW") : which(colnames(data) == "Q47_pre_c_RW"),
               which(colnames(data) == "Q181920_pre_c") : which(colnames(data) == "Q4041_pre_c"))

RWsPost_24 <- c(which(colnames(data) == "Q16_post_c_RW"), which(colnames(data) == "Q17_post_c_RW"),
                which(colnames(data) == "Q21_post_c_RW") : which(colnames(data) == "Q27_post_c_RW"),
                which(colnames(data) == "Q34_post_c_RW") : which(colnames(data) == "Q36_post_c_RW"),
                which(colnames(data) == "Q42_post_c_RW") : which(colnames(data) == "Q47_post_c_RW"),
                which(colnames(data) == "Q181920_post_c") : which(colnames(data) == "Q4041_post_c"))

data$pre.perc.33 <- (rowSums(data[ , RWsPre_33], na.rm = T)) / 33
data$post.perc.33 <- (rowSums(data[ , RWsPost_33], na.rm = T)) / 33
data$pre.perc.24 <- (rowSums(data[ , RWsPre_24], na.rm = T)) / 24
data$post.perc.24 <- (rowSums(data[ , RWsPost_24], na.rm = T)) / 24
```

### Fixing response rate

```{r}
RWsPre_33_RR <- c(which(colnames(data) == "Q16_check_pre"), which(colnames(data) == "Q17_pre_c"), 
                  which(colnames(data) == "Q18_pre_c"),
                  which(colnames(data) == "Q19_pre_c") : which(colnames(data) == "Q47_pre_c"))

RWsPost_33_RR <- c(which(colnames(data) == "Q16_check_post"), which(colnames(data) == "Q17_post_c"), 
                   which(colnames(data) == "Q18_post_c"),
                   which(colnames(data) == "Q19_post_c") : which(colnames(data) == "Q47_post_c"))

AttitudesPre_36 <- c(which(colnames(data) == "Q6.a_pre_a") : which(colnames(data) == "Q9.f_pre_a"))
AttitudesPost_36 <- c(which(colnames(data) == "Q6.a_post_a") : which(colnames(data) == "Q9.f_post_a"))

data$PRE_c_RR <- (33 - rowSums(is.na(data[ , RWsPre_33_RR]))) / 33 
data$POST_c_RR <- (33 - rowSums(is.na(data[ , RWsPost_33_RR]))) / 33
data$pre_a_rr <- (36 - rowSums(is.na(data[ , AttitudesPre_36]))) / 36
data$POST_a_RR <- (36 - rowSums(is.na(data[ , AttitudesPost_36]))) / 36
```

### Fixing Test time pre and post

```{r}
data$test.time.pre <- as.numeric(difftime(as.POSIXct(data$End.Time_pre, format = "%m/%d/%Y %H:%M"), as.POSIXct(data$Start.Time_pre, format = "%m/%d/%Y %H:%M"), units = "mins"))

data$test.time.post <- as.numeric(difftime(as.POSIXct(data$End.Time_post, format = "%m/%d/%Y %H:%M"), as.POSIXct(data$Start.Time_post, format = "%m/%d/%Y %H:%M"), units = "mins"))
```

### Fixing Carnegie Classification Variable

```{r}
data$CarnegieClassification[data$CarnegieClassification == "Baccalaureate Colleges"] <- "Baccalaureate College"
data$CarnegieClassification <- droplevels(data$CarnegieClassification)
```

### Fixing Position Classification

```{r}
data$position.classification.final <- NA
data$position.classification.final[data$position.classification == "High School Teacher"] <- "High School"
data$position.classification.final[data$position.classification == "Faculty (Tenured)"] <- "Tenured"
data$position.classification.final[data$position.classification == "Adjunct Faculty/Instructional Staff (Full Time)"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Faculty/lecturer (not adjunct, not tenure track)"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Other (please specify)"] <- "Other"
data$position.classification.final[data$position.classification == "Graduate Student"] <- "Graduate Student"
data$position.classification.final[data$position.classification == "Faculty (Tenure Track)"] <- "Tenure Track"
data$position.classification.final[data$position.classification == ""] <- "Other"
data$position.classification.final[data$position.classification == "Senior Instructor (instructional staff) - word adjunct is never used"] <- "Lecturer PT"
data$position.classification.final[data$position.classification == "Adjunct Faculty/Instructional Staff (Part Time)"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Visiting"] <- "Other"
data$position.classification.final[data$position.classification == "Senior Lecturer, non-tenure track"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "I am classified as an 'instructor' (full time). We do not have 'tenure track' faculty."] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Lecturer"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Lecturer (considered faculty but not tenure track/tenure)"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Other: Senior Instructor"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Senior Instructor"] <- "Lecturer FT"
data$position.classification.final[data$position.classification == "Visiting position"] <- "Other"
data$position.classification.final[data$position.classification == "goodwin"] <- NA
data$position.classification.final[data$position.classification == "Full time faculty non tenure track"] <- "Lecturer FT"

data$position.classification.final <- as.factor(data$position.classification.final)
```

### Advanced Stats Degree

```{r}
### Going to coalesce advanced stats degree with advanced stats degree other ###
data$advanced.stats.degree.original[data$advanced.stats.degree == ""] <- NA
data$advanced.stats.degree.original[data$advanced.stats.degree == "No"] <- "No"
data$advanced.stats.degree.original[data$advanced.stats.degree == "Yes - Other (please specify)"] <- NA
data$advanced.stats.degree.original[data$advanced.stats.degree == "Yes -ξMasters"] <- "Masters"
data$advanced.stats.degree.original[data$advanced.stats.degree == "Yes -ξPhD"] <- "PhD"
data$advanced.stats.degree.original[data$advanced.stats.degree == "Masters"] <- "Masters"
data$advanced.stats.degree.original[data$advanced.stats.degree == "PhD"] <- "PhD"
data$advanced.stats.degree.original[data$advanced.stats.degree == "PhD math"] <- "PhD"
data$advanced.stats.degree.original[data$advanced.stats.degree == "Yes"] <- NA

data$advanced.stats.degree.final[data$advanced.stats.degree.other == ""] <- NA
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "I took 16 hours of graduate level statistics during my M.S. in Mathematics"] <- "Masters Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "I'm 9 hours from completion of my Master's in Applied Statistics"] <- "Masters"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "Masters in Biostatistics"] <- "Masters"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "Masters in Mathematics with 16 graduate hours in statistics"] <- "Masters Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "Masters in Statistics, PhD in Educational Psychology emphasis in Stat Ed."] <- "Masters, PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "My PhD is officially in applied math, but my research specialty is statistical genetics."] <- "PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "PhD - Mathematical Sciences with statistics emphasis"] <- "PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "PhD in Applied Probability, enough stat courses for a master's in the 1970's"] <- "PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "PhD in Industrial Engineering/Management Sciences"] <- "PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "PhD in Mathematics Education focusing in Statistics Education"] <- "PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "PhD in statistics education, masters in statistics"] <- "Masters, PhD Other"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "PhD Mathematical Sciences - statisitcs"] <- "PhD"
data$advanced.stats.degree.final[data$advanced.stats.degree.other == "Quantitative emphasis (similar to minor) for Experimental Psychology PhD"] <- "PhD Other"


data$advanced.stats.degree.final <- coalesce(data$advanced.stats.degree.original, data$advanced.stats.degree.final)
data$advanced.stats.degree.final[is.na(data$advanced.stats.degree.final) == T] <- NA
data$advanced.stats.degree.final <- as.factor(data$advanced.stats.degree.final)
```

### Fixing Primary New Obtainment

```{r}
data$primary.new.content.obtainment.final <- NA
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Guided Activity"] <- "Guided Activity"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Overview Lecture"] <- "Overview Lecture"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Other (please explain below)"] <- "Other"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Reading Assignment"] <- "Reading Assignment"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == ""] <- "Other"

data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Overview Lecture / integrated activities"] <- "Overview Lecture"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Reading Assignment in 'theory' I don't believe that most achieve this.  Students who don't like to read can use the videos that are associated with the textbook."] <- "Reading Assignment"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Mixture of the three.  Majority of the time reading assignment and guided activity."] <- "Reading Assignment"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "overview lecture/biweekly labs"] <- "Overview Lecture"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "pre-reading and inclass activity"] <- "Reading Assignment"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "The class is about equally split between lecture and guided activities"] <- "Overview Lecture"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "A combination of lectures (with discussion) and activities in the classroom; about the same amount of time on each. There were also lab assignments to supplement book homework (and the book homework was online)"] <- "Overview Lecture"
data$primary.new.content.obtainment.final[is.na(data$primary.new.content.obtainment) == 1] <- NA
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "PowerPoint overview, partner-based explorations and activities -- often completed outside of class"] <- "Overview Lecture"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Students mostly learned through homeworks."] <- "Other"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "In general, I gave a brief overview, but we spend most of the class session working in groups on the Explorations in the text."] <- "Guided Activity"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Since STAT 132 is primarily online, students studied the textbook and used the explorations to learn the material."] <- "Other"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Lab"] <- "Other"
data$primary.new.content.obtainment.final[data$primary.new.content.obtainment == "Overview lecture / labs"] <- "Overview Lecture"

data$primary.new.content.obtainment.final <- as.factor(data$primary.new.content.obtainment.final)
```

### Anonymizing Instructor Name

```{r}
### Changes Instructor Name to Number ###
data$instructor.last.name <- as.character(data$instructor.last.name)
data$instructor.last.name[data$instructor.last.name == "Clark" & data$instructor.first.name == "Beth"] <- "ClarkB"
data$instructor.last.name[data$instructor.last.name == "Clark" & data$instructor.first.name == "Julie"] <- "ClarkJ"
data$instructor.last.name[data$instructor.last.name == "Johnson" & data$instructor.first.name == "Leigh"] <- "JohnsonL"
data$instructor.last.name[data$instructor.last.name == "Johnson" & data$instructor.first.name == "Jake"] <- "JohnsonJ"
data$instructor.last.name[data$instructor.last.name == "Kramer" & data$institution == "Dordt College"] <- "KramerDordt"
data$instructor.last.name[data$instructor.last.name == "Kramer_College" & data$institution == "Dordt College"] <- "KramerDordt"
data$instructor.last.name[data$instructor.last.name == "Kramer_DordtCollege" & data$institution == "Dordt College"] <- "KramerDordt"
data$instructor.last.name[data$instructor.last.name == "Kramer" & data$institution == "KramerUnity"] <- "KramerUnity"
data$instructor.last.name[data$instructor.last.name == "Kramer_HighSchool" & data$institution == "Unity"] <- "KramerUnity"
data$instructor.last.name[data$instructor.last.name == "Kramer_UnityHighSchool"] <- "KramerUnity"
data$instructor.last.name[data$instructor.last.name == "Peterson" & data$institution == "Mona Shores High School"] <- "PetersonHS"
data$instructor.last.name[data$instructor.last.name == "Peterson" & data$institution == "Illinois Central College"] <- "PetersonCC"
data$instructor.last.name[data$instructor.last.name == "Ross" & data$year == "14-15"] <- "RossK"
data$instructor.last.name[data$instructor.last.name == "Ross" & data$instructor.first.name == "Andrew"] <- "RossA"
data$instructor.last.name[data$instructor.last.name == "Ross" & data$instructor.first.name == "Kevin"] <- "RossK"
data$instructor.last.name[data$instructor.last.name == "Ziegler-Will" & data$instructor.first.name == "Katie"] <- "Ziegler-WillK"
data$instructor.last.name[data$instructor.last.name == "Ziegler-Will" & data$instructor.first.name == "Laura"] <- "Ziegler-WillL"
data$instructor.last.name[data$instructor.last.name == "ZieglerBerry"] <- "Ziegler-Berry"
data$instructor.last.name[data$instructor.last.name == "ZieglerDaSilva"] <- "Ziegler-DaSilva"
data$instructor.last.name[data$instructor.last.name == "ZieglerMichaud"] <- "Ziegler-Michaud"
data$instructor.last.name[data$instructor.last.name == "ZieglerRutter"] <- "Ziegler-Rutter"
data$instructor.last.name[data$instructor.last.name == "ZieglerSong" & data$instructor.first.name == "Laura"] <- "Ziegler-SongL"
data$instructor.last.name[data$instructor.last.name == "ZieglerSong" & data$instructor.first.name == "Taikgun"] <- "Ziegler-SongT"
data$instructor.last.name[data$instructor.last.name == "ZieglerStephenson"] <- "Ziegler-Stephenson"
data$instructor.last.name[data$instructor.last.name == "Linton" | data$instructor.last.name == "LintonISCAM"] <- "Linton"
data$instructor.last.name[data$instructor.last.name == "GopaulF"] <- "Gopaul"
data$instructor.last.name <- as.factor(data$instructor.last.name)

data$instructor.gender[data$instructor.last.name == "Echols" & data$instructor.first.name == "Lacey" & data$year == "15-16"] <- "Female"

temp <- mapvalues((data$instructor.last.name), from = unique(data$instructor.last.name), 
                  to = c(1:length((unique(data$instructor.last.name)))))

### Assigns Instructor Number to Data ###
data$instructor.anonymized <- paste0("Instructor", temp)
data$instructor.anonymized <- as.factor(data$instructor.anonymized)

### Combines Instructor Number to Section and Semester ###
data$InstructorAnonymized_Section_Semester <- paste0(data$instructor.anonymized, "_Section", data$section, "_", data$semester, "_", data$year)

data$InstructorAnonymized_Section_Semester <- as.factor(data$InstructorAnonymized_Section_Semester)
```

### Fixing InstructorName_Section_Semester

```{r}
data$InstructorName_Section_Semester2 <- paste0(data$instructor.last.name, "_Section", data$section, "_", 
                                                data$semester, "_", data$year)

data$InstructorName_Section_Semester2 <- as.factor(data$InstructorName_Section_Semester2)
```

### Anonymizing Institution

```{r}
data$institution <- as.character(data$institution)
data$institution[data$institution == "Austin Community college"] <- "Austin Community College"
data$institution[data$institution == "Cal Poly"] <- "Cal Poly, San Luis Obispo"
data$institution[data$institution == "Montana State University "] <- "Montana State University"
data$institution[data$institution == "KramerUnity"] <- "Unity"
data$institution[data$institution == "Unity "] <- "Unity"
data$institution[data$institution == "University of Nebraska- Lincoln"] <- "University of Nebraska-Lincoln"
data$institution[data$institution == "University of Nebraska, Lincoln"] <- "University of Nebraska-Lincoln"
data$institution[data$institution == "Indiana University"] <- "Indiana University Bloomington"
data$institution <- as.factor(data$institution)

data$institution.anonymized <- mapvalues((data$institution), from = unique(data$institution),
                                         to = c(1:length(unique(data$institution))))

data$institution.anonymized <- as.factor(data$institution.anonymized)
```

### Fixing Carnegie Classification Specific Cases

```{r}
data$CarnegieClassification <- as.character(data$CarnegieClassification)
data$CarnegieClassification[data$institution == "Gustavus Adolphus College"] <- "Baccalaureate College"
data$CarnegieClassification[data$institution == "Pacific University"] <- "Doctoral Universities"
data$CarnegieClassification[data$institution == "Univ of St Thomas"] <- "Doctoral Universities"
data$CarnegieClassification[data$institution == "Loyola Marymount University"] <- "Doctoral Universities"
data$CarnegieClassification[data$institution == "Keene State College"] <- "Baccalaureate College"
data$CarnegieClassification[data$institution == "Valparaiso University"] <- "Doctoral Universities"
data$CarnegieClassification[data$institution == "Rowan University"] <- "Doctoral Universities"
data$CarnegieClassification[data$institution == "Shawnee State University"] <- "Master's"
data$CarnegieClassification[data$institution == "Indiana University Bloomington"] <- "Doctoral Universities"
data$CarnegieClassification[data$institution == "Indian River State College"] <- "Baccalaureate College"
data$CarnegieClassification <- as.factor(data$CarnegieClassification)
```

### TA

```{r}
data$TA <- as.character(data$TA)
data$TA[data$TA == "" | data$TA == " "] <- NA
data$TA <- as.factor(data$TA)
```

### Test Order Pre/Post

```{r}
data$Test.Order_pre[data$Test.Order_pre == 2] <- "Attitudes First"
data$Test.Order_pre[data$Test.Order_pre == 3] <- "Concepts First"
data$Test.Order_pre <- as.factor(data$Test.Order_pre)
data$Test.Order_pre <- droplevels(data$Test.Order_pre)

data$Test.Order_post[data$Test.Order_post == 1] <- NA
data$Test.Order_post[data$Test.Order_post == 2] <- "Attitudes First"
data$Test.Order_post[data$Test.Order_post == 3] <- "Concepts First"
data$Test.Order_post <- as.factor(data$Test.Order_post)
data$Test.Order_post <- droplevels(data$Test.Order_post)
```

### Textbook Classification

```{r}
data$textbook.classification <- as.character(data$textbook.classification)
data$textbook.classification[data$textbook.classification=="ISCAM"] <- "ISCAM"
data$textbook.classification[data$textbook.classification=="ISI"] <- "ISI"
data$textbook.classification[data$textbook.classification=="ISIfirst"] <- "ISI1st"
data$textbook.classification[data$textbook.classification=="notSBI"] <- "NotSBI"
data$textbook.classification[data$textbook.classification=="notSBI2"] <- "NotSBI2"
data$textbook.classification[data$textbook.classification=="otherSBI"] <- "OtherSBI"
data$textbook.classification[data$textbook.classification=="own"] <- "Other"
data$textbook.classification[data$textbook.classification=="ISI1st"] <- "ISI1st"
data$textbook.classification[data$textbook.classification=="None"] <- "Other"
data$textbook.classification[data$textbook.classification=="NotSBI1"] <- "NotSBI"
data$textbook.classification[data$textbook.classification=="NotSBI2"] <- "NotSBI2"
data$textbook.classification[data$textbook.classification=="OtherSBI"] <- "OtherSBI"
data$textbook.classification[data$textbook.classification=="NotSBI"] <- "NotSBI"

data$textbook.classification[data$instructor.last.name == "Linton" & data$math.prereq != "None"] <- "ISI"

data$textbook.classification <- as.factor(data$textbook.classification)
```

### Field_pre/post Renaming

```{r}
data$field_pre_new_final <- mapvalues(data$field_pre, from = c(1:4), 
                                      to = c("Social sciences", "Natural and applied sciences",
                                             "Arts and humanities", "Other"))

data$field_pre_new_final <- as.factor(data$field_pre_new_final)
data$field_post_new_final <- mapvalues(data$field_post, from = c(1:4), 
                                       to = c("Social sciences", "Natural and applied sciences",
                                              "Arts and humanities", "Other"))

data$field_post_new_final <- as.factor(data$field_post_new_final)
```

### Grade_expectation_pre/post renaming

```{r}
data$grade_expectation_pre_final <- mapvalues(data$grade_expectation_pre, from = c(1:13), 
                                              to = c("A+", "A", "A-", "B+", "B", "B-",
                                                     "C+", "C", "C-", "D+", "D", "D-", "F"))

data$grade_expectation_pre_final <- as.factor(data$grade_expectation_pre_final)

data$grade_expectation_post_final <- mapvalues(data$grade_expectation_post, from = c(1:13), 
                                               to = c("A+", "A", "A-", "B+", "B", "B-",
                                                      "C+", "C", "C-", "D+", "D", "D-", "F"))

data$grade_expectation_post_final <- as.factor(data$grade_expectation_post_final)
```

### Admin.location Fixing

```{r}
### PRE ###
data$admin.pre.location <- as.character(data$admin.pre.location)
data$admin.pre.location[data$admin.pre.location == "" | is.na(data$admin.pre.location)] <- NA
data$admin.pre.location <- as.factor(data$admin.pre.location)

### POST ###
data$admin.post.location <- as.factor(data$admin.post.location)
levels(data$admin.post.location) <-c(NA, "In Class", "In Class", "In Class", "In Class", "In Class", "Out of Class", "In Class")
data$admin.post.location <- as.character(data$admin.post.location)
data$admin.post.location[is.na(data$admin.post.location) == T] <- NA
data$admin.post.location <- as.factor(data$admin.post.location)
```

### Admin Time

```{r}
### PRE ###
data$admin.pre.time <- as.character(data$admin.pre.time)
data$admin.pre.time[data$admin.pre.time == ""] <- NA
data$admin.pre.time[is.na(data$admin.pre.time) == T] <- NA
data$admin.pre.time[data$admin.pre.time == "Did not give"] <- NA
data$admin.pre.time <- as.factor(data$admin.pre.time)

### POST ###
data$admin.post.time <- as.character(data$admin.post.time)
data$admin.post.time[data$admin.post.time == ""] <- NA
data$admin.post.time[is.na(data$admin.post.time) == T] <- NA
data$admin.post.time[data$admin.post.time == "Did not give post-test"] <- NA
data$admin.post.time <- as.factor(data$admin.post.time)
```

### Accountability.assignments_none renaming

```{r}
data$reading_quiz <- mapvalues(data$accountability.assignements_reading.quiz, 
                               from = c("", "Reading quizzes", "Reading quizzes (section 3)"),
                               to = c("No", "Yes", "Yes"))

data$reading_quiz <- as.factor(data$reading_quiz)
data$reading_quiz <- droplevels(data$reading_quiz)

data$graded_homework <- mapvalues(data$accountability.assignments_graded.homework, 
                                  from = levels(data$accountability.assignments_graded.homework),
                                  to = c("No", "Yes", "Yes", "Yes"))

data$graded_homework <- as.factor(data$graded_homework)
data$graded_homework <- droplevels(data$graded_homework)

data$graded_lab_activities <- mapvalues(data$accountability.assignments_graded.lab.activities,
                                        from = levels(data$accountability.assignments_graded.lab.activities),
                                        to = c("No", "Yes", "Yes", "Yes", "Yes"))
data$graded_lab_activities <- as.factor(data$graded_lab_activities)
data$graded_lab_activities <- droplevels(data$graded_lab_activities)
```

### ISI workshop

```{r}
data$isi.workshop <- as.character(data$isi.workshop)
data$isi.workshop[data$isi.workshop == ""] <- NA
data$isi.workshop <- as.factor(data$isi.workshop)
```

### Student Status fixing and renaming

```{r}
data$student_status_pre <- coalesce(data$student_status_pre, data$student_status_post)
data$status <- coalesce(data$status, data$student_status_pre)

data$status_final <- mapvalues(data$status, from = c(0:8),
                               to = c("Other", "High School Student", "Freshman in college", "Sophomore in college",
                                      "Junior in college", "Senior in college", "Fifth or more year in college",
                                      "Non-traditional/part-time student in college", "Graduate Student"))

data$status_final <- as.factor(data$status_final)
```

### Days meet renaming

```{r}
data$days.meet <- as.character(data$days.meet)
data$days.meet.final <- NA
data$days.meet.final[data$days.meet == "M,T,W,F"] <- "MTWF"
data$days.meet.final[data$days.meet == "MTWR"] <- "MTWR"
data$days.meet.final[data$days.meet == "MTWF"] <- "MTWF"
data$days.meet.final[data$days.meet == "Tuesday-Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "STAT 131 T/TH Section 1"] <- "TR"
data$days.meet.final[data$days.meet == "Monday Wednesday Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "STAT 131 T/TH Section 2"] <- "TR"
data$days.meet.final[data$days.meet == "STAT 131 T/TH Section 3"] <- "TR"
data$days.meet.final[data$days.meet == "TuTh"] <- "TR"
data$days.meet.final[data$days.meet == "Monday, Wedneday, Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "Tuesday, Thursday"] <- "TR"
data$days.meet.final[data$days.meet == ""] <- "Other"
data$days.meet.final[data$days.meet == "Met every other day: Monday, Wednesday, Friday one week, Tuesday and Thursday the next"] <- "Other"
data$days.meet.final[data$days.meet == "8 sections merged into one class (2 lectures and 2 labs each week)"] <- "Other"
data$days.meet.final[data$days.meet == "MTWRF"] <- "MTWRF"
data$days.meet.final[data$days.meet == "M,T,W,Th,F"] <- "MTWRF"
data$days.meet.final[data$days.meet == "Classes meet 6 days out of a 7-day rotation"] <- "Other"
data$days.meet.final[data$days.meet == "MTThF"] <- "MTRF"
data$days.meet.final[data$days.meet == "Mondays Wednesdays and Fridays"] <- "MWF"
data$days.meet.final[data$days.meet == "Monday, Wednesday, and Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "Class met 6 days out of 7 on a rotating schedule"] <- "Other"
data$days.meet.final[data$days.meet == "M,W,F"] <- "MWF"
data$days.meet.final[data$days.meet == "TTh "] <- "TR"
data$days.meet.final[data$days.meet == "online"] <- "Online"
data$days.meet.final[data$days.meet == "Monday/Wednesday/Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "Tuesday/Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "Every day"] <- "MTWRF"
data$days.meet.final[data$days.meet == "M W F"] <- "MWF"
data$days.meet.final[data$days.meet == "1"] <- "Other"
data$days.meet.final[data$days.meet == "Tues/Thurs"] <- "TR"
data$days.meet.final[data$days.meet == "MWF "] <- "MWF"
data$days.meet.final[data$days.meet == "MWF"] <- "MWF"
data$days.meet.final[data$days.meet == "MEG"] <- "MWF"
data$days.meet.final[data$days.meet == "M,T, Th, F"] <- "MTRF"
data$days.meet.final[data$days.meet == "M, T,W, F"] <- "MTWF"
data$days.meet.final[data$days.meet == "Section 21"] <- "Other"
data$days.meet.final[data$days.meet == "13"] <- "Other"
data$days.meet.final[data$days.meet == "7 out of 10 day cycle"] <- "Other"
data$days.meet.final[data$days.meet == "Monday, Tuesday, Thursday, Friday"] <- "MTRF"
data$days.meet.final[data$days.meet == "Tuesday and Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "MWThF"] <- "MWRF"
data$days.meet.final[data$days.meet == "WF "] <- "WF"
data$days.meet.final[data$days.meet == "Monday, Wednesday, Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "Tuesday & Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "MWF one week then TR the next, repeat"] <- "Other"
data$days.meet.final[data$days.meet == "Tue/Thurs"] <- "TR"
data$days.meet.final[data$days.meet == "Tuesdays and Thursdays"] <- "TR"
data$days.meet.final[data$days.meet == "section 8 met Monday, Wednesday, Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "Wednesday & Fridays"] <- "WF"
data$days.meet.final[data$days.meet == "A (odd days)"] <- "Other"
data$days.meet.final[data$days.meet == "B (even days)"] <- "Other"
data$days.meet.final[data$days.meet == "MW 8 - 9.20am, F 8.30-9.20am"] <- "MWF"
data$days.meet.final[data$days.meet == "M-F"] <- "MTWRF"
data$days.meet.final[data$days.meet == "MWF Dordt"] <- "MWF"
data$days.meet.final[data$days.meet == "MWF  Dordt"] <- "MWF"
data$days.meet.final[data$days.meet == "MTWF Unity"] <- "MTWF"
data$days.meet.final[data$days.meet == "Monday, Thursday, Friday, Saturday"] <- "Other"
data$days.meet.final[data$days.meet == "Monday, Tuesdat, Wednesday, Friday"] <- "MTWF"
data$days.meet.final[data$days.meet == "Monday, Wednesday, Friday (lecture), Tuesday (lab)"] <- "MTWF"
data$days.meet.final[data$days.meet == "T/TH "] <- "TR"
data$days.meet.final[data$days.meet == "Mw"] <- "MW"
data$days.meet.final[data$days.meet == "MW"] <- "MW"
data$days.meet.final[data$days.meet == "Tr"] <- "TR"
data$days.meet.final[data$days.meet == "TR"] <- "TR"
data$days.meet.final[data$days.meet == "T/Th"] <- "TR"
data$days.meet.final[data$days.meet == "Monday, Tuesday, Wednesday, Thursday, Friday"] <- "MTWRF"
data$days.meet.final[data$days.meet == "Monday, Wedenesday, Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "Monday, Tuesday, Wednesday, Friday"] <- "MTWF"
data$days.meet.final[data$days.meet == "Monday Tuesday Wednesday Friday"] <- "MTWF"
data$days.meet.final[data$days.meet == "T & Th"] <- "TR"
data$days.meet.final[data$days.meet == "Mon, Wed, Fri"] <- "MWF"
data$days.meet.final[data$days.meet == "Tues, Thurs"] <- "TR"
data$days.meet.final[data$days.meet == "Mon-Fr"] <- "MTWRF"
data$days.meet.final[data$days.meet == "Tuesday Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "Tuesday and Thursday "] <- "TR"
data$days.meet.final[data$days.meet == "Monday, Wednesday, Thursday, Friday"] <- "MWRF"
data$days.meet.final[data$days.meet == "MWR"] <- "MWR"
data$days.meet.final[data$days.meet == "Tue/Thu"] <- "TR"
data$days.meet.final[data$days.meet == "10"] <- "Other"
data$days.meet.final[data$days.meet == "Tuesday, Thursday "] <- "TR"
data$days.meet.final[data$days.meet == "Tues & Thurs"] <- "TR"
data$days.meet.final[data$days.meet == "MWTh"] <- "MTR"
data$days.meet.final[data$days.meet == "Mon, Wed, Thurs, Fri"] <- "MWRF"
data$days.meet.final[data$days.meet == "Tuesday&Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "Monday, Wednesday, &Friday"] <- "MWF"
data$days.meet.final[data$days.meet == "T/TH/F"] <- "TRF"
data$days.meet.final[data$days.meet == "TRF"] <- "TRF"
data$days.meet.final[data$days.meet == "Monday - Wednesday, then friday"] <- "MTWF"
data$days.meet.final[data$days.meet == "Monday - Wednesday, then Friday"] <- "MTWF"
data$days.meet.final[data$days.meet == "Monday,Tuesday,Thursday,Friday"] <- "MTRF"
data$days.meet.final[data$days.meet == "Monday,Tuesday,Wednesday,Friday"] <- "MTWF"
data$days.meet.final[data$days.meet == "every day"] <- "MTWRF"
data$days.meet.final[data$days.meet == "Alternating Block schedule"] <- "Other"
data$days.meet.final[data$days.meet == "Tuesday/Thursday"] <- "TR"
data$days.meet.final[data$days.meet == "Lecture TR, Lab F"] <- "TRF"
data$days.meet.final[data$days.meet == "Lecture MW;  Lab R"] <- "MWR"
data$days.meet.final[data$days.meet == "Tuesday, Thursday, Friday (lab)"] <- "TRF"
data$days.meet.final[data$days.meet == "Lecture MW; Lab R"] <- "MWR"
data$days.meet.final[data$days.meet == "Tuesday, Thursdays, Fridays"] <- "TRF"
data$days.meet.final[data$days.meet == "Lecture T R, LabF"] <- "TRF"
data$days.meet.final[data$days.meet == "Lecture TR;  Lab D"] <- "TR"
data$days.meet.final[data$days.meet == "Monday, Wednesday, Thursday"] <- "MWR"
data$days.meet.final[data$days.meet == "Lecture TR;  Lab F"] <- "TRF"
data$days.meet.final[data$days.meet == "Lecture TR; Lab F"] <- "TRF"
data$days.meet.final[data$days.meet == " Lecture MW, Lab R"] <- "MWR"
data$days.meet.final[data$days.meet == "MWRF"] <- "MWRF"
data$days.meet.final[data$days.meet == "MTWR"] <- "MTWR"
data$days.meet.final[data$days.meet == "MTWRF"] <- "MTWRF"
data$days.meet.final[data$days.meet == "TWR"] <- "TWR"
data$days.meet.final[data$days.meet == "Onine"] <- "Online"

data$days.meet.final[data$instructor.last.name == "Darcy" & data$year == "16-17"] <- "MWF"
data$days.meet.final[data$instructor.last.name == "Quartey" & data$year == "16-17"] <- "Other"

data$time.meet.final[data$instructor.last.name == "Quartey" & data$year == "16-17" & data$section == 1] <- "2 pm to 6 pm"

data$days.meet.final <- as.factor(data$days.meet.final)
```

### Fixing SAT and ACT

```{r}
data$math_satact_flag <- coalesce(data$math_satact_flag_pre, data$math_satact_flag)
data$math_satact_flag <- coalesce(data$math_satact_flag, data$math_satact_flag_post)

data$math_satact_flag[data$math_satact_flag == 1] <- "SAT"
data$math_satact_flag[data$math_satact_flag == 2] <- "ACT"
data$math_satact_flag[data$math_satact_flag == 3] <- NA
data$math_satact_flag <- as.factor(data$math_satact_flag)
```

### Fixing supplemental material

```{r}
data$supplemental.textbook <- coalesce(data$supplemental.textbook, data$no.supplemental.textbook)
```

### Creating gain_24

```{r}
data$gain_24 <- data$post.perc.24 - data$pre.perc.24

### Created to maintain order of variables in final data set and in codebook ###
data$new_ach_gain <- NA
```

### Institution Classification

```{r}
# levels(data$institution.classification) <-c("", "Community College", "Comprehensive University - a few master's degrees + 4 bachelor's", "Four-Year College", "High School", "Community College", "University (grant advanced degrees)", "University (grant advanced degrees)", "Four-Year College", "Other (Canada)")
```

### Specific Anomalies

```{r}
data$advanced.stats.degree.type[data$instructor.last.name == "Fry"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "Obiri"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "Anderson"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Buchanan"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "Echols"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Henle"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Hooks"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Kay"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Klanderman"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Lock"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Mack"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Meyers"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Nordmoe"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Rifkin"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Robison-Cox"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "RossK" & data$institution == "Cal Poly, San Luis Obispo"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Roy"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Schmidt"] <- "PhD"
data$advanced.stats.degree.type[data$instructor.last.name == "Swanson"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "Theobold"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "Tran"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "VanderStoep"] <- "Masters"
data$advanced.stats.degree.type[data$instructor.last.name == "Will"] <- "No"
data$advanced.stats.degree.type[data$instructor.last.name == "Yager"] <- "Masters"


data$isi.workshop[data$instructor.last.name == "Yager"] <- "Yes"
data$isi.workshop[data$instructor.last.name == "Quartey"] <- "No"
data$isi.workshop[data$instructor.last.name == "Obiri" & data$year == "15-16"] <- "No"
data$isi.workshop[data$instructor.last.name == "Anderson"] <- "No"
data$isi.workshop[data$instructor.last.name == "Rifkin"] <- "No"

# data %>%
#   select(institution, department.type, instructor.last.name) %>%
#   unique() %>%
#   arrange(institution) %>%
#   group_by(institution) %>%
#   mutate(temp = n_distinct(department.type)) %>%
#   filter(temp > 1)


data$department.type[data$institution == "Chandler-Gilbert Community College"] <- "Math"
data$department.type[data$institution == "Dordt College"] <- "Stats"
data$department.type[data$institution == "Friends Seminary"] <- "Math"
data$department.type[data$institution == "Holland Christian High School"] <- "Math"
data$department.type[data$institution == "Middletown HS"] <- "Math"
data$department.type[data$institution == "Monmouth College"] <- "Math"
data$department.type[data$institution == "Montana State University"] <- "Stats"
data$department.type[data$institution == "Montgomery Blair HS"] <- "Math"
data$department.type[data$institution == "Northern Arizona University"] <- "Stats"
data$department.type[data$institution == "North Penn High School"] <- "Math"
data$department.type[data$institution == "Ouachita Baptist University"] <- "Math"
data$department.type[data$institution == "Pacific University"] <- "Math"
data$department.type[data$institution == "Unity"] <- "Math"
data$department.type[data$institution == "University of Minnesota"] <- "Other"
data$department.type[data$institution == "Vassar College"] <- "Stats"
data$department.type[data$institution == "Winona State University"] <- "Stats"

data$is.stats.department[data$department.type=="Stats"] <- "Stats"
data$is.stats.department[data$department.type=="Math"] <- "Not Stats"
data$is.stats.department[data$department.type=="Other"] <- "Not Stats"
data$is.stats.department <- as.factor(data$is.stats.department)


data$position.classification.final[data$instructor.last.name == "Grapevine"] <- "Lecturer FT"


data$institution[data$instructor.last.name == "Echols"] <- "Butler University"
data$carnegie.classification[data$instructor.last.name == "Echols"] <- 	"Master's"


data$class.size.start[data$instructor.last.name == "KramerUnity" & data$year == "15-16"] <- 10


data$gaise.familiar[data$instructor.anonymized == "Instructor120" & data$year == "16-17"] <- "I am not familiar with GAISE" 
data$gaise.familiar[data$instructor.anonymized == "Instructor128" & data$year == "16-17"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor15" & data$year == "16-17"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor28" & data$year == "16-17"] <- "Mostly"
data$gaise.familiar[data$instructor.anonymized == "Instructor30" & data$year == "16-17"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor35" & data$year == "16-17"] <- "Mostly"
data$gaise.familiar[data$instructor.anonymized == "Instructor4" & data$year == "16-17"] <- "Mostly"
data$gaise.familiar[data$instructor.anonymized == "Instructor45" & data$year == "16-17"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor46" & data$year == "16-17"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor63" & data$year == "16-17"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor64" & data$year == "16-17"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor11" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor121" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor128" & data$year == "15-16"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor134" & data$year == "15-16"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor137" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor140" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor145" & data$year == "15-16"] <- "I am not familiar with GAISE"
data$gaise.familiar[data$instructor.anonymized == "Instructor147" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor153" & data$year == "15-16"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor159" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor160" & data$year == "15-16"] <- "Unsure"
data$gaise.familiar[data$instructor.anonymized == "Instructor183" & data$year == "15-16"] <- "Mostly"
data$gaise.familiar[data$instructor.anonymized == "Instructor189" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor190" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor63" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor65" & data$year == "15-16"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor81" & data$year == "15-16"] <- "Completely"

data$gaise.familiar[data$instructor.anonymized == "Instructor11" & data$year == "14-15"] <- "Completely"
data$gaise.familiar[data$instructor.anonymized == "Instructor130" & data$year == "14-15"] <- "I am not familiar with GAISE"
data$gaise.familiar[data$instructor.anonymized == "Instructor28" & data$year == "14-15"] <- "Mostly"
data$gaise.familiar[data$instructor.anonymized == "Instructor59" & data$year == "14-15"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor63" & data$year == "14-15"] <- "Some"
data$gaise.familiar[data$instructor.anonymized == "Instructor68" & data$year == "14-15"] <- "Completely"


data$analyzing.data.experience[data$instructor.anonymized == "Instructor121" & data$year == "16-17"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor122" & data$year == "16-17"] <- "No Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor128" & data$year == "16-17"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor23" & data$year == "16-17"] <- "No Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor35" & data$year == "16-17"] <- "A lot of Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor39" & data$year == "16-17"] <- "Very Little Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor5" & data$year == "16-17"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor55" & data$year == "16-17"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor81" & data$year == "16-17"] <- "A lot of Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor115" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor121" & data$year == "15-16"] <- "Very Little Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor144" & data$year == "15-16"] <- "A lot of Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor145" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor147" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor154" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor166" & data$year == "15-16"] <- "Very Little Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor176" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor186" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor189" & data$year == "15-16"] <- "Very Little Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor190" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor63" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor67" & data$year == "15-16"] <- "No Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor81" & data$year == "15-16"] <- "A lot of Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor93" & data$year == "15-16"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor130" & data$year == "14-15"] <- "Very Little Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor177" & data$year == "14-15"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor181" & data$year == "14-15"] <- "Very Little Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor222" & data$year == "14-15"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor28" & data$year == "14-15"] <- "Some Experience"
data$analyzing.data.experience[data$instructor.anonymized == "Instructor68" & data$year == "14-15"] <- "A lot of Experience"


data$class.meet.weeks.ind[data$institution.anonymized == 5] <- "semester"
data$class.meet.weeks.ind[data$institution.anonymized == 34] <- "semester"


data$years.teaching.intro.stats[data$instructor == "Instructor35"] <- 5.5
data$years.teaching.intro.stats[data$instructor == "Instructor76" & data$year == "15-16"] <- 5
data$years.teaching.intro.stats[data$instructor == "Instructor81" & data$year == "15-16"] <- 1
data$years.teaching.intro.stats[data$instructor == "Instructor130" & data$year == "14-15"] <- 0


### Creates binned versions of years teaching and percent lecture ###
data$years.teaching.intro.stats.binned<- NA
data$years.teaching.intro.stats.binned[data$years.teaching.intro.stats >= 0 & data$years.teaching.intro.stats <= 5] <- "0-5"
data$years.teaching.intro.stats.binned[data$years.teaching.intro.stats > 5 & data$years.teaching.intro.stats <= 10] <- "5-10"
data$years.teaching.intro.stats.binned[data$years.teaching.intro.stats > 10 & data$years.teaching.intro.stats <= 20] <- "10-20"
data$years.teaching.intro.stats.binned[data$years.teaching.intro.stats > 20 & data$years.teaching.intro.stats <= 30] <- "20-30"
data$years.teaching.intro.stats.binned[data$years.teaching.intro.stats > 30] <- "30+"
data$years.teaching.intro.stats.binned[is.na(data$years.teaching.intro.stats) == T] <- NA
data$years.teaching.intro.stats.binned <- as.factor(data$years.teaching.intro.stats.binned)

data$years.teaching.experience.binned<- NA
data$years.teaching.experience.binned[data$years.teaching.experience >= 0 & data$years.teaching.experience <= 5] <- "0-5"
data$years.teaching.experience.binned[data$years.teaching.experience > 5 & data$years.teaching.experience <= 10] <- "5-10"
data$years.teaching.experience.binned[data$years.teaching.experience > 10 & data$years.teaching.experience <= 20] <- "10-20"
data$years.teaching.experience.binned[data$years.teaching.experience > 20 & data$years.teaching.experience <= 30] <- "20-30"
data$years.teaching.experience.binned[data$years.teaching.experience > 30] <- "30+"
data$years.teaching.experience.binned[is.na(data$years.teaching.experience) == T] <- NA
data$years.teaching.experience.binned <- as.factor(data$years.teaching.experience.binned)

data$percent.lecture.binned <- NA
data$percent.lecture.binned[data$percent.lecture >= 0 & data$percent.lecture <= 25] <- "0-25"
data$percent.lecture.binned[data$percent.lecture > 25 & data$percent.lecture <= 50] <- "25-50"
data$percent.lecture.binned[data$percent.lecture > 50 & data$percent.lecture <= 75] <- "50-75"
data$percent.lecture.binned[data$percent.lecture > 75 & data$percent.lecture <= 100] <- "75-100"
data$percent.lecture.binned[is.na(data$percent.lecture) == T] <- NA
data$percent.lecture.binned <- as.factor(data$percent.lecture.binned)
```

### Subsetting down to final variables

```{r}
data_final <- data %>%
  select(instructor.last.name, instructor.anonymized, section, InstructorName_Section_Semester2, 
         InstructorAnonymized_Section_Semester, Opt.out_pre, Opt.out_post, test.time.pre, test.time.post, 
         Q16_a_pre_c_1415:Q16_c_pre_c_1415, Q16.a_pre_c:Q16.d_pre_c, Q17_pre_c:Q47_pre_c, Q16_pre_c_RW, 
         Q17_pre_c_RW:Q47_pre_c_RW, Q16_a_post_c_1415:Q16_c_post_c_1415, Q16.a_post_c:Q16.d_post_c, Q17_post_c:Q47_post_c,
         Q16_post_c_RW, Q17_post_c_RW:Q47_post_c_RW, Q6.a_pre_a:Q9.f_pre_a,Q6.a_post_a:Q9.f_post_a, math_grades_pre,
         math_grades_post, math_comp_pre, math_comp_post, stats_career_usage_pre, stats_career_usage_post, 
         mastering_confidence_pre, mastering_confidence_post, choice_likelihood_pre, choice_likelihood_post, why_take_pre,
         why_take_post, is.major.course, field_major_final, gpa, grade_expectation_pre_final, 
         grade_expectation_post_final, gender, age, has.taken.stat.course, prev.stat.course, status_final, firstgen,
         race_origin, is.white, Test.Order_pre, Test.Order_post, instructor.gender,
         CarnegieClassification, department.type, is.stats.department,position.classification.final,
         years.teaching.intro.stats, years.teaching.intro.stats.binned, years.teaching.experience, 
         years.teaching.experience.binned, morecourses, Graduate_Theoretical_Stats, Graduate_Applied_Stats, 
         advanced.stats.degree.final, semester, year, institution, institution.anonymized, days.meet.final, time.meet, 
         class.session.length, class.size.start, class.size.end, class.size.start.ind, class.size.end.ind, 
         class.meet.weeks, class.meet.weeks.ind, textbook.used, textbook.classification, no.supplemental.textbook, 
         math.prereq, student.type, TA, primary.new.content.obtainment.final, reading_quiz, graded_homework, 
         graded_lab_activities, accountability.assignments_other, percent.lecture, percent.lecture.binned,
         admin.pre.location, admin.post.location, admin.pre.time, admin.post.time, incentive.pre, incentive.post,
         isi.workshop, analyzing.data.experience, gaise.familiar, Pre_DC_final, Post_DC_final, Pre_DS_final, 
         Post_DS_final, Pre_CI_final, Post_CI_final, Pre_ST_final, Post_ST_final, Pre_Sim_final, Post_Sim_final, 
         Q181920_pre_c, Q181920_post_c, Q28293031_pre_c, Q28293031_post_c, Q3233_pre_c, Q3233_post_c, Q373839_pre_c, 
         Q373839_post_c, Q4041_pre_c, Q4041_post_c, Affect_pre, Affect_post, Cognitive.Competence_pre, 
         Cognitive.Competence_post,  Difficulty_pre, Difficulty_post, Effort_pre, Effort_post, Interest_pre, 
         Interest_post, Value_pre, Value_post, PRE_c_RR, POST_c_RR, pre_a_rr, POST_a_RR, math_satact_flag, SATACTzscore, 
         pre.perc.33, pre.perc.24, post.perc.33, post.perc.24, gain, gain_24, ach_gain, new_ach_gain, DC_gains_final, 
         DS_gains_final, CI_gains_final, ST_gains_final, Sim_gains_final, overall_attitude_pre, overall_attitude_post, 
         Affect_change, Cog_change, Difficulty_change, Effort_change, Interest_change, Value_change)
```

### Renaming variables in final data set

```{r}
data_final$firstgen <- as.factor(data_final$firstgen)

names(data_final)[names(data_final) == "InstructorName_Section_Semester2"] <- "instructor.name.section.semester"
names(data_final)[names(data_final) == "InstructorAnonymized_Section_Semester"] <- "instructor.anonymized.section.semester"
names(data_final)[names(data_final) == "Opt.out_pre"] <- "opt.out.pre"
names(data_final)[names(data_final) == "Opt.out_post"] <- "opt.out.post"
names(data_final)[names(data_final) == "math_grades_pre"] <- "math.perf.pre"
names(data_final)[names(data_final) == "math_grades_post"] <- "math.perf.post"
names(data_final)[names(data_final) == "math_comp_pre"] <- "math.comp.pre"
names(data_final)[names(data_final) == "math_comp_post"] <- "math.comp.post"
names(data_final)[names(data_final) == "stats_career_usage_pre"] <- "stats.career.usage.pre"
names(data_final)[names(data_final) == "stats_career_usage_post"] <- "stats.career.usage.post"
names(data_final)[names(data_final) == "mastering_confidence_pre"] <- "mastering.confidence.pre"
names(data_final)[names(data_final) == "mastering_confidence_post"] <- "mastering.confidence.post"
names(data_final)[names(data_final) == "choice_likelihood_pre"] <- "choice.likelihood.pre"
names(data_final)[names(data_final) == "choice_likelihood_post"] <- "choice.likelihood.post"
names(data_final)[names(data_final) == "why_take_pre"] <- "why.take.pre"
names(data_final)[names(data_final) == "why_take_post"] <- "why.take.post"
names(data_final)[names(data_final) == "field_major_final"] <- "field.major"
names(data_final)[names(data_final) == "grade_expectation_pre_final"] <- "grade.expectation.pre"
names(data_final)[names(data_final) == "grade_expectation_post_final"] <- "grade.expectation.post"
names(data_final)[names(data_final) == "status_final"] <- "status"
names(data_final)[names(data_final) == "race_origin"] <- "race.origin"
names(data_final)[names(data_final) == "Test.Order_pre"] <- "test.order.pre"
names(data_final)[names(data_final) == "Test.Order_post"] <- "test.order.post"
names(data_final)[names(data_final) == "CarnegieClassification"] <- "carnegie.classification"
names(data_final)[names(data_final) == "position.classification.final"] <- "position.classification"
names(data_final)[names(data_final) == "Graduate_Theoretical_Stats"] <- "graduate.theoretical.stats"
names(data_final)[names(data_final) == "Graduate_Applied_Stats"] <- "graduate.applied.stats"
names(data_final)[names(data_final) == "advanced.stats.degree.final"] <- "advanced.stats.degree.type"
names(data_final)[names(data_final) == "days.meet.final"] <- "days.meet"
names(data_final)[names(data_final) == "no.supplemental.textbook"] <- "supplemental.material"
names(data_final)[names(data_final) == "reading_quiz"] <- "reading.quiz"
names(data_final)[names(data_final) == "graded_homework"] <- "graded.homework"
names(data_final)[names(data_final) == "graded_lab_activities"] <- "graded.lab.activities"
names(data_final)[names(data_final) == "accountability.assignments_other"] <- "accountability.assignments.other"
names(data_final)[names(data_final) == "primary.new.content.obtainment.final"] <- "lecture.type"
names(data_final)[names(data_final) == "Pre_DC_final"] <- "dc.pre"
names(data_final)[names(data_final) == "Post_DC_final"] <- "dc.post"
names(data_final)[names(data_final) == "Pre_DS_final"] <- "ds.pre"
names(data_final)[names(data_final) == "Post_DS_final"] <- "ds.post"
names(data_final)[names(data_final) == "Pre_CI_final"] <- "ci.pre"
names(data_final)[names(data_final) == "Post_CI_final"] <- "ci.post"
names(data_final)[names(data_final) == "Pre_ST_final"] <- "st.pre"
names(data_final)[names(data_final) == "Post_ST_final"] <- "st.post"
names(data_final)[names(data_final) == "Pre_Sim_final"] <- "sim.pre"
names(data_final)[names(data_final) == "Post_Sim_final"] <- "sim.post"
names(data_final)[names(data_final) == "Affect_pre"] <- "affect.pre"
names(data_final)[names(data_final) == "Affect_post"] <- "affect.post"
names(data_final)[names(data_final) == "Cognitive.Competence_pre"] <- "cognitive.competence.pre"
names(data_final)[names(data_final) == "Cognitive.Competence_post"] <- "cognitive.competence.post"
names(data_final)[names(data_final) == "Difficulty_pre"] <- "difficulty.pre"
names(data_final)[names(data_final) == "Difficulty_post"] <- "difficulty.post"
names(data_final)[names(data_final) == "Effort_pre"] <- "effort.pre"
names(data_final)[names(data_final) == "Effort_post"] <- "effort.post"
names(data_final)[names(data_final) == "Interest_pre"] <- "interest.pre"
names(data_final)[names(data_final) == "Interest_post"] <- "interest.post"
names(data_final)[names(data_final) == "Value_pre"] <- "value.pre"
names(data_final)[names(data_final) == "Value_post"] <- "value.post"
names(data_final)[names(data_final) == "PRE_c_RR"] <- "c.rr.pre"
names(data_final)[names(data_final) == "POST_c_RR"] <- "c.rr.post"
names(data_final)[names(data_final) == "pre_a_rr"] <- "a.rr.pre"
names(data_final)[names(data_final) == "POST_a_RR"] <- "a.rr.post"
names(data_final)[names(data_final) == "math_satact_flag"] <- "math.satact.flag"
names(data_final)[names(data_final) == "SATACTzscore"] <- "satact.zscore"
names(data_final)[names(data_final) == "gain"] <- "gain.33"
names(data_final)[names(data_final) == "gain_24"] <- "gain.24"
names(data_final)[names(data_final) == "ach_gain"] <- "ach.gain.33"
names(data_final)[names(data_final) == "new_ach_gain"] <- "ach.gain.24"
names(data_final)[names(data_final) == "DC_gains_final"] <- "dc.gains"
names(data_final)[names(data_final) == "DS_gains_final"] <- "ds.gains"
names(data_final)[names(data_final) == "CI_gains_final"] <- "ci.gains"
names(data_final)[names(data_final) == "ST_gains_final"] <- "st.gains"
names(data_final)[names(data_final) == "Sim_gains_final"] <- "sim.gains"
names(data_final)[names(data_final) == "overall_attitude_pre"] <- "overall.attitude.pre"
names(data_final)[names(data_final) == "overall_attitude_post"] <- "overall.attitude.post"
names(data_final)[names(data_final) == "Affect_change"] <- "affect.change"
names(data_final)[names(data_final) == "Cog_change"] <- "cognitive.competence.change"
names(data_final)[names(data_final) == "Difficulty_change"] <- "difficulty.change"
names(data_final)[names(data_final) == "Effort_change"] <- "effort.change"
names(data_final)[names(data_final) == "Interest_change"] <- "interest.change"
names(data_final)[names(data_final) == "Value_change"] <- "value.change"



for (i in c(6:8))
{
  names(data_final)[names(data_final) == paste0("Q", i, ".a_pre_a")] <- paste0("q", i, "a.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".b_pre_a")] <- paste0("q", i, "b.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".c_pre_a")] <- paste0("q", i, "c.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".d_pre_a")] <- paste0("q", i, "d.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".e_pre_a")] <- paste0("q", i, "e.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".f_pre_a")] <- paste0("q", i, "f.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".g_pre_a")] <- paste0("q", i, "g.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".h_pre_a")] <- paste0("q", i, "h.pre.a") 
  names(data_final)[names(data_final) == paste0("Q", i, ".i_pre_a")] <- paste0("q", i, "i.pre.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".j_pre_a")] <- paste0("q", i, "j.pre.a")
  
  names(data_final)[names(data_final) == paste0("Q", i, ".a_post_a")] <- paste0("q", i, "a.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".b_post_a")] <- paste0("q", i, "b.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".c_post_a")] <- paste0("q", i, "c.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".d_post_a")] <- paste0("q", i, "d.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".e_post_a")] <- paste0("q", i, "e.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".f_post_a")] <- paste0("q", i, "f.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".g_post_a")] <- paste0("q", i, "g.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".h_post_a")] <- paste0("q", i, "h.post.a") 
  names(data_final)[names(data_final) == paste0("Q", i, ".i_post_a")] <- paste0("q", i, "i.post.a")
  names(data_final)[names(data_final) == paste0("Q", i, ".j_post_a")] <- paste0("q", i, "j.post.a")
}

names(data_final)[names(data_final) == "Q9.a_pre_a"] <- "q9a.pre.a"
names(data_final)[names(data_final) == "Q9.b_pre_a"] <- "q9b.pre.a"
names(data_final)[names(data_final) == "Q9.c_pre_a"] <- "q9c.pre.a"
names(data_final)[names(data_final) == "Q9.d_pre_a"] <- "q9d.pre.a"
names(data_final)[names(data_final) == "Q9.e_pre_a"] <- "q9e.pre.a"
names(data_final)[names(data_final) == "Q9.f_pre_a"] <- "q9f.pre.a"

names(data_final)[names(data_final) == "Q9.a_post_a"] <- "q9a.post.a"
names(data_final)[names(data_final) == "Q9.b_post_a"] <- "q9b.post.a"
names(data_final)[names(data_final) == "Q9.c_post_a"] <- "q9c.post.a"
names(data_final)[names(data_final) == "Q9.d_post_a"] <- "q9d.post.a"
names(data_final)[names(data_final) == "Q9.e_post_a"] <- "q9e.post.a"
names(data_final)[names(data_final) == "Q9.f_post_a"] <- "q9f.post.a"

names(data_final)[names(data_final) == "Q16_a_pre_c_1415"] <- "q16a.pre.c.1415"
names(data_final)[names(data_final) == "Q16_b_pre_c_1415"] <- "q16b.pre.c.1415"
names(data_final)[names(data_final) == "Q16_c_pre_c_1415"] <- "q16c.pre.c.1415"
names(data_final)[names(data_final) == "Q16.a_pre_c"] <- "q16a.pre.c"
names(data_final)[names(data_final) == "Q16.b_pre_c"] <- "q16b.pre.c"
names(data_final)[names(data_final) == "Q16.c_pre_c"] <- "q16c.pre.c"
names(data_final)[names(data_final) == "Q16.d_pre_c"] <- "q16d.pre.c"
names(data_final)[names(data_final) == "Q16_pre_c_RW"] <- "q16.pre.c.rw"

names(data_final)[names(data_final) == "Q16_a_post_c_1415"] <- "q16a.post.c.1415"
names(data_final)[names(data_final) == "Q16_b_post_c_1415"] <- "q16b.post.c.1415"
names(data_final)[names(data_final) == "Q16_c_post_c_1415"] <- "q16c.post.c.1415"
names(data_final)[names(data_final) == "Q16.a_post_c"] <- "q16a.post.c"
names(data_final)[names(data_final) == "Q16.b_post_c"] <- "q16b.post.c"
names(data_final)[names(data_final) == "Q16.c_post_c"] <- "q16c.post.c"
names(data_final)[names(data_final) == "Q16.d_post_c"] <- "q16d.post.c"
names(data_final)[names(data_final) == "Q16_post_c_RW"] <- "q16.post.c.rw"

for (i in c(17:45))
{
  names(data_final)[names(data_final) == paste0("Q", i, "_pre_c")] <-  paste0("q", i, ".pre.c")
  names(data_final)[names(data_final) == paste0("Q", i, "_post_c")] <- paste0("q", i, ".post.c")
  names(data_final)[names(data_final) == paste0("Q", i, "_pre_c_RW")] <- paste0("q", i, ".pre.c.rw")
  names(data_final)[names(data_final) == paste0("Q", i, "_post_c_RW")] <- paste0("q", i, ".post.c.rw")
}

names(data_final)[names(data_final) == "Q46.a_pre_c"] <- "q46a.pre.c"
names(data_final)[names(data_final) == "Q46.b_pre_c"] <- "q46b.pre.c"
names(data_final)[names(data_final) == "Q47_pre_c"] <- "q47.pre.c"
names(data_final)[names(data_final) == "Q46.a_pre_c_RW"] <- "q46a.pre.c.rw"
names(data_final)[names(data_final) == "Q46.b_pre_c_RW"] <- "q46b.pre.c.rw"
names(data_final)[names(data_final) == "Q47_pre_c_RW"] <- "q47.pre.c.rw"

names(data_final)[names(data_final) == "Q46.a_post_c"] <- "q46a.post.c"
names(data_final)[names(data_final) == "Q46.b_post_c"] <- "q46b.post.c"
names(data_final)[names(data_final) == "Q47_post_c"] <- "q47.post.c"
names(data_final)[names(data_final) == "Q46.a_post_c_RW"] <- "q46a.post.c.rw"
names(data_final)[names(data_final) == "Q46.b_post_c_RW"] <- "q46b.post.c.rw"
names(data_final)[names(data_final) == "Q47_post_c_RW"] <- "q47.post.c.rw"

names(data_final)[names(data_final) == "Q181920_pre_c"] <- "q181920.pre.c"
names(data_final)[names(data_final) == "Q28293031_pre_c"] <- "q28293031.pre.c"
names(data_final)[names(data_final) == "Q3233_pre_c"] <- "q3233.pre.c"
names(data_final)[names(data_final) == "Q373839_pre_c"] <- "q373839.pre.c"
names(data_final)[names(data_final) == "Q4041_pre_c"] <- "q4041.pre.c"

names(data_final)[names(data_final) == "Q181920_post_c"] <- "q181920.post.c"
names(data_final)[names(data_final) == "Q28293031_post_c"] <- "q28293031.post.c"
names(data_final)[names(data_final) == "Q3233_post_c"] <- "q3233.post.c"
names(data_final)[names(data_final) == "Q373839_post_c"] <- "q373839.post.c"
names(data_final)[names(data_final) == "Q4041_post_c"] <- "q4041.post.c"
```

### Recalculating Gain Variables in final data set

```{r}
data_final$gain.33 <- data_final$post.perc.33 - data_final$pre.perc.33
data_final$ach.gain.33 <- data_final$gain.33 / (1 - data_final$pre.perc.33)
data_final$ach.gain.24 <- data_final$gain.24 / (1 - data_final$pre.perc.24)
```

### Changing Percent Corrects from Proportions to Percents

```{r}
data_final$pre.perc.24 <- 100 * data_final$pre.perc.24
data_final$post.perc.24 <- 100 * data_final$post.perc.24
data_final$pre.perc.33 <- 100 * data_final$pre.perc.33
data_final$post.perc.33 <- 100 * data_final$post.perc.33
```

### Section Level Variables in final data set

```{r}
detach(package:plyr)

data_final$answered.pre <- 1
data_final$answered.pre[data_final$pre.perc.24 == 0] <- 0

data_final$answered.post <- 1
data_final$answered.post[data_final$post.perc.24 == 0] <- 0

data_final$answered.both <- 1
data_final$answered.both[data_final$pre.perc.24 == 0 | data_final$post.perc.24 == 0] <- 0

data_final <- data_final %>%
  group_by(instructor.anonymized.section.semester, year) %>%
  mutate(section.num.responded = n(), 
         section.pre.responded = sum(answered.pre, na.rm = T),
         section.post.responded = sum(answered.post, na.rm = T),
         section.both.responded = sum(answered.both, na.rm = T),
         # section.c.rr1 = section.both.responded/section.pre.responded, 
         # section.c.rr2 = section.post.responded/section.pre.responded,
         # section.pre.rr = section.pre.responded/class.size.start,
         # section.post.rr = section.post.responded/class.size.end,
         # section.pre.rr.new = section.pre.responded/section.num.responded,
         # section.post.rr.new = section.post.responded/section.num.responded,
         section.c.rr = section.both.responded/class.size.start, 
         section.ach.gain.24 = mean(ach.gain.24, na.rm = T),
         section.pre.perc.24 = mean(pre.perc.24, na.rm = T),
         section.post.perc.24 = mean(post.perc.24, na.rm = T),         
         section.gpa = mean(gpa, na.rm = T),
         section.satact.zscore = mean(satact.zscore, na.rm = T),
         section.affect.pre = mean(affect.pre, na.rm = T),
         section.affect.post = mean(affect.post, na.rm = T),
         section.cognitive.competence.pre = mean(cognitive.competence.pre, na.rm = T),
         section.cognitive.competence.post = mean(cognitive.competence.post, na.rm = T),
         section.difficulty.pre = mean(difficulty.pre, na.rm = T),
         section.difficulty.post = mean(difficulty.post, na.rm = T),
         section.effort.pre = mean(effort.pre, na.rm = T),
         section.effort.post = mean(effort.post, na.rm = T),
         section.interest.pre = mean(interest.pre, na.rm = T),
         section.interest.post = mean(interest.post, na.rm = T),
         section.value.pre = mean(value.pre, na.rm = T),
         section.value.post = mean(value.post, na.rm = T),
         section.overall.attitude.pre = mean(overall.attitude.pre, na.rm = T),
         section.overall.attitude.post = mean(overall.attitude.post, na.rm = T),
         var.pre = var(pre.perc.24, na.rm = T),
         var.post = var(post.perc.24, na.rm = T)
         ) %>%
  ungroup() %>%
  mutate(d = (section.post.perc.24 - section.pre.perc.24) / sqrt((var.pre+var.post)/2))
```

### Changing variables to factors

```{r}
data_final$instructor.anonymized <- as.factor(data_final$instructor.anonymized)
data_final$why.take.pre <- as.factor(data_final$why.take.pre)
data_final$why.take.post <- as.factor(data_final$why.take.post)
data_final$student.type <- as.factor(data_final$student.type)
data_final$math.satact.flag <- as.factor(data_final$math.satact.flag)
```

### Re-ordering Factor Variables

```{r}
data_final$gaise.familiar <- factor(data_final$gaise.familiar, levels = c(NA, "I am not familiar with GAISE", "Unsure", "Some", "Mostly", "Completely"))

data_final$analyzing.data.experience <- factor(data_final$analyzing.data.experience, levels = c(NA, "No Experience", "Very Little Experience", "Some Experience", "A lot of Experience"))

data_final$math.prereq <- factor(data_final$math.prereq, levels = c(NA, "None", "High School Algebra", "College Algebra", "Precalculus", "Calculus", "Other"))
```

### Writing out Final Data

```{r}
### Creating Master Data Set ###
names(data_final)[names(data_final) == "instructor.anonymized"] <- "instructor.a"
names(data_final)[names(data_final) == "instructor.anonymized.section.semester"] <- "instructor.a.section"
names(data_final)[names(data_final) == "institution.anonymized"] <- "institution.a"

# Changed by Sean Leader on 5/2 to output to a "Data" folder
write.csv(data_final, "Data/All Years Final v3.csv")

### Creating Public Data Set ###
data_public <- data_final %>%
  select(-instructor.name.section.semester, -instructor.last.name, -institution)

names(data_public)[names(data_public) == "instructor.a"] <- "instructor"
names(data_public)[names(data_public) == "instructor.a.section"] <- "instructor.section"
names(data_public)[names(data_public) == "institution.a"] <- "institution"

# Changed by Sean Leader on 5/2 to output to a "Data" folder
write.csv(data_public, "Data/All Years Final v3 Public.csv")
```

```{r}
instiution_anonymized_data <- data %>%
  select(institution, institution.anonymized, year) %>%
  unique()

names(data)[names(data) == "InstructorName_Section_Semester2"] <- "instructor.name.section.semester"
names(data)[names(data) == "InstructorAnonymized_Section_Semester"] <- "instructor.anonymized.section.semester"

instructor_anonymized_data <- data %>%
  select(instructor.name.section.semester, instructor.anonymized.section.semester) %>%
  unique()

# Changed on 5/2 by Sean Leader to output to a "Data" folder
write.csv(instiution_anonymized_data, "Data/Institution_Name_Anonymized_Data.csv")
write.csv(instructor_anonymized_data, "Data/Instructor_Name_Anonymized_Data.csv")
```

```{r}
# math_prereq_1415 <- data1415 %>%
#   select(math.prereq.original, math.prereq) %>%
#   unique()
# 
# math_prereq_1516 <- data1516 %>%
#   select(math.prereq.original, math.prereq) %>%
#   unique()
# 
# math_prereq_1617 <- data1617 %>%
#   select(math.prereq.original, math.prereq.other, math.prereq) %>%
#   unique()
# 
# institution_carnegie_classification <- data %>%
#   select(institution, CarnegieClassification, institution.classification) %>%
#   unique()
# 
# write.csv(math_prereq_1415, "math_prereq_1415 Table.csv")
# write.csv(math_prereq_1516, "math_prereq_1516 Table.csv")
# write.csv(math_prereq_1617, "math_prereq_1617 Table.csv")
# write.csv(institution_carnegie_classification, "institution_carnegie_classification Table.csv")
```

```{r}
# data_final %>%
#   select(affect.change:value.change, opt.out.pre, opt.out.post, c.rr.pre, c.rr.post, pre.perc.24, post.perc.24, instructor.last.name) %>%
#   filter(is.na(affect.change) == T & is.na(cognitive.competence.change) == T & is.na(difficulty.change) == T & is.na(effort.change) == T & is.na(interest.change) == T  & is.na(value.change) == T) %>%
#   filter(opt.out.pre == 1 & opt.out.post == 1) %>%
#   summary()
#   
# sum(NA, na.rm = T)
# 
# table(data_final$year, data_final$textbook.classification)
# 
# data_final %>%
#   select(textbook.classification, math.prereq, instructor.name.section.semester, textbook.used) %>%
#   filter(math.prereq == "Calculus") %>%
#   unique()
```
